<div class="popup-header-fix-40">
    <div class="row bb-1">
        <div class="col-md-8 p-0">
            <h4 class="mb-0 wrapper-20"> Sonesh Dedhia</h4>
        </div>
        <div class="col-md-4 text-right">
            <div class="wrapper-12">
                <i class="material-icons c-p pt-8 v-middle" (click)="Close(false)"> clear</i>
            </div>
        </div>
    </div>
</div>

<div class="row pt-28">
    <div class="col-md-12">
        <mat-tab-group id="ui-backoffice-tabs" (selectedIndexChange)="changeTab($event)">

            <mat-tab label="Overview">
                <div class="row">
                    <div class="col-md-9 pl-0 miscellaneousBox">
                        <mat-form-field class="example-full-width" *ngIf="getOverview">
                            <textarea matInput class="form-control height160"
                            [disabled] = "overviewDesc" [(ngModel)]="getOverview.description"></textarea>
                            <button mat-button *ngIf="overviewDesc == true"
                                class=" bg-primary text-white right br-0 text-inherit mt-12" (click)="overviewDesc = false">EDIT</button>
                                <button mat-button *ngIf="overviewDesc == false"
                                class=" bg-primary text-white right br-0 text-inherit mt-12" (click)="overviewDesc = true;updateIFAOnboardingOverview()">SAVE</button>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row" *ngIf="isSuccess">
                    <mat-spinner class="loader text-center" [diameter]="30"></mat-spinner>
                </div>
            </mat-tab>


            <mat-tab label="Onboarding activity" (click)="getIFAActivity()">
                <h3 class="f-500">
                    Stages
                </h3>
                <div class="cardList" [formGroup]="onboardingActivityForm">
                    <div class="row pt-10 pb-10 bb">
                        <div class="col-md-8 f-14" *ngFor="let stage of stageList">
                            <mat-checkbox class="mr-8" [value]="stage.isComplete" [checked]="(stage.isComplete == 1)? true:false"
                            (change)="updateActivityCompleteness(stage,$event)"> </mat-checkbox>
                            <span
                                [ngStyle]="{ 'text-decoration': onboardingActivityForm.get('firstCall').value == true ? 'line-through': 'initial' }">
                                {{stage.taskName}}
                            </span>
                        </div>
                        <div class="col-md-4"></div>
                    </div>

                </div>

                <div class="bg-grey lter mt-44 p-20">
                    <h4 class="f-14 f-500">Comments</h4>
                    <div class="row pb-20" *ngFor="let activity of activityCommentList">
                        <div class="col-md-1 text-center p-0">
                            <img src="/assets/images/svg/comment-icon.svg">
                        </div>
                        <div class="col-md-9 pl-0">
                            <h4 class="f-14">{{activity.name}} <span class="text-primitive">a minute ago </span> </h4>
                            <p  *ngIf="activity.isEdit == true">{{activity.commentMsg}}</p>
                            <div *ngIf="activity.isEdit == false">
                                <mat-form-field>
                                <input matInput type="text" maxlength="10" [(ngModel)]="activity.commentMsg" class="form-control br-0">
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-2 p-0 text-right">
                            <p *ngIf="activity.isEdit == true" class="f-12 c-p mr-8 d-inline-block"(click)='activityCommentFun(activity,false)'> Edit </p>
                            <p *ngIf="activity.isEdit == false" class="f-12 c-p mr-8 d-inline-block"(click)='activityCommentFun(activity,true)'> Save </p>
                            <p class="f-12 c-p d-inline-block"> Delete </p>
                        </div>
                    </div>

                    <!-- <div class="row">
                        <div class="col-md-1 text-center p-0">
                            <img src="/assets/images/svg/comment-icon.svg">
                        </div>
                        <div class="col-md-9 pl-0">
                            <h4 class="f-14">Nita Shinde <span class="text-primitive">30 minutes ago </span> </h4>
                            <p>This is a test comment. All comments related to tasks come here. This is second line of
                                the comment.</p>
                        </div>
                        <div class="col-md-2 p-0 text-right">
                            <p class="f-12 text_underLine c-p mr-8 d-inline-block"> Edit </p>
                            <p class="f-12 text_underLine c-p d-inline-block"> Delete </p>
                        </div>
                    </div> -->
                </div>

                <div class="bg-grey shadow lter p-20">
                    <div class="row">
                        <div class="col-md-1 text-center p-0">
                            <img src="/assets/images/svg/comment-icon.svg">
                        </div>
                        <div class="col-md-9 p-0">
                            <mat-form-field>
                                <input matInput type="text" [(ngModel)]="Comment" maxlength="10" class="form-control br-0">
                            </mat-form-field>
                        </div>
                        <div class="col-md-2 p-0 text-right">
                            <p class="f-12 c-p mr-8 d-inline-block"(click)='makeComment(Comment,false)'> Comment </p>
                        </div>
                    </div>
                </div>



            </mat-tab>

            <mat-tab label="RTA details">
                <div class="row">
                    <div class="back-office-table col-md-12 overflow-hidden">
                        <h3 class="f-16">CAMS</h3>
                        <table id="table-low" mat-table [dataSource]="camsDS" appSkeletonLoading
                            [appSkeletonLoading]="utilservice.isLoading">
                            <ng-container matColumnDef="arn">
                                <th class="br" mat-header-cell *matHeaderCellDef> ARN/RIA </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.arnRiaDetailsId}}
                                    </div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="regEmailId">
                                <th class="br" mat-header-cell *matHeaderCellDef> Registered email ID </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.registeredEmail}}
                                    </div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="scheduleExp">
                                <th class="br" mat-header-cell *matHeaderCellDef> Schedule expires on </th>
                                <td class="br" mat-cell *matCellDef="let element"> {{element.scheduleExp}} </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
                        </table>
                    </div>
                </div>

                <div class="row pt-16">
                    <div class="back-office-table col-md-12 overflow-hidden">
                        <h3 class="f-16">Karvy (KFintech)</h3>
                        <table id="table-low" mat-table [dataSource]="karvyDS" appSkeletonLoading
                            [appSkeletonLoading]="utilservice.isLoading">
                            <ng-container matColumnDef="arn">
                                <th class="br" mat-header-cell *matHeaderCellDef> ARN/RIA </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.arnRiaDetailsId}}
                                    </div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="loginId">
                                <th class="br" mat-header-cell *matHeaderCellDef> Login ID </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.loginId}}
                                    </div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="registeredId">
                                <th class="br" mat-header-cell *matHeaderCellDef> Registered email ID </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.registeredEmail}}
                                    </div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="userOrdering">
                                <th class="br" mat-header-cell *matHeaderCellDef> Use for file ordering? </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        <span *ngIf="!utilservice.isLoading">{{element.fileOrderingUseabilityStatusId == 1 ? 'Yes' : 'No'}}</span>
                                    </div>
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                        </table>
                    </div>
                </div>

                <div class="row pt-16">
                    <div class="back-office-table col-md-12 overflow-hidden">
                        <h3 class="f-16"> Franklin Templeton </h3>
                        <table id="table-low" mat-table [dataSource]="frankDS" appSkeletonLoading
                            [appSkeletonLoading]="utilservice.isLoading">
                            <ng-container matColumnDef="arn">
                                <th class="br" mat-header-cell *matHeaderCellDef> ARN/RIA </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.arnRiaDetailsId}}
                                    </div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="loginId">
                                <th class="br" mat-header-cell *matHeaderCellDef> Login ID </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.loginId}}
                                    </div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="registeredId">
                                <th class="br" mat-header-cell *matHeaderCellDef> Registered email ID </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.registeredEmail}}
                                    </div>
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns3;"></tr>
                        </table>
                    </div>
                </div>


                <div class="row pt-16">
                    <div class="back-office-table col-md-12 overflow-hidden">
                        <h3 class="f-16"> CAMS Fundsnet </h3>
                        <table id="table-low" mat-table [dataSource]="fundsDS" appSkeletonLoading
                            [appSkeletonLoading]="utilservice.isLoading">
                            <ng-container matColumnDef="arn">
                                <th class="br" mat-header-cell *matHeaderCellDef> ARN/RIA </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.arnRiaDetailsId}}
                                    </div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="loginId">
                                <th class="br" mat-header-cell *matHeaderCellDef> Login ID </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">
                                        {{element.loginId}}
                                    </div>
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns4"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns4;"></tr>
                        </table>
                    </div>
                </div>

                <div *ngIf="rtaAPIError && !utilservice.isLoading" class="d-flex flex-column align-items-center">
                    <img class="width300" src="assets/images/svg/noDataFound.svg">
                    <h4 class="text-center pt-12">Sorry! it's not you it's us</h4>
                </div>
            </mat-tab>

            <mat-tab label="Team members">
                <div class="row pt-16">
                    <div class="back-office-table col-md-12 overflow-hidden">
                        <table id="table-low" mat-table [dataSource]="userList" appSkeletonLoading
                        [appSkeletonLoading]="utilservice.isLoading">

                            <ng-container matColumnDef="name">
                                <th class="br" mat-header-cell *matHeaderCellDef> Name </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">{{element.fullName}}</div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="email">
                                <th class="br" mat-header-cell *matHeaderCellDef> Email </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">{{element.email}}</div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="mobile">
                                <th class="br" mat-header-cell *matHeaderCellDef> Mobile </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">{{element.mobile}}</div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="role">
                                <th class="br" mat-header-cell *matHeaderCellDef> Role </th>
                                <td class="br" mat-cell *matCellDef="let element">
                                    <div class="bar">{{element.role?.roleName}}</div>
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        </table>


                    </div>
                </div>

                <div *ngIf="teamAPIError && !utilservice.isLoading" class="d-flex flex-column align-items-center">
                    <img class="width300" src="assets/images/svg/noDataFound.svg">
                    <h4 class="text-center pt-12">Sorry! it's not you it's us</h4>
                </div>

            </mat-tab>

        </mat-tab-group>
    </div>
</div>





<div class="bottom-fixed wrapper-12 pt-16">
    <div class="row">
        <div class="col-md-4">
            <h5 class="mb-0 pt-8 text-white c-p" (click)="Close(false)">Cancel</h5>
        </div>
        <div class="col-md-8 right text-right">
            <button mat-button class="btn-bottom br-0 text-inherit">Save</button>
        </div>
    </div>
</div>