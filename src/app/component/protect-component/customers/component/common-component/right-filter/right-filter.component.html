<div class="row bb-1 popup-header-fix-35">
    <div class="col-md-10 p-0">
        <h3 class="m-0 wrapper-16"> Select filters - {{_data.name}}</h3>
    </div>
    <div class="col-md-2">
        <i class="material-icons pt-16 right text-right c-p" (click)="Close('Close')"> clear </i>
    </div>
</div>

<div class="wrapper-20 pt-80 pb-44 mb-44">
    <mat-accordion class="fliterBoxMutual">
        <mat-expansion-panel class="mb-20 boxShadowNone borderLine" (click)="panelOpenState = true" [expanded]="false">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">Family members<span class="text-right f-14 pl-12 text-custom">{{countFamily}} of
                            {{familyMember.length}}
                            selected</span></h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                    <mat-checkbox (change)="selectAll($event)" [(ngModel)]="selectUnselctAllFlag"  name="selectAll"><span [ngClass]="{'text-custom': selectUnselctAllFlag}">{{(selectUnselctAllFlag) ? 'Uncheck all' : 'Check all' }}</span>
                        </mat-checkbox>
                <mat-list-item role="listitem" *ngFor="let item of familyMember">
                    <mat-checkbox [(ngModel)]="item.selected" (change)="changeFilterFamily()">{{item.name}}
                    </mat-checkbox>
                </mat-list-item>
            </div>
        </mat-expansion-panel>
        <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
            *ngIf="_data.name!='CAPITAL GAIN REPORT'">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">AMC<span class="text-right f-14 pl-12 text-custom">{{countAmc}} of {{amc.length}}
                            selected</span></h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                    <mat-checkbox (change)="selectAll($event)"  [(ngModel)]="selectUnselctAllFlag"  name="selectAll"><span [ngClass]="{'text-custom': selectUnselctAllFlag}">{{(selectUnselctAllFlag) ? 'Uncheck all' : 'Check all' }}</span>
                        </mat-checkbox>
                    <mat-list-item role="listitem" *ngFor="let item of amc">
                    <mat-checkbox [(ngModel)]="item.selected" (change)="changeFilterAmc()">{{item.amc_name}}
                    </mat-checkbox>
                </mat-list-item>
            </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
            *ngIf="_data.name!='CAPITAL GAIN REPORT'">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">Schemes<span class="text-right f-14 pl-12 text-custom">{{countScheme}} of
                            {{scheme.length}}
                            selected</span></h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                    <mat-checkbox (change)="selectAll($event)"  [(ngModel)]="selectUnselctAllFlag"  name="selectAll"><span [ngClass]="{'text-custom': selectUnselctAllFlag}">{{(selectUnselctAllFlag) ? 'Uncheck all' : 'Check all' }}</span>
                        </mat-checkbox>
                <mat-list-item role="listitem" *ngFor="let item of scheme">
                    <mat-checkbox [(ngModel)]="item.selected" (change)="changeFilterScheme()" class="wb">
                        {{item.schemeName}}
                    </mat-checkbox>
                </mat-list-item>
            </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
            *ngIf="_data.name!='CAPITAL GAIN REPORT'">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">Folios<span class="text-right f-14 pl-12 text-custom">{{countFolio}} of
                            {{folio.length}}
                            selected</span>
                    </h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                    <mat-checkbox (change)="selectAll($event)"  [(ngModel)]="selectUnselctAllFlag"  name="selectAll"><span [ngClass]="{'text-custom': selectUnselctAllFlag}">{{(selectUnselctAllFlag) ? 'Uncheck all' : 'Check all' }}</span>
                        </mat-checkbox>
                <mat-list-item role="listitem" *ngFor="let item of folio">
                    <mat-checkbox [(ngModel)]="item.selected" (change)="changeFilterFolio()">{{item.folioNumber}}
                    </mat-checkbox>
                </mat-list-item>
            </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
            *ngIf="_data.name != 'Overview Report' && _data.name!='CAPITAL GAIN REPORT'">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">Transaction view <span class="text-right f-14 pl-12 text-custom">{{countTranView}}
                            of
                            {{transactionView.length}} selected</span></h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                    <mat-checkbox (change)="selectAll($event)"   [(ngModel)]="selectUnselctAllFlag"  name="selectAll"><span [ngClass]="{'text-custom': selectUnselctAllFlag}">{{(selectUnselctAllFlag) ? 'Uncheck all' : 'Check all' }}</span>
                        </mat-checkbox>
                <mat-list-item role="listitem" *ngFor="let item of transactionView let i = index;">
                    <mat-checkbox [(ngModel)]="item.selected" (change)="changeSelect(item,i)">{{item.displayName}}
                    </mat-checkbox>
                </mat-list-item>
            </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
            *ngIf="_data.name != 'Overview Report' && _data.name!='CAPITAL GAIN REPORT'">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">Report Type <span class="text-right f-14 pl-12 text-custom"></span></h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                <mat-list-item role="listitem" *ngFor="let item of reportType">
                    <mat-checkbox [(ngModel)]="item.selected" (change)="changeReportFilter(item)">{{item.name}}
                    </mat-checkbox>
                </mat-list-item>
            </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
            *ngIf="_data.name!='CAPITAL GAIN REPORT'">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">Categories<span class="text-right f-14 pl-12 text-custom">{{countCategory}} of
                            {{category.length}}
                            selected</span></h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                    <mat-checkbox (change)="selectAll($event)"   [(ngModel)]="selectUnselctAllFlag"  name="selectAll"><span [ngClass]="{'text-custom': selectUnselctAllFlag}">{{(selectUnselctAllFlag) ? 'Uncheck all' : 'Check all' }}</span>
                        </mat-checkbox>
                <mat-list-item role="listitem" *ngFor="let item of category">
                    <mat-checkbox [(ngModel)]="item.selected" (change)="changeFilterCategory(this.category)">
                        {{item.category |titlecase}}
                    </mat-checkbox>
                </mat-list-item>
            </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
            *ngIf="_data.name!='SUMMARY REPORT' && _data.name != 'Overview Report' && _data.name!='CAPITAL GAIN REPORT'">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">Transaction Period</h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                <mat-list-item role="listitem">
                    <mat-checkbox [(ngModel)]="transactionPeriodCheck"
                        (change)="changeFilterPeriod(transactionPeriodCheck)">
                    </mat-checkbox>Show transaction period?
                </mat-list-item>
            </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
            *ngIf="_data.name == 'Overview Report' && _data.name!='CAPITAL GAIN REPORT'">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">Select Filter View<span
                            class="text-right f-14 pl-12">{{(overviewFilterCount)?overviewFilterCount:0}} of
                            {{overviewFilter.length}}
                            selected</span></h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                <mat-list-item role="listitem" *ngFor="let item of overviewFilter let i = index;">
                    <mat-checkbox [(ngModel)]="item.selected" (change)="changeSelect(item,i)">{{item.name}}
                    </mat-checkbox>
                </mat-list-item>
            </div>
        </mat-expansion-panel>
        <mat-expansion-panel *ngIf="_data.name!='SUMMARY REPORT'  && _data.name!='CAPITAL GAIN REPORT' && _data.name != 'Overview Report' &&  _data.name!='UNREALIZED TRANSACTION REPORT'" class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false">
        <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
            <mat-panel-title>
                <h5 class="m-0">Select Transaction Type</h5>
            </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="borderTopbox" *ngIf="panelOpenState == true">
            <mat-list-item role="listitem" *ngFor="let item of transactionType">
                <mat-checkbox [(ngModel)]="item.selected" >{{item.name}}
                </mat-checkbox>
            </mat-list-item>
        </div>
    </mat-expansion-panel>
        <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
        *ngIf="_data.name!='CAPITAL GAIN REPORT'">
            <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
                <mat-panel-title>
                    <h5 class="m-0">Save Filters</h5>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="borderTopbox" *ngIf="panelOpenState == true">
                <mat-list-item role="listitem" *ngFor="let item of saveFilters">
                    <mat-checkbox [(ngModel)]="item.selected" (change)="changeSaveFilterSelection(item)">{{item.value}}
                    </mat-checkbox>
                </mat-list-item>
            </div>
        </mat-expansion-panel>
    <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
        *ngIf="_data.name=='CAPITAL GAIN REPORT'">
        <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
            <mat-panel-title>
                <h5 class="m-0">Financial years</h5>
            </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="borderTopbox" *ngIf="panelOpenState == true">
            <mat-list-item role="listitem" *ngFor="let item of financialYears">
                <mat-checkbox [(ngModel)]="item.selected" (change)="changeFinancialYear(item)">
                    {{'FY '+item.from+' - '+item.to}}
                </mat-checkbox>
            </mat-list-item>
        </div>
    </mat-expansion-panel>
    <mat-expansion-panel class="mb-20 borderLine boxShadowNone" (click)="panelOpenState = true" [expanded]="false"
        *ngIf="_data.name=='CAPITAL GAIN REPORT'">
        <mat-expansion-panel-header [collapsedHeight]="customCollapsedHeight" [expandedHeight]="customExpandedHeight">
            <mat-panel-title>
                <h5 class="m-0">Report format</h5>
            </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="borderTopbox" *ngIf="panelOpenState == true">
            <mat-list-item role="listitem" *ngFor="let item of reportFormat">
                <mat-checkbox [(ngModel)]="item.selected" (change)="changeFormatFilter(item)">{{item.name}}
                </mat-checkbox>
            </mat-list-item>
        </div>
    </mat-expansion-panel>
   
    </mat-accordion>

    <div class="row pt-12" [formGroup]="summaryFilerForm" *ngIf="_data.name != 'Overview Report'">
        <div class="col-md-4 pl-0"
            *ngIf="_data.name!='CAPITAL GAIN REPORT' && _data.name!='ALL TRANSACTION REPORT' && _data.name!='UNREALIZED TRANSACTION REPORT' ">
            <h5 class="m-0 pb-8">Report as on</h5>
            <div class="col-md-12 p-0">
                <div class="from-group  ">
                    <mat-form-field class="ba-date">
                        <input class="form-control br-0 b-0" matInput [matDatepicker]="picker"
                            formControlName="reportAsOn" readonly>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error class="f-12">
                            This field is required
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
        </div>
        <div class="col-md-4 pl-0"
            *ngIf="transactionPeriod == true && _data.name!='CAPITAL GAIN REPORT' && _data.name!='SUMMARY REPORT'">
            <h5 class="m-0 pb-8">From date</h5>
            <div class="col-md-12 p-0">
                <mat-form-field class="ba-date">
                    <input class="form-control br-0 b-0" matInput [matDatepicker]="picker1" formControlName="fromDate"
                        readonly>
                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                    <!-- <mat-error class="f-12">
              This field is required
            </mat-error> -->
                </mat-form-field>

            </div>
        </div>
        <div class="col-md-4 p-0"
            *ngIf="transactionPeriod == true && _data.name!='CAPITAL GAIN REPORT' && _data.name!='SUMMARY REPORT'">
            <h5 class="m-0 pb-8">To date</h5>
            <div class="col-md-12 p-0">
                <mat-form-field class="ba-date">
                    <input class="form-control br-0 b-0" matInput [matDatepicker]="picker2" formControlName="toDate"
                        readonly>
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                    <!-- <mat-error class="f-12">
              This field is required
            </mat-error> -->
                </mat-form-field>

            </div>
        </div>
        <div class="col-md-6 pl-0" *ngIf="_data.name != 'Overview Report' && _data.name!='CAPITAL GAIN REPORT'">
            <h5 class="m-0 pb-8">Show zero folios?</h5>
            <mat-radio-group aria-label="Select an option" id="custom-radio" formControlName="showFolios">
                <mat-radio-button value="1"
                    [ngClass]="{'b-a-custom': summaryFilerForm.get('showFolios').value==1,'text-primary':summaryFilerForm.get('showFolios').value==1,'b-a':summaryFilerForm.get('showFolios').value==2}">
                    Yes</mat-radio-button>
                <mat-radio-button value="2"
                    [ngClass]="{'b-a-custom': summaryFilerForm.get('showFolios').value==2,'text-primary':summaryFilerForm.get('showFolios').value==2,'b-a':summaryFilerForm.get('showFolios').value==1}">
                    No</mat-radio-button>
            </mat-radio-group>

        </div>
        <div class="col-md-6 pl-0" *ngIf=" _data.name=='CAPITAL GAIN REPORT' && this.showGrandfathering">
            <h5 class="m-0 pb-8">Grandfathering?</h5>
            <mat-radio-group aria-label="Select an option" id="custom-radio" formControlName="grandfathering">
                <mat-radio-button value="1"
                    [ngClass]="{'b-a-custom': summaryFilerForm.get('grandfathering').value==1,'text-primary':summaryFilerForm.get('grandfathering').value==1,'b-a':summaryFilerForm.get('grandfathering').value==2}">
                    Yes</mat-radio-button>
                <mat-radio-button value="2"
                    [ngClass]="{'b-a-custom': summaryFilerForm.get('grandfathering').value==2,'text-primary':summaryFilerForm.get('grandfathering').value==2,'b-a':summaryFilerForm.get('grandfathering').value==1}">
                    No</mat-radio-button>
            </mat-radio-group>

        </div>
    </div>
    <div *ngIf="showError" class="errorClass">Please select at least one {{showError}}</div>
</div>
<div class="bottom-fixed-35 wrapper-12">
    <div class="row">
        <div class="col-md-4">
            <h5 class="mb-0 pt-8 text-white c-p" (click)="Close('Close')">Cancel</h5>
        </div>
        <div class="col-md-8 right pr-10 text-right">
            <!-- <button mat-button class="btn-bottom br-0 text-inherit" (click)="generateReport()">GENERATE REPORT</button> -->
            <app-progress-button class="mb-0 pt-8 text-white c-p"  (click)="(!showError) ? generateReport() : null"
                [options]="barButtonOptions">
            </app-progress-button>
        </div>
    </div>
</div>