<div class="wrapper-20 max-height-100">
  <h4 class="mb-0 pt-16">Record Payments</h4>
  <div [formGroup]="rPayment" class="pt-40">
    <div class="row">
      <div class="col-md-5">
        <h5 class="m-0 text-right pt-8">Amount received</h5>
      </div>
      <div class="col-md-4">
        <div class="form-group mb-0">
          <input #amountReceiveRef [maxLength]="10" (keypress)="utils.keyPress($event)" appInputValueValidation
            class="form-control" formControlName="amountReceived" matInput type="text">
        </div>
        <div class="row">
          <div class="col-md-10 pr-0">
            <mat-error class="f-12 pt-4"
              *ngIf="rPayment.get('amountReceived').errors?.required && rPayment.get('amountReceived').touched">
              This feild is required
            </mat-error>
            <mat-error *ngIf="(rPayment.get('amountReceived').errors?.max)" class="f-12 pt-4">
              Should be less than or equal to {{this.balDue}}
            </mat-error>
          </div>
          <div class="col-md-2 pl-0">
            <p class="mb-0 f-12 text-custom text-right pt-4">
              {{ amountReceiveRef.value.length }}/{{ getFormControl().amountReceived.maxLength }}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row pt-24">
      <div class="col-md-5">
        <h5 class="m-0 text-right pt-8">Charges,if any</h5>
      </div>
      <div class="col-md-4">
        <div class="form-group mb-0">
          <input #chargesIfAnyRef [maxLength]="10" (keypress)="utils.keyPress($event)" appInputValueValidation
            class="form-control" formControlName="chargesIfAny" type="text">
        </div>
        <div class="row">
          <div class="col-md-10">
            <p class="f-12 m-0 text-custom pt-4">Optional</p>
          </div>
          <!-- <mat-error class="f-12 pt-4" *ngIf="rPayment.get('chargesIfAny').errors?.required && rPayment.get('chargesIfAny').touched">
              This feild is required
            </mat-error> -->
          <div class="col-md-2 pl-0">
            <p class="mb-0 f-12 text-custom text-right pt-4">
              {{ chargesIfAnyRef.value.length }}/{{getFormControl().chargesIfAny.maxLength}}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row pt-24">
      <div class="col-md-5">
        <h5 class="m-0 text-right pt-8">TDS</h5>
      </div>
      <div class="col-md-4">
        <div class="form-group mb-0">
          <input #tdsRef [maxLength]="10" (keypress)="utils.keyPress($event)" (keyup)="onChange()"
            appInputValueValidation class="form-control" formControlName="tds" type="text">
        </div>
        <div class="row">
          <div class="col-md-10 pr-0">
            <mat-error class="f-12 pt-4"
              *ngIf="rPayment.get('tds').errors?.required && rPayment.get('tds').touched && showError==false">
              This field is required
            </mat-error>
            <mat-error *ngIf="showError==true" class="f-12 pt-4">
              Should be less than or equal to {{this.tdsAmt}}
            </mat-error>
          </div>
          <div class="col-md-2 pl-0">
            <p class="mb-0 f-12 text-custom text-right pt-4">
              {{ tdsRef.value.length }}/{{getFormControl().tds.maxLength}}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row pt-24">
      <div class="col-md-5">
        <h5 class="m-0 text-right pt-8">Payment date</h5>
      </div>
      <div class="col-md-4">
        <div class="form-group mb-0">
          <mat-form-field class="ba-date">
            <input matInput formControlName="paymentDate" class="form-control br-0 b-0" [matDatepicker]="picker"
              readonly>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error class="f-12 pt-4">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </div>
    <div class="row pt-24">
      <div class="col-md-5">
        <h5 class="m-0 pt-8 text-right">Payment mode</h5>
      </div>
      <div class="col-md-5">
        <div class="form-group mb-0">
          <select class="form-control" formControlName="paymentMode" id="Category">
            <option disabled hidden selected value="">Select payment mode</option>
            <option *ngFor="let feeCollectionMode of feeCollectionMode" value="{{feeCollectionMode.name}}">
              {{feeCollectionMode.name}}
            </option>
          </select>
        </div>
        <div class="row">
          <div class="col-md-10 pr-0">
            <mat-error class="f-12 pt-4"
              *ngIf="rPayment.get('paymentMode').errors?.required && rPayment.get('paymentMode').touched">
              This field is required
            </mat-error>
          </div>
        </div>
      </div>
    </div>
    <div class="row pt-24">
      <div class="col-md-5">
        <h5 class="m-0 pt-8 text-right">GST treatment</h5>
      </div>
      <div class="col-md-5">
        <div class="form-group mb-0">
          <select class="form-control" formControlName="gstTreatment">
            <option disabled hidden selected value="">Select gst treatment</option>
            <option *ngFor="let gst of this.gstTreatment" value="{{gst.name}}">{{gst.name}}
            </option>
          </select>
        </div>
        <div class="row">
          <div class="col-md-10 pr-0">
            <mat-error class="f-12 pt-4"
              *ngIf="rPayment.get('gstTreatment').errors?.required && rPayment.get('gstTreatment').touched">
              This field is required
            </mat-error>
          </div>
        </div>
      </div>
    </div>
    <div class="row pt-24">
      <div class="col-md-5">
        <h5 class="m-0 pt-8 text-right">Notes</h5>
      </div>
      <div class="col-md-5">
        <div class="form-group mb-0">
          <textarea class="form-control" #notesRef formControlName="notes"
            maxlength="{{getFormControl().notes.maxLength}}" rows="5"></textarea>
        </div>
        <div class="row">
          <div class="col-md-9">
            <p class="f-12 m-0 text-custom pt-4">Optional</p>
          </div>
          <div class="col-md-3">
            <p class="mb-0 f-12 text-custom text-right pt-4">
              {{getFormControl().notes.value?.length ? getFormControl().notes.value.length : 0}}
              /{{getFormControl().notes.maxLength}}
            </p>

          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row pt-44 mt-44 pb-44">
    <div class="col-md-12 right text-right pb-44">
      <h5 (click)="cancel('')" class="mat-stroked-button br-0 text-light mr-20">CANCEL</h5>
      <button (click)="saveFormData()" class="btn-bottom br-0 text-inherit " mat-button>SAVE
      </button>
    </div>
  </div>

</div>