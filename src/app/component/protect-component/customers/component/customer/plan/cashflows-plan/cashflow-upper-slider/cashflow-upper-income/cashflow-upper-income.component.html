<div class="row">
    <div class="col-md-12 text-right mb-10 mt-20">
        <button mat-raised-button class="btn-primary addon f-14 mr-16" (click)="addCashFlow('')">ADD
            {{ cashflowCategory | uppercase }}</button>
        <button mat-raised-button class="greryColorBg" (click)="toggleEditMode()">
            <span class="tableValue" *ngIf="!editMode">
                EDIT MODE
            </span>
            <span class="inputValue" *ngIf="editMode">
                SAVE
            </span>
        </button>
    </div>
</div>
<div class="col-md-12 cash-flow-upperTable">
    <table mat-table [dataSource]="dataSource" id="table-low" [ngClass]="editMode == true ? 'edit-mode-hover': ''">
        <ng-container matColumnDef="description">
            <th class="br-grey f-400 f-14" mat-header-cell *matHeaderCellDef> Description </th>
            <td class="br-grey f-14" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit>
                <span class="tableValue bar">
                    {{ element.description }} <img src="/assets/images/svg/cash-flow-edit-icon.svg">
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #descRef (input)="changeTableTdValue(descRef.value, 'description', i)"
                        [value]="element.description">
                </span>
            </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="month1">
            <th class="br-grey text-right f-400 f-14" mat-header-cell *matHeaderCellDef>
                Jan-{{ year.slice(-2) }}
            </th>

            <td class="br-grey text-right f-14" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month1.value">
                    {{ element.month1.value ? element.month1.value: '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month1Ref (input)="changeTableTdValue(month1Ref.value, 'month1', i)"
                        [value]="element.month1.value">
                </span>
            </td>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="month2">
            <th class="br-grey text-right f-400 f-14" mat-header-cell *matHeaderCellDef>
                Feb-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month2.value">
                    {{ element.month2.value ? element.month2.value: '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month2Ref (input)="changeTableTdValue(month2Ref.value, 'month2', i)"
                        [value]="element.month2.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month3">
            <th class="br-grey text-right f-400 f-14" mat-header-cell *matHeaderCellDef>
                Mar-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index"
                appCashflowTableEdit [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month3.value">
                    {{  element.month3.value ? element.month3.value: '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month3Ref (input)="changeTableTdValue(month3Ref.value, 'month3', i)"
                        [value]="element.month3.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month4">
            <th mat-header-cell class="br-grey text-right f-400 f-14" *matHeaderCellDef> Apr-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index"
                appCashflowTableEdit [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month4.value">
                    {{  element.month4.value ? element.month4.value: '-'  }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month4Ref (input)="changeTableTdValue(month4Ref.value, 'month4', i)"
                        [value]="element.month4.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month5">
            <th mat-header-cell class="br-grey text-right f-400 f-14" *matHeaderCellDef>
                May-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index"
                appCashflowTableEdit [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month5.value">
                    {{ element.month5.value ? element.month5.value: '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month5Ref (input)="changeTableTdValue(month5Ref.value, 'month5', i)"
                        [value]="element.month5.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month6">
            <th mat-header-cell class="br-grey text-right f-400 f-14" *matHeaderCellDef> June-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index"
                appCashflowTableEdit [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month6.value">
                    {{ element.month6.value ? element.month6.value: '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month6Ref (input)="changeTableTdValue(month6Ref.value, 'month6', i)"
                        [value]="element.month6.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month7">
            <th mat-header-cell class="br-grey text-right f-400 f-14" *matHeaderCellDef> July-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index"
                appCashflowTableEdit [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month7.value">
                    {{ element.month7.value ? element.month7.value: '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month7Ref (input)="changeTableTdValue(month7Ref.value, 'month7', i)"
                        [value]="element.month7.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month8">
            <th mat-header-cell class="br-grey text-right f-400 f-14" *matHeaderCellDef> Aug-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index"
                appCashflowTableEdit [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month8.value">
                    {{ element.month8.value ? element.month8.value: '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month8Ref (input)="changeTableTdValue(month8Ref.value, 'month8', i)"
                        [value]="element.month8.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month9">
            <th mat-header-cell class="br-grey text-right f-400 f-14" *matHeaderCellDef> Sept-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index"
                appCashflowTableEdit [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month9.value">
                    {{ element.month9.value ? element.month9.value: '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month9Ref (input)="changeTableTdValue(month9Ref.value, 'month9', i)"
                        [value]="element.month9.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month10">
            <th mat-header-cell class="br-grey text-right f-400 f-14" *matHeaderCellDef> Oct-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index"
                appCashflowTableEdit [editModeTable]="editMode">
                <span class="tableValue bar" appFormatNumber [shouldRoundOff]="true" [value]="element.month10.value">
                    {{ element.month10.value ? element.month10.value: '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month10Ref (input)="changeTableTdValue(month10Ref.value, 'month10', i)"
                        [value]="element.month10.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month11">
            <th mat-header-cell class="br-grey text-right f-400 f-14" *matHeaderCellDef> Nov-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index"
                appCashflowTableEdit [editModeTable]="editMode">
                <span class="tableValue bar">
                    {{ element.month11.value ? element.month11.value : '-' }}
                </span>
                <span class="inputValue d-none bar">
                    <input type="text" #month11Ref (input)="changeTableTdValue(month11Ref.value, 'month11', i)"
                        [value]="element.month11.value">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month12">
            <th mat-header-cell class="br-grey text-right f-400 f-14" *matHeaderCellDef> Dec-{{ year.slice(-2) }}
            </th>
            <td class="br-grey text-right f-14 f-400" mat-cell
                [ngClass]="element.month12.isAdHocChangesDone ? 'adhocChangesBg': ''"
                *matCellDef="let element; let i = index" appCashflowTableEdit [editModeTable]="editMode">
                <!-- 
                <span class="tableValue bar">
                    {{ element.month12.value ? element.month12.value : '-' }}
                </span>

                <span class="inputValue d-none bar">
                    <input type="text" #month12Ref (input)="changeTableTdValue(month12Ref.value, 'month12', i)"
                        [value]="element.month12.value">
                </span> -->

                <div class="bar row m-0 p-0 align-items-center">
                    <div class="col-md-3 m-0 p-0 c-p" *ngIf="element.month12.isAdHocChangesDone"
                        (click)="resetAdhocChanges(i, 'month12')">
                        <img src="/assets/images/svg/refresh-white.svg" alt="refresh icon" />
                    </div>

                    <div class="m-0 p-0"
                        [ngClass]="element.month12.isAdHocChangesDone ? 'col-md-9 adhocChangesBg' : 'col-md-12'">
                        <span class="tableValue">
                            {{ element.month12.value ? element.month12.value: '-' }}
                        </span>
                        <span class="inputValue d-none">
                            <input type="text" #month12Ref [value]="element.month12.value"
                                (input)="changeTableTdValue(month12Ref.value, 'month12', i)" />
                        </span>
                    </div>
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="total">
            <th mat-header-cell class="br-grey text-right f-600 f-14" *matHeaderCellDef> Total
                20{{ year.slice(-2) }}-{{ addOneInYear(year.slice(-2))}} </th>
            <td class="br-grey text-right f-14 f-600 bar" mat-cell *matCellDef="let element; let i = index"
                appFormatNumber [shouldRoundOff]="true">
                {{ element.total }} </td>
        </ng-container>

        <ng-container matColumnDef="remove">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td class="br-grey text-center f-14 " mat-cell *matCellDef="let element"
                (click)="deleteEntryCashFlow(element)">
                <i class="material-icons text-danger f-18 ">
                    delete_outline
                </i> </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>