<!-- house -->
<div class="row bb-1 popup-header-fix w-40">
    <div class="col-md-10 p-0">
        <h4 class="mb-0 wrapper-20">PREFERENCES</h4>
    </div>
    <div class="col-md-2 pr-0 text-right right">
        <i class="material-icons c-p pt-16 pr-12" (click)="close()"> clear</i>
    </div>
</div>
<div class="row" id="goal-preferences">
    <div class="col-md-12 p-0">
        <mat-tab-group animationDuration="0ms" mat-align-tabs="center" [(selectedIndex)]="selected">
            <mat-tab label="Key parameters">
                <div class="wrapper-28" [formGroup]="goalDetailsFG">
                    <div class="row pb-16">
                        <div class="col-md-4">
                            <p class="roboto mb-0 text-right pt-16">Goal amount</p>
                        </div>
                        <div class="col-md-4 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <input matInput type="text" class="form-control br-0 rupess" formControlName="goalValue"
                                    appInputValueValidation [inputValidator]="validatorType.NUMBER_ONLY">
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row pt-16 btl-1">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16">Savings start date
                                <img src="/assets/images/svg/info.svg" matTooltip="Info about the action"
                                    aria-label="Button that displays a tooltip when focused or hovered over">
                            </p>
                        </div>
                        <div class="col-md-4 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <mat-select class="form-control br-0 br-none" formControlName="savingStartDateMonth">
                                        <mat-option value="" disabled>Select option</mat-option>
                                        <mat-option [value]="month.number" *ngFor="let month of months">{{month.long}}</mat-option>
                                    </mat-select>
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-4 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <mat-select class="form-control br-0" formControlName="savingStartDateYear">
                                        <mat-option value="" disabled>Select option</mat-option>
                                        <mat-option [value]="year" *ngFor="let year of years">{{year}}</mat-option>
                                    </mat-select>
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-12" *ngIf="savingsSDError">
                            <mat-error >Savings start date cannot be greater than savings end date</mat-error>
                        </div>
                    </div>
                    <div class="row pt-16 pb-16">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16">Savings end date
                                <img src="/assets/images/svg/info.svg" matTooltip="Info about the action"
                                    aria-label="Button that displays a tooltip when focused or hovered over">
                            </p>
                        </div>
                        <div class="col-md-4 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <mat-select class="form-control br-0" formControlName="savingEndDateMonth">
                                        <mat-option value="" disabled>Select option</mat-option>
                                        <mat-option [value]="month.number" *ngFor="let month of months">{{month.long}}</mat-option>
                                    </mat-select>
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-4 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <mat-select class="form-control br-0 br-none" formControlName="savingEndDateYear">
                                        <mat-option value="" disabled>Select option</mat-option>
                                        <mat-option [value]="year" *ngFor="let year of years">{{year}}</mat-option>
                                    </mat-select>
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-12" *ngIf="savingsEDError">
                            <mat-error >Savings end date cannot be greater than goal end date</mat-error>
                        </div>
                    </div>
                    <div class="row pt-16 pb-16 btl-1">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16 ">Goal start date
                                <img src="/assets/images/svg/info.svg">
                            </p>
                        </div>
                        <div class="col-md-4 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <mat-select class="form-control br-0" formControlName="goalStartDateMonth">
                                        <mat-option value="" disabled>Select option</mat-option>
                                        <mat-option [value]="month.number" *ngFor="let month of months">{{month.long}}</mat-option>
                                    </mat-select>
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-4 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <mat-select class="form-control br-0 br-none" formControlName="goalStartDateYear">
                                        <mat-option value="" disabled>Select option</mat-option>
                                        <mat-option [value]="year" *ngFor="let year of goalStartYears">{{year}}</mat-option>
                                    </mat-select>
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-12" *ngIf="goalSDError">
                            <mat-error >Goal start date cannot be greater than goal end date</mat-error>
                        </div>
                    </div>
                    <div class="row pt-16 pb-16 btl-1" *ngIf="data.singleOrMulti == 2">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16 ">Goal end date
                                <img src="/assets/images/svg/info.svg">
                            </p>
                        </div>
                        <div class="col-md-4 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <mat-select class="form-control br-0" formControlName="goalEndDateMonth">
                                        <mat-option value="" disabled>Select option</mat-option>
                                        <mat-option [value]="month.number" *ngFor="let month of months">{{month.long}}</mat-option>
                                    </mat-select>
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-4 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <mat-select class="form-control br-0 br-none" formControlName="goalEndDateYear">
                                        <mat-option value="" disabled>Select option</mat-option>
                                        <mat-option [value]="year" *ngFor="let year of goalStartYears">{{year}}</mat-option>
                                    </mat-select>
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-16 pb-16">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16">Goal addition date
                                <img src="/assets/images/svg/info.svg"
                                    matTooltip="This is the date from which the goal calculations begin. by default, this is the date when the goal was first saved. This date cannot be greater than the goal start date. You should ideally change this date only if a goal has been reset and calculations need to be redone."
                                    aria-label="Button that displays a tooltip when focused or hovered over">
                            </p>
                        </div>
                        <div class="col-md-4 p-0">
                            {{data.remainingData.goalAdditionDate | date: 'dd/MM/yyyy'}}
                        </div>

                    </div>

                    <div class="row pt-16 pb-16 btl-1">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16">Saving status
                                <img src="/assets/images/svg/info.svg"
                                    matTooltip="When “Group all years together” is selected, we assume that you are saving for all goal years together. When Save for individual years is selected, we assume that you will save individually for each year and focus will be for saving for goal which is nearest. E.g. for a goal which is between 2023 - 2035 we will first calculate savings requirement for 2023 year only. Come 2023, we will calculate savings requirement for the 2024 year’s goal amount only."
                                    aria-label="Button that displays a tooltip when focused or hovered over">
                            </p>
                        </div>
                        <div class="col-md-8 p-0">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <mat-select class="form-control br-0" formControlName="savingStatus">
                                        <mat-option value="" disabled>Select option</mat-option>
                                        <mat-option value="1">Breakup</mat-option>
                                        <mat-option value="2">No Breakup</mat-option>
                                    </mat-select>
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                    </div>
                    <div class="row pt-32 pb-16">
                        <div class="col-md-4 pr-8 text-right">
                            <p class="roboto mb-0 text-right pt-16">
                                Step up 
                                <img src="/assets/images/svg/info.svg"
                                    matTooltip="Info about the action"
                                    aria-label="Button that displays a tooltip when focused or hovered over">
                            </p>
                        </div>
                        <div class="col-md-6 pl-0">
                            <div id="custom-slider">
                                <mat-slider min="0" max="100" formControlName="stepUp" [value]="goalDetailsFG.get('stepUp').value"></mat-slider>
                            </div>
                        </div>
                        <div class="col-md-2 pl-8 pr-0">
                            <div class="form-group mb-0">
                                <mat-form-field class="w-100">
                                    <input matInput type="text" class="form-control br-0" formControlName="stepUp"
                                    [value]="goalDetailsFG.get('stepUp').value"
                                    appInputValueValidation [inputValidator]="validatorType.NUMBER_ONLY">
                                    <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row pt-16 pb-16 btl-1">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16">Freeze calculations
                                <img src="/assets/images/svg/info.svg"
                                    matTooltip="When “Group all years together” is selected, we assume that you are saving for all goal years together. When Save for individual years is selected, we assume that you will save individually for each year and focus will be for saving for goal which is nearest. E.g. for a goal which is between 2023 - 2035 we will first calculate savings requirement for 2023 year only. Come 2023, we will calculate savings requirement for the 2024 year’s goal amount only."
                                    aria-label="Button that displays a tooltip when focused or hovered over">
                            </p>
                        </div>
                        <div class="col-md-1 p-0 pt-12">
                            <mat-checkbox id="custom-checkbox" formControlName="freezeCalculation"></mat-checkbox>
                        </div>
                        <div class="col-md-7 pr-0 right">
                            <p class="m-0 text-primitive pt-16">Last Freeze date: {{data.remainingData.lastFreezedDate | date: 'dd/MM/yyyy'}}</p>
                        </div>
                    </div>
                    <div class="row pt-16 pb-16">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16">Goal description</p>
                        </div>

                        <div class="col-md-8 pr-0 right">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <input matInput type="text" class="form-control br-0"
                                        formControlName="name">
                                        <mat-error>This field is required</mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-16 pb-16">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16">Goal notes</p>
                        </div>

                        <div class="col-md-8 pr-0 right">
                            <div class="form-group mb-0">
                                <mat-form-field>
                                    <input matInput type="text" class="form-control br-0"
                                        formControlName="notes">
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-16 pb-16">
                        <div class="col-md-4 pl-0 pr-8 text-right">
                            <p class="roboto mb-0 pt-16">Archive goal<img src="/assets/images/svg/info.svg"
                                    matTooltip="When “Group all years together” is selected, we assume that you are saving for all goal years together. When Save for individual years is selected, we assume that you will save individually for each year and focus will be for saving for goal which is nearest. E.g. for a goal which is between 2023 - 2035 we will first calculate savings requirement for 2023 year only. Come 2023, we will calculate savings requirement for the 2024 year’s goal amount only."
                                    aria-label="Button that displays a tooltip when focused or hovered over"></p>
                        </div>

                        <div class="col-md-8 pr-0 pt-16">
                            <mat-checkbox formControlName="archiveGoal"></mat-checkbox>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab label="Asset allocation">
                <div class="wrapper-28" [formGroup]="assetAllocationFG">
                    <div class="row">
                        <div class="col-md-12">
                            <mat-radio-group aria-label="Select an option" formControlName="strategicOrTactical">
                                <mat-radio-button [value]="1" class="b-a-custom text-primary">Strategic</mat-radio-button>
                                <mat-radio-button [value]="2" class="b-a text-primitive">Tactical</mat-radio-button>
                            </mat-radio-group>
                        </div>
                    </div>

                    <div class="col-md-12" *ngIf="assetAllocationFG.get('strategicOrTactical').value == 2">
                        on tactical notes
                    </div>
                    
                    <div class="col-md-12" *ngIf="assetAllocationFG.get('strategicOrTactical').value == 1">
                        <div class="row pt-32 pb-16">
                            <div class="col-md-12 pl-8 pr-0">
                                <mat-radio-group aria-label="Select an option" name="allocation_type" formControlName="staticOrProgressive">
                                    <mat-radio-button [value]="1" class="text-primary">Static asset allocation
                                    </mat-radio-button>
                                </mat-radio-group>
                            </div>
                        </div>
                        <div class="row pt-16 btl-1">
                            <div class="col-md-6 pr-0">
                                <p class="m-0 roboto text-black">Equity bifurcation</p>
                                <div class="form-group mb-0">
                                    <mat-form-field class="w-100">
                                        <input matInput formControlName="equityAllocation" type="text" class="form-control br-0">
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-md-6 pr-0">
                                <p class="m-0 roboto text-black">Debt bifurcation</p>
                                <div class="form-group mb-0">
                                    <mat-form-field class="w-100">
                                        <input matInput formControlName="debtAllocation" type="text" class="form-control br-0">
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="row pt-32 pb-16">
                            <div class="col-md-12 pl-8 pr-0">
                                <mat-radio-group aria-label="Select an option" name="allocation_type" formControlName="staticOrProgressive">
                                    <mat-radio-button value="2" class="">Progressive asset allocation</mat-radio-button>
                                </mat-radio-group>
                            </div>
                        </div>
                        <div class="row" formArrayName="rtaCamsFundNetSecurityQuestionsList">
                            <div class="row">
                                <div class="col-md-6">
                                    <p class="roboto m-0">Asset allocation stages</p>
                                </div>
                                <div class="col-md-3">
                                    <p class="m-0 roboto">Equity</p>
                                </div>
                                <div class="col-md-3">
                                    <p class="m-0 roboto">Debt</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group mb-0">
                                        <mat-form-field>
                                            <mat-select class="form-control br-0" [disabled]="assetAllocationFG.get('staticOrProgressive').value == 1">
                                                <mat-option [value]=""
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-11 text-right">
                                        <p class="f-12 m-0 pt-4 roboto text-primitive">Today - {{today | date:'MMM-yyyy'}}</p>
                                    </div>
                                </div>
                                <div class="col-md-3 pr-0">
                                    <div class="form-group mb-0">
                                        <mat-form-field class="w-100">
                                            <input matInput type="text" class="form-control br-0" [disabled]="assetAllocationFG.get('staticOrProgressive').value == 1">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="col-md-3 pr-0">
                                    <div class="form-group mb-0">
                                        <mat-form-field class="w-100">
                                            <input matInput type="text" class="form-control br-0" [disabled]="assetAllocationFG.get('staticOrProgressive').value == 1">
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                        </div>
    
                        <div class="row pt-32">
                            <div class="col-md-12">
                                <h5 class="m-0 text-primitive c-p" (click)="addStages()">+ Add stage</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab label="Returns & Inflation">
                <div class="wrapper-28">

                    <div class="mt-8 perferences-inflation-rate">
                        <table mat-table [dataSource]="dataSource1" id="table-low">

                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef class="br"> </th>
                                <td mat-cell *matCellDef="let element" class="br"> {{element.position}} </td>
                            </ng-container>

                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef> Assumption </th>
                                <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumns1; sticky: true"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
                        </table>
                    </div>

                    <div class="mt-40 Return-Inflation-table">
                        <table mat-table [dataSource]="dataSource" id="table-low">
                            <ng-container matColumnDef="static-header">
                                <td mat-header-cell *matHeaderCellDef colspan="3"
                                    class=" text-left f-400  pl-4 text-primitive bg-white">
                                    Asset class
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef class="br"></th>
                                <td mat-cell *matCellDef="let element" class="br"> {{element.position}} </td>
                            </ng-container>
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef> Assumption </th>
                                <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            <tr mat-header-row *matHeaderRowDef="['static-header']" class="p-0 bt-0 bb-0"></tr>
                        </table>
                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>
    </div>
</div>

<div class="bottom-fixed wrapper-12 w-40">
    <div class="row">
        <div class="col-md-4">
            <h4 class="mb-0 pt-8 text-white c-p f-16" (click)="close()">Cancel</h4>
        </div>
        <div class="col-md-8 right text-right">
            <button mat-button class="btn-bottom br-0 text-inherit" (click)="save()">Save</button>
        </div>
    </div>
</div>