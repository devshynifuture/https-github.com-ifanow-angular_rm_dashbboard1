<div class="popup-header-fix-60">
    <div class="row bb-1">
        <div class="col-md-8 p-0">
            <h4 class="mb-0 wrapper-20 f-500">Life insurance needs analysis - Rahul Jain </h4>
        </div>
        <div class="col-md-4 text-right">
            <div class="wrapper-12">
                <i class="material-icons c-p pt-8 v-middle" (click)="close()"> clear</i>
            </div>
        </div>
    </div>
</div>

<div class="pt-80 pl-24 pr-24 pb-48 mb-48">
    <div *ngIf="tab == 1">
        <app-progress-button *ngIf="manualObj && manualObj.isMapped == 1" class=".btn-danger br-0 right"
            (btnClick)="removeToPlan()" [options]="barButtonOptions2">
        </app-progress-button>
        <app-progress-button *ngIf="manualObj && manualObj.isMapped == 0" class="btn-primary br-0 right"
            (btnClick)="addToPlan()" [options]="barButtonOptions">
        </app-progress-button>
    </div>
    <div *ngIf="tab == 0">
        <app-progress-button *ngIf="needBase && needBase.isMapped == 1" class=".btn-danger br-0 right"
             [options]="barButtonOptions2">
        </app-progress-button>
        <app-progress-button *ngIf="needBase && needBase.isMapped == 0" class="btn-primary br-0 right"
             [options]="barButtonOptions">
        </app-progress-button>
    </div>
    <!-- <button mat-stroked-button class="btn-danger text-white right">REMOVE FROM PLAN</button> -->
    <mat-tab-group class="tabView" (selectedTabChange)="tabChanged($event)">

        <mat-tab class="f-14 f-500 roboto" label="Needs based">
            <div class="row bg-grey lter p-9 ba-light pl-0 pr-0 bb">
                <div class="col-md-6 f-14 f-500">Particulars</div>
                <div class="col-md-3 f-14 p-0 text-right f-500">Annual amount</div>
                <div class="col-md-2 f-14 p-0 f-500 text-right">Total amount</div>
                <div class="col-md-1 f-14"> </div>
            </div>
            <mat-accordion>
                <div class="br bl">
                    <mat-expansion-panel>
                        <mat-expansion-panel-header>
                            <mat-panel-title class="f-500 w-60">
                                1. Liabilities
                            </mat-panel-title>

                            <mat-panel-description>
                                -
                            </mat-panel-description>

                            <mat-panel-description>
                                12,00,000
                            </mat-panel-description>

                        </mat-expansion-panel-header>

                        <div class="row p-20">
                            <div class="col-md-10 pl-0 insurancePlanTable">
                                <table mat-table [dataSource]="dataSource" id="table-low" class=" ">

                                    <!--- Note that these columns can be defined in any order.
                                      The actual rendered columns are set as a property on the row definition" -->

                                    <!-- Position Column -->
                                    <ng-container matColumnDef="position">
                                        <th mat-header-cell *matHeaderCellDef> </th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-checkbox> </mat-checkbox>
                                        </td>
                                    </ng-container>

                                    <!-- Name Column -->
                                    <ng-container matColumnDef="details">
                                        <th mat-header-cell *matHeaderCellDef> Policy details </th>
                                        <td mat-cell *matCellDef="let element"> {{element.details}} </td>
                                    </ng-container>

                                    <!-- Weight Column -->
                                    <ng-container matColumnDef="outstanding">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> Principal outstanding
                                        </th>
                                        <td class="text-right" mat-cell *matCellDef="let element">
                                            {{element.outstanding}}
                                        </td>
                                    </ng-container>

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>
                            </div>
                            <div class="col-md-2"></div>
                        </div>

                    </mat-expansion-panel>
                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                        <mat-expansion-panel-header>
                            <mat-panel-title class="f-500 w-60">
                                2. Dependant's needs
                            </mat-panel-title>
                            <mat-panel-description>
                                -
                            </mat-panel-description>
                            <mat-panel-description>
                                2,77,39,000
                            </mat-panel-description>
                        </mat-expansion-panel-header>

                        <div class="row  p-9 pl-20 pr-0 bb">
                            <div class="col-md-1">2.1</div>
                            <div class="col-md-6 p-0">Life Insurance Premiums</div>
                            <div class="col-md-3 text-right">49,900</div>
                            <div class="col-md-2 text-center"> - </div>
                        </div>
                        <div class="row  p-9 pl-20 pr-0 bb">
                            <div class="col-md-1">2.2</div>
                            <div class="col-md-6 p-0"> Living expenses </div>
                            <div class="col-md-3 text-right"> 6,27,000 </div>
                            <div class="col-md-2 text-center"> - </div>
                        </div>

                        <div class="row p-20">
                            <div class="col-md-10 pl-0 insurancePlanTable">
                                <table mat-table [dataSource]="dataSource1" id="table-low" class=" ">

                                    <!--- Note that these columns can be defined in any order.
                                                  The actual rendered columns are set as a property on the row definition" -->

                                    <!-- Position Column -->


                                    <!-- Name Column -->
                                    <ng-container matColumnDef="details">
                                        <th mat-header-cell *matHeaderCellDef> Expense details </th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-checkbox> </mat-checkbox> {{element.details}}
                                        </td>
                                    </ng-container>

                                    <!-- Weight Column -->
                                    <ng-container matColumnDef="amount">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> Annual amount </th>
                                        <td class="text-right" mat-cell *matCellDef="let element"> {{element.amount}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="consider">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> % to consider </th>
                                        <td class="text-right" mat-cell *matCellDef="let element"> {{element.consider}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="edit">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> </th>
                                        <td class="text-right" mat-cell *matCellDef="let element">
                                            <img src="assets/images/svg/edit-insurance-plan.svg" class="c-p">
                                        </td>
                                    </ng-container>

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
                                </table>
                            </div>
                            <div class="col-md-2"></div>
                        </div>

                    </mat-expansion-panel>

                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                        <mat-expansion-panel-header>
                            <mat-panel-title class="f-500 w-60">
                                3. Goals to be met
                            </mat-panel-title>
                            <mat-panel-description>
                                -
                            </mat-panel-description>
                            <mat-panel-description>
                                37,00,000
                            </mat-panel-description>
                        </mat-expansion-panel-header>

                        <div class="row p-20">
                            <div class="col-md-10 pl-0 insurancePlanTable">
                                <table mat-table [dataSource]="dataSource2" id="table-low" class=" ">

                                    <!--- Note that these columns can be defined in any order.
                                              The actual rendered columns are set as a property on the row definition" -->

                                    <!-- Position Column -->


                                    <!-- Name Column -->
                                    <ng-container matColumnDef="details">
                                        <th mat-header-cell *matHeaderCellDef> Goal details </th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-checkbox> </mat-checkbox> {{element.details}}
                                        </td>
                                    </ng-container>

                                    <!-- Weight Column -->
                                    <ng-container matColumnDef="amount">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> Goal amount(PV) </th>
                                        <td class="text-right" mat-cell *matCellDef="let element"> {{element.amount}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="consider">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> % to consider </th>
                                        <td class="text-right" mat-cell *matCellDef="let element"> {{element.consider}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="edit">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> </th>
                                        <td class="text-right" mat-cell *matCellDef="let element">
                                            <img src="assets/images/svg/edit-insurance-plan.svg" class="c-p">
                                        </td>
                                    </ng-container>

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                                </table>

                            </div>
                            <div class="col-md-2"></div>
                        </div>

                    </mat-expansion-panel>

                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                        <mat-expansion-panel-header>
                            <mat-panel-title class="f-500 w-60">
                                4. Gross life insurance required(1+2+3)
                            </mat-panel-title>
                            <mat-panel-description>
                                -
                            </mat-panel-description>
                            <mat-panel-description>
                                2,76,39,000
                            </mat-panel-description>
                        </mat-expansion-panel-header>
                    </mat-expansion-panel>

                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                        <mat-expansion-panel-header>
                            <mat-panel-title class="f-500 w-60">
                                5 Less : Continuous income source
                            </mat-panel-title>
                            <mat-panel-description>
                                -
                            </mat-panel-description>
                            <mat-panel-description>
                                77,00,000
                            </mat-panel-description>
                        </mat-expansion-panel-header>

                        <div class="row p-20">
                            <div class="col-md-10 pl-0 insurancePlanTable">
                                <table mat-table [dataSource]="dataSource2" id="table-low" class=" ">

                                    <!--- Note that these columns can be defined in any order.
                                                  The actual rendered columns are set as a property on the row definition" -->

                                    <!-- Position Column -->


                                    <!-- Name Column -->
                                    <ng-container matColumnDef="details">
                                        <th mat-header-cell *matHeaderCellDef> Income details </th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-checkbox> </mat-checkbox> {{element.details}}
                                        </td>
                                    </ng-container>

                                    <!-- Weight Column -->
                                    <ng-container matColumnDef="amount">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> Annual income </th>
                                        <td class="text-right" mat-cell *matCellDef="let element"> {{element.amount}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="consider">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> % to consider </th>
                                        <td class="text-right" mat-cell *matCellDef="let element"> {{element.consider}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="edit">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> </th>
                                        <td class="text-right" mat-cell *matCellDef="let element">
                                            <img src="assets/images/svg/edit-insurance-plan.svg" class="c-p">
                                        </td>
                                    </ng-container>

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                                </table>

                            </div>
                            <div class="col-md-2"></div>
                        </div>

                    </mat-expansion-panel>

                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                        <mat-expansion-panel-header>
                            <mat-panel-title class="f-500 w-60">
                                6 Less: Exisiting life Insurance (sum assured)
                            </mat-panel-title>
                            <mat-panel-description>
                                -
                            </mat-panel-description>
                            <mat-panel-description>
                                50,00,000
                            </mat-panel-description>
                        </mat-expansion-panel-header>
                    </mat-expansion-panel>

                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                        <mat-expansion-panel-header>
                            <mat-panel-title class="f-500 w-60">
                                7 Less : Existing Assets
                            </mat-panel-title>
                            <mat-panel-description>
                                -
                            </mat-panel-description>
                            <mat-panel-description>
                                85,00,000
                            </mat-panel-description>
                        </mat-expansion-panel-header>

                        <div class="row p-20">
                            <div class="col-md-10 pl-0 insurancePlanTable">
                                <table mat-table [dataSource]="dataSource2" id="table-low" class=" ">

                                    <!--- Note that these columns can be defined in any order.
                                                      The actual rendered columns are set as a property on the row definition" -->

                                    <!-- Position Column -->


                                    <!-- Name Column -->
                                    <ng-container matColumnDef="details">
                                        <th mat-header-cell *matHeaderCellDef> Asset details </th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-checkbox> </mat-checkbox> {{element.details}}
                                        </td>
                                    </ng-container>

                                    <!-- Weight Column -->
                                    <ng-container matColumnDef="amount">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> Total amount </th>
                                        <td class="text-right" mat-cell *matCellDef="let element"> {{element.amount}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="consider">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> % to consider </th>
                                        <td class="text-right" mat-cell *matCellDef="let element"> {{element.consider}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="edit">
                                        <th class="text-right" mat-header-cell *matHeaderCellDef> </th>
                                        <td class="text-right" mat-cell *matCellDef="let element">
                                            <img src="assets/images/svg/edit-insurance-plan.svg" class="c-p">
                                        </td>
                                    </ng-container>

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                                </table>

                            </div>
                            <div class="col-md-2"></div>
                        </div>

                    </mat-expansion-panel>


                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                        <mat-expansion-panel-header>
                            <mat-panel-title class="f-500 w-60">
                                8. Additional life insurance required (4-5-6-7)
                            </mat-panel-title>
                            <mat-panel-description>
                                -
                            </mat-panel-description>
                            <mat-panel-description>
                                70,00,000
                            </mat-panel-description>
                        </mat-expansion-panel-header>
                    </mat-expansion-panel>
                </div>
            </mat-accordion>

            <div class="row pt-20">
                <div class="col-md-11 p-0">
                    Planner notes
                </div>
                <div class="col-md-1 text-right">
                    <mat-icon _ngcontent-jrn-c337="" aria-hidden="true" role="img"
                        class="mat-icon notranslate material-icons mat-icon-no-color">more_vert</mat-icon>
                </div>
                <div class="col-md-12 p-0">
                    <p class="f-14 p-12 ba-light"> With increasing medical costs you are strongly advised to increase
                        your sum assured. We suggest an additional sum assured of Rs.7,00,000. We have compared and
                        suggested two of the best policies currently available in the market. We
                        have done a comprehensive feature anlaysis of the same and presented a detailed feature analysis
                        for your review.</p>
                </div>
            </div>



        </mat-tab>

        <mat-tab class="f-14 f-500 roboto" label="Manual">
            <div [formGroup]="manualForm">
                <div class="row">
                    <div class="col-md-4">
                        <h5 class="m-0">Suggest insurance amount</h5>
                        <div class="form-group mb-0">
                            <mat-form-field>
                                <input matInput class="form-control br-0 rupess" formControlName="insuranceAmount">
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <div class="row pt-20">
                    <div class="col-md-11 p-0">
                        Planner notes
                    </div>
                    <div class="col-md-1 text-right">
                        <mat-icon _ngcontent-jrn-c337="" aria-hidden="true" role="img"
                            class="mat-icon notranslate material-icons mat-icon-no-color">more_vert</mat-icon>
                    </div>
                    <div class="col-md-12 p-0">
                        <mat-form-field>
                            <input matInput class="form-control br-0" formControlName="plannerNote">
                        </mat-form-field>
                    </div>
                </div>
            </div>
        </mat-tab>

    </mat-tab-group>
</div>

<div class="bottom-fixed wrapper-12 pt-16">
    <div class="row">
      <div class="col-md-4">
        <h5 class="mb-0 pt-8 text-white c-p" (click)="close(false)">Cancel</h5>
      </div>
      <div class="col-md-8 right text-right">
        <app-progress-button [options]="barButtonOptions3" (btnClick)="saveAnalysis()" >
        </app-progress-button>
      </div>
    </div>
  </div>