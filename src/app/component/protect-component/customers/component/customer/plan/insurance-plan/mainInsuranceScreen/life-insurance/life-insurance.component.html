<div class="row pb-12 insuFixedHeader pt-28 bb-grey" [ngClass]="{'hide': finPlanObj?.hideForFinPlan}">
    <div class="col-md-4 p-0 skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoadingPlan">
        <h3 class="m-0" *ngIf="!isLoadingPlan">{{getData ? getData.heading : ''}} -
            {{inputData ? (inputData.owners.length > 1 ?  (inputData.owners.length +' members') : inputData.owners[0].holderName) : ''}}
        </h3>
        <div class="relClass  m-0" [hidden]="!isLoadingPlan">
            <div class="bar" [ngClass]="{'height24': isLoadingPlan}">

            </div>
        </div>
    </div>
    <div class="col-md-6 text-right p-0">
        <mat-spinner [diameter]="30" *ngIf="fragmentData.isSpinner"></mat-spinner>
    </div>
    <div class="col-md-2 pr-0 right text-right c-p" *ngIf="!isLoadingPlan">
        <img (click)="generatePdf()" class="" matTooltip="Download PDF" src="assets/images/svg/download-pdf-blue.svg"
            class="pr-16 h-24">
        <img (click)="deleteInsurance()" src="/assets/images/svg/insurance-delect-icon.svg">
    </div>
</div>

<div class="mt-70" [ngClass]="{'hide': finPlanObj?.hideForFinPlan}">
    <div class="row">
        <div class="col-width-69 skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoadingPlan">
            <div class="row pt-28">
                <div class="col-md-3 p-0">
                    <p class="f-12 m-0 text-primitive">ACTUAL</p>
                    <div class="relClass">
                        <div class="bar" [ngClass]="{'height24': isLoadingPlan}">
                            <h3 class="m-0  ">
                                <span [hidden]="isLoadingPlan">&#8377;</span>
                                <span appFormatNumber [value]="insuranceDetails?.actual"></span>
                            </h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 p-0">
                    <p class="f-12 m-0 text-primitive">ADVICE</p>
                    <div class="relClass">
                        <div class="bar" [ngClass]="{'height24': isLoadingPlan}">
                            <h3 class="m-0" *ngIf="!isLoadingPlan && inputData?.insuranceType == 1">
                                <span [hidden]="isLoadingPlan">&#8377;</span><span appFormatNumber
                                    [value]="insuranceDetails?.advice ? insuranceDetails?.advice : plannerObj.additionalLifeIns ? plannerObj.additionalLifeIns : 0"></span>
                            </h3>
                            <h3 class="m-0" *ngIf="!isLoadingPlan && inputData?.insuranceType != 1">
                                <span [hidden]="isLoadingPlan">&#8377;</span><span appFormatNumber
                                    [value]="insuranceDetails?.advice"></span>
                            </h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <p class="f-12 m-0">STATUS</p>
                    <mat-progress-bar mode="determinate" [value]="insuranceDetails ? insuranceDetails?.graph : '0'"
                        class="h-30 bg-primary ">
                    </mat-progress-bar>
                    <div class="life-progress">
                        <span class="pl-8">
                            {{insuranceDetails.graph ? insuranceDetails.graph : '0'}} %
                        </span>
                    </div>
                </div>
            </div>

            <div class="row pt-20">
                <div class="col-md-12 p-0">
                    <h5 class="roboto f-500">Planner notes</h5>
                    <div class="ba-light p-8" *ngIf="!isLoadingPlan">
                        <p class="m-0 f-14 l-18">
                            {{(insuranceDetails)? insuranceDetails?.needAnalysis?.plannerNotes:'-'}}
                        </p>
                    </div>
                    <div *ngIf="isLoadingPlan">
                        <div class="relClass  p-8">
                            <div class="bar" [ngClass]="{'height24': isLoadingPlan}">

                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row pt-32">
                <div class="col-md-12 p-0 insuranceTable">

                    <h5 class="roboto f-500">Suggested policies</h5>
                    <table *ngIf="dataSouce3?.length > 0" mat-table [dataSource]="dataSouce3" multiTemplateDataRows
                        class="mat-elevation-z8" id="table-low" appSkeletonLoading [appSkeletonLoading]="isLoadingPlan"
                        class="mt-8 skeletonAnimation c-p">

                        <ng-container matColumnDef="name">
                            <th mat-header-cell class="w-25" *matHeaderCellDef> Policy name </th>
                            <td mat-cell *matCellDef="let element" (click)="isClick = false;expandedElement=null">
                                <div class="bar">
                                    {{element?.insurance?.policyName ? element?.insurance?.policyName : element?.insurance?.insurerName}}
                                </div>
                            </td>
                        </ng-container>

                        <!-- Name Column -->
                        <ng-container matColumnDef="sum">
                            <th mat-header-cell class="textRight text-right" *matHeaderCellDef> Sum assured </th>
                            <td mat-cell *matCellDef="let element" class="text-right  amt"
                                (click)="isClick = false;expandedElement=null">
                                <div class="bar">{{!isLoadingPlan || element.displayHolderSumInsured ? "₹" : ""}}<span
                                        appFormatNumber>
                                        {{element.displayHolderSumInsured}} </span></div>
                            </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="premium">
                            <th mat-header-cell class="textRight text-right" *matHeaderCellDef> Annual premium </th>
                            <td mat-cell class="text-right amt" *matCellDef="let element"
                                (click)="isClick = false;expandedElement=null">
                                <div class="bar">{{!isLoadingPlan || element?.insurance?.premiumAmount ? "₹" : ""}}<span
                                        appFormatNumber>
                                        {{element?.insurance?.premiumAmount}} </span></div>
                            </td>
                        </ng-container>


                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef> Status</th>
                            <td mat-cell *matCellDef="let element" (click)="isClick = false;expandedElement=null">
                                <div class="bar d-flex align-items-center justify-content-between">
                                    <span
                                        *ngIf="!isLoadingPlan">{{element?.insurance?.isRecommend ? 'Recommended' : '-'}}
                                    </span>
                                    <span class="material-icons" *ngIf="!isLoadingPlan && element.expanded">
                                        keyboard_arrow_up
                                    </span>
                                    <span class="material-icons" *ngIf="!isLoadingPlan && !element.expanded">
                                        keyboard_arrow_down
                                    </span>
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="icons">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element">
                                <button mat-icon-button [matMenuTriggerFor]="menu"
                                    (click)="isClick = true;expandedElement=null" *ngIf="!isLoadingPlan"
                                    class="suggested-policies-icons">
                                    <mat-icon class="lh-16">more_vert</mat-icon>
                                </button>
                                <mat-menu #menu="matMenu">
                                    <button mat-menu-item
                                        (click)="inputData?.insuranceType == 1 ? suggestPolicy(element) : suggestPolicyGi(inputData,element.insurance)">Edit</button>
                                    <button mat-menu-item
                                        (click)="deleteModal('INSURANCE',element.insurance)">Delete</button>
                                </mat-menu>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="expandedDetail">
                            <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns3.length"
                                [hidden]="!element.expanded">
                                <div class="example-element-detail" *ngIf="clicked"
                                    [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                                    <div class="example-element-description">
                                        {{element?.insurance?.suggestion ? element?.insurance?.suggestion : 'No suggestions found'}}
                                    </div>
                                </div>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
                        <tr mat-row *matRowDef="let element; columns: displayedColumns3" class="example-element-row"
                            [class.example-expanded-row]="expandedElement === element"
                            (click)="expandedElement = expandedElement === element  ? null : element;changeValue(dataSouce3,element)">
                        </tr>
                        <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
                    </table>
                    <div *ngIf="!isLoadingPlan && dataSouce3?.length == 0"
                        class="d-flex flex-column align-items-center">
                        <!-- <img class="width300" src="assets/images/svg/noDataFound.svg"> -->
                        <h4 class="text-center pt-12">No data found</h4>
                    </div>
                </div>
            </div>


            <div class="row pt-32">
                <div class="col-md-12 p-0 insuranceTable">

                    <h5 class="roboto f-500">Recommendations on current policies</h5>

                    <table mat-table *ngIf="dataSource1?.length > 0" [dataSource]="dataSource1" appSkeletonLoading
                        [appSkeletonLoading]="isLoadingPlan" class="mt-8 skeletonAnimation" id="table-low">
                        <ng-container matColumnDef="name">
                            <th mat-header-cell class="w-25" *matHeaderCellDef> Policy name </th>
                            <td mat-cell *matCellDef="let element" class="w-25">
                                <div class="bar">
                                    {{element?.insurance?.policyName ? element?.insurance?.policyName : element?.insurance?.insurerName}}
                                </div>

                            </td>
                        </ng-container>

                        <!-- Name Column -->
                        <ng-container matColumnDef="sum">
                            <th mat-header-cell class="w-20 text-right" *matHeaderCellDef> Sum assured </th>
                            <td mat-cell *matCellDef="let element" class="text-right w-20 amt">
                                <div class="bar">
                                    {{!isLoadingPlan || element?.insurance?.sumAssured || element?.insurance?.sumInsuredIdv? "₹" : ""}}<span
                                        appFormatNumber>
                                        {{element?.insurance?.sumAssured ? element?.insurance?.sumAssured : element?.insurance?.sumInsuredIdv }}
                                    </span></div>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="premium">
                            <th mat-header-cell class="textRight text-right" *matHeaderCellDef> Annual premium </th>
                            <td mat-cell class="text-right amt" *matCellDef="let element">
                                <div class="bar">{{!isLoadingPlan || element?.insurance?.premiumAmount ? "₹" : ""}}<span
                                        appFormatNumber>
                                        {{element?.insurance?.premiumAmount}} </span></div>
                            </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="returns">
                            <th mat-header-cell class="textRight text-right" *matHeaderCellDef> Returns </th>
                            <td mat-cell class="text-right amt" *matCellDef="let element">
                                <div class="bar">
                                    {{isLoadingPlan ? '' : (element.returnRate ? element.returnRate : 0)}}{{!isLoadingPlan ? '%' : ''}}
                                </div>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="advice">
                            <th mat-header-cell *matHeaderCellDef> Advice </th>
                            <td mat-cell *matCellDef="let element">
                                <div class="bar">{{isLoadingPlan ? '' : (element.advice ? element.advice : '-')}} </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="icons">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element" [matMenuTriggerFor]="menu4">
                                <div class="bar">
                                    <img *ngIf="!isLoadingPlan" src="/assets/images/svg/dot-menu.svg">
                                    <mat-menu #menu4="matMenu">
                                        <button mat-menu-item 
                                        (click)="inputData?.insuranceType == 1 ? openDialog(element,null) : needAnalysis(null)">Edit</button>
                                        <button mat-menu-item
                                            (click)="deleteModalRecommendations('INSURANCE',element.insurance)">Delete</button>
                                    </mat-menu>
                                </div>
                            </td>
                        </ng-container>
                        <!-- <ng-container matColumnDef="icon">
                            <th mat-header-cell class="" *matHeaderCellDef> </th>
                            <td mat-cell class="c-p" *matCellDef="let element" [matMenuTriggerFor]="menu4">
                                <div class="bar">
                                    <img *ngIf="!isLoadingPlan" src="/assets/images/svg/dot-menu.svg">
                                    <mat-menu #menu4="matMenu">
                                        <button mat-menu-item (click)="recommend(element)">
                                            Recommend
                                        </button>
                                    </mat-menu>
                                </div>

                            </td>
                        </ng-container> -->

                        <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
                    </table>
                    <div class=" text-center" *ngIf="!isLoadingPlan && dataSource1?.length == 0">
                        <span class="align-items-center">No data found</span>
                    </div>
                </div>
            </div>
            <div class="row pt-32" *ngIf="inputData?.insuranceType == 1">
                <div class="col-md-12 p-0 insuranceTable">
                    <h5 class="roboto f-500">Need based analysis</h5>
                    <div class="row bg-grey lter p-9 ba-light pl-0 pr-0 bb" *ngIf="needAnalysisLoaded">
                        <div class="col-md-6 f-14 f-500">Particulars</div>
                        <div class="col-md-3 f-14 p-0 text-right f-500">Annual amount</div>
                        <div class="col-md-2 f-14 p-0 f-500 text-right">Total amount</div>
                        <div class="col-md-1 f-14"> </div>
                    </div>
                    <mat-accordion #firstAccordion="matAccordion" [multi]="true" id="life-insurance-accordion">
                        <div class="br bl" *ngIf="!isLoadingPlan && needAnalysisLoaded">
                            <mat-expansion-panel (click)="panelOpenState = true;libilities = true" [expanded]="false">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="f-500 w-60">
                                        1. Liabilities
                                    </mat-panel-title>

                                    <mat-panel-description class="w-20">
                                        -
                                    </mat-panel-description>

                                    <mat-panel-description class="w-20">
                                        {{plannerObj.liabilities ? '₹' : ''}} <span appFormatNumber
                                            [value]="plannerObj.liabilities ? plannerObj.liabilities : '-'"></span>
                                    </mat-panel-description>

                                </mat-expansion-panel-header>

                                <div class="row p-20" *ngIf="panelOpenState == true">
                                    <div class="col-md-12 pl-0 insurancePlanTable">
                                        <table mat-table *ngIf="dataSourceLiability?.length > 0"
                                            [dataSource]="dataSourceLiability" id="table-low" class=" ">

                                            <!--- Note that these columns can be defined in any order.
                                                          The actual rendered columns are set as a property on the row definition" -->

                                            <!-- Position Column -->
                                            <ng-container matColumnDef="details">
                                                <th mat-header-cell *matHeaderCellDef> Liability details</th>
                                                <td mat-cell *matCellDef="let element">
                                                    <mat-checkbox class="disableCursor" [checked]="element.selected"
                                                        #check (click)="$event.preventDefault()"> </mat-checkbox>
                                                    {{element.name}}
                                                </td>
                                            </ng-container>

                                            <!-- Weight Column -->
                                            <ng-container matColumnDef="outstanding">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> Principal
                                                    outstanding
                                                </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.total_loan_outstanding ? '₹' : ''}}<span>{{element.total_loan_outstanding ? formatNumber(element.total_loan_outstanding,0) :'-'}}</span>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="consider">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> % to consider
                                                </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.percent}}%
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="edit">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    <!-- <img src="assets/images/svg/edit-insurance-plan.svg" class="c-p"> -->
                                                </td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsNeedAnalysis"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsNeedAnalysis;">
                                            </tr>
                                        </table>
                                        <div *ngIf="dataSourceLiability?.length == 0"
                                            class="d-flex flex-column align-items-center">
                                            <!-- <img class="width300" src="assets/images/svg/noDataFound.svg"> -->
                                            <h4 class="text-center pt-12">No data found</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-2"></div>
                                </div>

                            </mat-expansion-panel>
                            <mat-expansion-panel (opened)="panelOpenState = true;dependant = true" [expanded]="false">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="f-500 w-60">
                                        2. Dependant's needs
                                    </mat-panel-title>
                                    <mat-panel-description class="w-20">
                                        -
                                    </mat-panel-description>
                                    <mat-panel-description class="w-20">
                                        {{plannerObj.dependantNeeds ? '₹' : ''}}<span appFormatNumber
                                            [value]="plannerObj.dependantNeeds ? plannerObj.dependantNeeds : '-'"></span>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>

                                <div class="row  p-9 pl-20 pr-0 bb" *ngIf="panelOpenState == true">
                                    <div class="col-md-1">2.1</div>
                                    <div class="col-md-6 p-0">Life Insurance Premiums</div>
                                    <div class="col-md-3 text-right">
                                        {{plannerObj.lifeInsurancePremiums ? '₹' : ''}}<span>{{plannerObj.lifeInsurancePremiums ? formatNumber(plannerObj.lifeInsurancePremiums,0) :'-'}}</span>
                                    </div>
                                    <div class="col-md-2 text-center"> - </div>
                                </div>
                                <div class="row  p-9 pl-20 pr-0 bb" *ngIf="panelOpenState == true">
                                    <div class="col-md-1">2.2</div>
                                    <div class="col-md-6 p-0"> Living expenses</div>
                                    <div class="col-md-3 text-right">
                                        {{plannerObj.livingExpense ? '₹' : ''}}<span>{{ plannerObj.livingExpense ? formatNumber(plannerObj.livingExpense,0) : '-'}}</span>
                                    </div>
                                    <div class="col-md-2 text-center"> - </div>
                                </div>

                                <div class="row p-20" *ngIf="panelOpenState == true">
                                    <div class="col-md-12 pl-0 insurancePlanTable">
                                        <table mat-table *ngIf="dataSourceLifeInsurance?.length > 0"
                                            [dataSource]="dataSourceLifeInsurance" id="table-low" class=" ">

                                            <!--- Note that these columns can be defined in any order.
                                                                      The actual rendered columns are set as a property on the row definition" -->

                                            <!-- Position Column -->


                                            <!-- Name Column -->
                                            <ng-container matColumnDef="details">
                                                <th mat-header-cell *matHeaderCellDef> Expense details </th>
                                                <td mat-cell *matCellDef="let element">
                                                    <mat-checkbox class="disableCursor" [checked]="element.selected"
                                                        #check (click)="$event.preventDefault()"> </mat-checkbox>
                                                    {{element.name}}
                                                </td>
                                            </ng-container>

                                            <!-- Weight Column -->
                                            <ng-container matColumnDef="outstanding">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> Annual amount
                                                </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.amount ? '₹' : ''}}<span></span>{{element.amount ? formatNumber(element.amount,0) : '-'}}
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="consider">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> % to consider
                                                </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.percent}}%
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="edit">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    <!-- <img src="assets/images/svg/edit-insurance-plan.svg" class="c-p"> -->
                                                </td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsNeedAnalysis"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsNeedAnalysis;">
                                            </tr>
                                        </table>
                                        <div *ngIf="dataSourceLifeInsurance?.length == 0"
                                            class="d-flex flex-column align-items-center">
                                            <!-- <img class="width300" src="assets/images/svg/noDataFound.svg"> -->
                                            <h4 class="text-center pt-12">No data found</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-2"></div>
                                </div>

                            </mat-expansion-panel>

                            <mat-expansion-panel (opened)="panelOpenState = true; goalsToBeMate = true"
                                [expanded]="false">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="f-500 w-60">
                                        3. Goals to be met
                                    </mat-panel-title>
                                    <mat-panel-description class="w-20">
                                        -
                                    </mat-panel-description>
                                    <mat-panel-description class="w-20">
                                        {{plannerObj.goalsMeet ? '₹' : ''}}<span appFormatNumber
                                            [value]="plannerObj.goalsMeet ? plannerObj.goalsMeet : '-'"></span>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>

                                <div class="row p-20" *ngIf="panelOpenState == true">
                                    <div class="col-md-12 pl-0 insurancePlanTable">
                                        <table mat-table *ngIf="dataSourceGoals?.length > 0"
                                            [dataSource]="dataSourceGoals" id="table-low" class=" ">

                                            <!--- Note that these columns can be defined in any order.
                                                                  The actual rendered columns are set as a property on the row definition" -->

                                            <!-- Position Column -->


                                            <!-- Name Column -->
                                            <ng-container matColumnDef="details">
                                                <th mat-header-cell *matHeaderCellDef> Goal details </th>
                                                <td mat-cell *matCellDef="let element">
                                                    <mat-checkbox class="disableCursor" [checked]="element.selected"
                                                        #check (click)="$event.preventDefault()"> </mat-checkbox>
                                                    {{element.goalName}}
                                                </td>
                                            </ng-container>

                                            <!-- Weight Column -->
                                            <ng-container matColumnDef="outstanding">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> Goal
                                                    amount(PV) </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.goalFV ? '₹' : ''}}
                                                    <span>{{element.goalFV ? formatNumber(element.goalFV,0) : '-'}}</span>
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="consider">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> % to consider
                                                </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.percent}}%
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="edit">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    <!-- <img src="assets/images/svg/edit-insurance-plan.svg" class="c-p"> -->
                                                </td>
                                            </ng-container>

                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsNeedAnalysis"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsNeedAnalysis;">
                                            </tr>
                                        </table>
                                        <div *ngIf="dataSourceGoals?.length == 0"
                                            class="d-flex flex-column align-items-center">
                                            <!-- <img class="width300" src="assets/images/svg/noDataFound.svg"> -->
                                            <h4 class="text-center pt-12">No data found</h4>
                                        </div>

                                    </div>
                                    <div class="col-md-2"></div>
                                </div>

                            </mat-expansion-panel>

                            <mat-expansion-panel hideToggle [ngClass]="isExpansionDisabled()">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="f-500 w-60">
                                        4. Gross life insurance required(1+2+3)
                                    </mat-panel-title>
                                    <mat-panel-description class="w-20">
                                        -
                                    </mat-panel-description>
                                    <mat-panel-description class="w-20">
                                        {{plannerObj.GrossLifeinsurance ? '₹' : ''}}<span appFormatNumber
                                            [value]="plannerObj.GrossLifeinsurance ? plannerObj.GrossLifeinsurance : '-'"></span>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                            </mat-expansion-panel>

                            <mat-expansion-panel (opened)="panelOpenState = true;continuous = true" [expanded]="false">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="f-500 w-60">
                                        5. Less : Continuous income source
                                    </mat-panel-title>
                                    <mat-panel-description class="w-20">
                                        -
                                    </mat-panel-description>
                                    <mat-panel-description class="w-20">
                                        {{plannerObj.incomeSource ? '₹' : ''}}<span appFormatNumber
                                            [value]="plannerObj.incomeSource ? plannerObj.incomeSource : '-'"></span>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>

                                <div class="row p-20" *ngIf="panelOpenState == true">
                                    <div class="col-md-12 pl-0 insurancePlanTable">
                                        <table mat-table *ngIf="dataSourceIncome?.length > 0"
                                            [dataSource]="dataSourceIncome" id="table-low" class=" ">

                                            <!--- Note that these columns can be defined in any order.
                                                                      The actual rendered columns are set as a property on the row definition" -->

                                            <!-- Position Column -->


                                            <!-- Name Column -->
                                            <ng-container matColumnDef="details">
                                                <th mat-header-cell *matHeaderCellDef> Income details </th>
                                                <td mat-cell *matCellDef="let element">
                                                    <mat-checkbox class="disableCursor" [checked]="element.selected"
                                                        #check (click)="$event.preventDefault()"> </mat-checkbox>
                                                    {{element.name}}
                                                </td>
                                            </ng-container>
                                            <!-- Weight Column -->
                                            <ng-container matColumnDef="outstanding">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> Annual income
                                                </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.amount ? '₹' : ''}}<span></span>{{element.amount ? formatNumber(element.amount,0) : '-'}}
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="consider">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> % to consider
                                                </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.percent}}%
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="edit">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    <!-- <img src="assets/images/svg/edit-insurance-plan.svg" class="c-p"> -->
                                                </td>
                                            </ng-container>

                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsNeedAnalysis"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsNeedAnalysis;">
                                            </tr>
                                        </table>
                                        <div *ngIf="dataSourceIncome?.length == 0"
                                            class="d-flex flex-column align-items-center">
                                            <!-- <img class="width300" src="assets/images/svg/noDataFound.svg"> -->
                                            <h4 class="text-center pt-12">No data found</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-2"></div>
                                </div>

                            </mat-expansion-panel>

                            <mat-expansion-panel hideToggle [ngClass]="isExpansionDisabled()">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="f-500 w-60">
                                        6. Less: Exisiting life Insurance (sum assured)
                                    </mat-panel-title>
                                    <mat-panel-description class="w-20">
                                        -
                                    </mat-panel-description>
                                    <mat-panel-description class="w-20">
                                        {{plannerObj.existingLifeInsurance ? '₹' : ''}}<span appFormatNumber
                                            [value]="plannerObj.existingLifeInsurance ? plannerObj.existingLifeInsurance : '-'"></span>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                            </mat-expansion-panel>

                            <mat-expansion-panel (opened)="panelOpenState = true; existingAsset = true"
                                [expanded]="false">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="f-500 w-60">
                                        7. Less : Existing Assets
                                    </mat-panel-title>
                                    <mat-panel-description class="w-20">
                                        -
                                    </mat-panel-description>
                                    <mat-panel-description class="w-20">
                                        {{plannerObj.existingAsset ? '₹' : ''}}<span appFormatNumber
                                            [value]="plannerObj.existingAsset ? plannerObj.existingAsset : '-'">
                                        </span>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>

                                <div class="row p-20" *ngIf="panelOpenState == true">
                                    <div class="col-md-12 pl-0 insurancePlanTable">
                                        <table mat-table *ngIf="dataSourceAsset?.length > 0"
                                            [dataSource]="dataSourceAsset" id="table-low" class=" ">

                                            <!--- Note that these columns can be defined in any order.
                                                                          The actual rendered columns are set as a property on the row definition" -->

                                            <!-- Position Column -->


                                            <!-- Name Column -->
                                            <ng-container matColumnDef="details">
                                                <th mat-header-cell *matHeaderCellDef> Asset details </th>
                                                <td mat-cell *matCellDef="let element">
                                                    <mat-checkbox class="disableCursor" [checked]="element.selected"
                                                        #check (click)="$event.preventDefault()"> </mat-checkbox>
                                                    {{element.ownerName}}
                                                </td>
                                            </ng-container>

                                            <!-- Weight Column -->
                                            <ng-container matColumnDef="outstanding">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> Total amount
                                                </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.currentValue ? '₹' : ''}}<span>{{element.currentValue ? formatNumber(element.currentValue,0) : '-'}}</span>
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="consider">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> % to consider
                                                </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    {{element.percent}}%
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="edit">
                                                <th class="text-right" mat-header-cell *matHeaderCellDef> </th>
                                                <td class="text-right" mat-cell *matCellDef="let element">
                                                    <!-- <img src="assets/images/svg/edit-insurance-plan.svg" class="c-p"> -->
                                                </td>
                                            </ng-container>

                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsNeedAnalysis"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsNeedAnalysis;">
                                            </tr>
                                        </table>
                                        <div *ngIf="dataSourceAsset?.length == 0"
                                            class="d-flex flex-column align-items-center">
                                            <!-- <img class="width300" src="assets/images/svg/noDataFound.svg"> -->
                                            <h4 class="text-center pt-12">No data found</h4>
                                        </div>
                                    </div>
                                    <div class="col-md-2"></div>
                                </div>

                            </mat-expansion-panel>


                            <mat-expansion-panel hideToggle [ngClass]="isExpansionDisabled()">
                                <mat-expansion-panel-header>
                                    <mat-panel-title class="f-500 w-60">
                                        8. Additional life insurance required (4-5-6-7)
                                    </mat-panel-title>
                                    <mat-panel-description class="w-20">
                                        -
                                    </mat-panel-description>
                                    <mat-panel-description class="w-20">
                                        {{plannerObj.additionalLifeIns ? '₹' : ''}}<span appFormatNumber
                                            [value]="plannerObj.additionalLifeIns ? plannerObj.additionalLifeIns : '-'"></span>
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                            </mat-expansion-panel>
                        </div>
                    </mat-accordion>
                    <div class="relClass d-flex mt-20 align-items-center" [hidden]="!isLoadingPlan">
                        <div class="w-100 p-0 text-primary br-2 recommendations bar">
                            <div class="bar36" [ngClass]="{'height36': isLoadingPlan}">
                            </div>
                        </div>

                    </div>
                    <div class=" text-center" *ngIf="!isLoadingPlan &&  !needAnalysisLoaded">
                        <span class="align-items-center">No data found</span>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-width-31">
            <div class="fix-sticky skeletonAnimation align-items-center text-center" appSkeletonLoading
                [appSkeletonLoading]="isLoadingPlan">
                <img src={{logo}} [hidden]="isLoadingPlan" class="mt-20 ">
                <div class="relClass" [hidden]="!isLoadingPlan">
                    <div class="bar289" [ngClass]="{'height289': isLoadingPlan}">

                    </div>
                </div>
                <div class="d-flex mt-20 align-items-center " *ngIf="!isLoadingPlan"
                    [ngClass]="{'justify-content-center': inputData?.insuranceType != 1,'justify-content-between': inputData?.insuranceType == 1}">
                    <button mat-stroked-button class="btn140 text-primary br-2" (click)="needAnalysis(null)">
                        <img src="/assets/images/svg/insuranceBtn-icon.svg"> Needs analysis
                    </button>

                    <button mat-stroked-button class="btn140 text-primary br-2"
                        *ngIf="!isLoadingPlan && inputData?.insuranceType == 1" (click)="suggestPolicy(null)">
                        <img src="/assets/images/svg/insuranceBtn-icon.svg"> Suggest policy
                    </button>
                </div>
                <div class="relClass d-flex mt-20 align-items-center justify-content-between" [hidden]="!isLoadingPlan">
                    <div class="bar36" [ngClass]="{'height36': isLoadingPlan}">
                    </div>

                    <div class="bar36" [ngClass]="{'height36': isLoadingPlan}">
                    </div>
                </div>
                <div class="d-flex align-items-center" *ngIf="!isLoadingPlan && inputData?.insuranceType == 1">
                    <button (click)="recommendationsPolicy(null)" mat-stroked-button
                        class="w-100 p-0 text-primary br-2 recommendations">
                        <img src="/assets/images/svg/insuranceBtn-icon.svg"> Recommendations on current policies
                    </button>
                </div>
                <div class="relClass d-flex mt-20 align-items-center" [hidden]="!isLoadingPlan">
                    <div class="w-100 p-0 text-primary br-2 recommendations bar">
                        <div class="bar36" [ngClass]="{'height36': isLoadingPlan}">
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- class="hide" *ngIf="mfData" -->
<div #insuranceTemp id="insuranceTemplate" meta charset="UTF-8" style="display: none;">
    <html>
    <meta charset="UTF-8">
    <table cellpadding="0" cellspacing="0" border="0"
        style="width: 900px; font-family: 'Roboto', sans-serif; margin: 0px auto;"
        align="center; page-break-before: always;">
        <tr>
            <td>
                <table style="width: 100%; border: 0px; padding-bottom: 10px; border-bottom: 1px solid #dee5e7;">
                    <tr>
                        <td>
                            <h3 style="margin: 0px; font-size: 18px;">
                                {{clientData?.displayName}}'s Insurance Plan
                            </h3>
                        </td>
                        <td style="text-align: right;">
                            <p style="margin: 0px 0px 5px 0px; font-size: 16px;">
                                Prepared by
                            </p>
                            <h3 style="margin: 0px; font-size: 18px;">
                                {{getOrgData?.companyName ? getOrgData?.companyName : '-'}}
                            </h3>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <tr>
            <td>
                <table
                    style="width: 100%; border: 0px; padding-top: 10px; padding-bottom: 10px; border-bottom: 1px solid #dee5e7;">

                    <tr>
                        <td>
                            <h3 style="margin: 0px; font-size: 18px;">
                                {{getData ? getData.heading : ''}} -
                                {{inputData ? (inputData.owners.length > 1 ?  (inputData.owners.length +' members') : inputData.owners[0].holderName) : ''}}
                            </h3>
                        </td>
                    </tr>

                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table style="border: 0px; margin-top: 20px; width: 85%;margin-left: 0px;margin-right: 80px;">
                    <tr>
                        <td style="width: 30%;">
                            <img style="width: 100%;height: 200px;" src="{{logo}}">
                        </td>

                        <td style="vertical-align: top; padding-left: 15px; width: 70%;padding-top: 30px;">
                            <table
                                style="border: 0px; width: 100%; border-bottom: 1px solid #dee5e7; padding-bottom: 15px;">
                                <tr>
                                    <td>
                                        <p style="color: #83959D; margin: 0px 0px 5px 0px; font-size: 16px;">
                                            ACTUAL </p>
                                        <h5 style="font-size: 18px; margin: 0px;">
                                            Rs. <span appFormatNumber [value]="insuranceDetails?.actual"></span>
                                        </h5>
                                    </td>


                                    <td>
                                        <p style="color: #83959D; margin: 0px 0px 5px 0px; font-size: 16px;">
                                            ADVICE </p>
                                        <h5 style="font-size: 18px; margin: 0px;"
                                            *ngIf="!isLoadingPlan && inputData?.insuranceType == 1">
                                            <span [hidden]="isLoadingPlan">&#8377;</span><span appFormatNumber
                                                [value]="insuranceDetails?.advice ? insuranceDetails?.advice : plannerObj.additionalLifeIns ? plannerObj.additionalLifeIns : 0"></span>
                                        </h5>
                                        <h5 style="font-size: 18px; margin: 0px;"
                                            *ngIf="!isLoadingPlan && inputData?.insuranceType != 1">
                                            <span [hidden]="isLoadingPlan">&#8377;</span><span appFormatNumber
                                                [value]="insuranceDetails?.advice"></span>
                                        </h5>
                                    </td>
                                </tr>
                            </table>
                            <table style="margin: 20px 0px 20px 0px; width: 100%; ">
                                <tr>
                                    <td>
                                        <div style="background: #f5f7f7; height: 35px;">
                                            <div style="line-height: 35px; font-size: 16px; background:#007bff; display: inline-block; color: #ffffff; height: 35px;"
                                                [ngStyle]="{'width':insuranceDetails && insuranceDetails.graph > 100 ? 100 : insuranceDetails.graph +'%' }">
                                                <span style="padding-left: 10px;">
                                                    {{insuranceDetails.graph ? insuranceDetails.graph : '0'}} %
                                                </span>
                                            </div>
                                        </div>

                                    </td>
                                </tr>
                            </table>
                            <table cellpadding="0" cellspacing="0"
                                style="margin: 10px 0px 0px 0px; font-size: 16px; border: 1px solid #dee5e7;  width: 100%; border: 1px solid #dee5e7; width: 100%;">
                                <tr style="background: #F5F7F7;">
                                    <td style="border-bottom: 1px solid #dee5e7;padding: 14px;   text-align: lefts;">
                                        Planner notes
                                    </td>
                                    <td style="padding: 14px; border-bottom: 1px solid #dee5e7; text-align: right;">
                                        {{(insuranceDetails)? insuranceDetails?.needAnalysis?.plannerNotes:'-'}}
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>


            </td>
        </tr>
        <tr>
            <td colspan="5" style="padding: 10px;"></td>
        </tr>
        <tr *ngIf="dataSouce3.length > 0">
            <td>
                <table cellpadding="0" cellspacing="0" style="margin-top: 40px; width: 100%;">
                    <tr>
                        <td>
                            <p style=" font-size: 18px; font-weight: 600;margin-bottom: 10px;">Suggested policies</p>

                            <table cellpadding="0" cellspacing="0"
                                style="width: 100%; font-size: 16px; border: 1px solid #dee5e7;border-top: 0px;">
                                <tr>
                                    <td style="padding: 8px;background: #f5f7f7; border-top: 1px solid #dee5e7;">
                                        Policy name</td>
                                    <td
                                        style="padding: 8px;background: #f5f7f7;border-left: 1px solid #dee5e7;width: 20%; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;text-align: right;">
                                        Sum assured</td>
                                    <td
                                        style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                        Annual premium</td>
                                    <td
                                        style="padding: 8px;background: #f5f7f7;width: 25%; text-align: left; border-left: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                        Status</td>
                                </tr>

                                <tr *ngFor="let element of dataSouce3">
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;">
                                        {{element?.insurance?.policyName ? element?.insurance?.policyName : element?.insurance?.insurerName}}
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;text-align: right;">
                                        <span appFormatNumber>
                                            {{element.displayHolderSumInsured}} </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;">
                                        <span appFormatNumber>
                                            {{element?.insurance?.premiumAmount}} </span>
                                    </td>
                                    <td style="padding: 8px; text-align: left; border-top: 1px solid #dee5e7;">
                                        <span
                                            *ngIf="!isLoadingPlan">{{element?.insurance?.suggestion ? 'Recommended' : '-'}}
                                        </span>
                                    </td>
                                </tr>
                                <!-- <tr *ngIf="dataSouce3.length == 0">
                                        No data found
                                    </tr> -->
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table cellpadding="0" cellspacing="0" style="margin-top: 40px; width: 100%;">
                    <tr>
                        <td>
                            <p style=" font-size: 18px; font-weight: 600;margin-bottom: 10px;">Recommendations on
                                current policies</p>

                            <table cellpadding="0" cellspacing="0"
                                style="width: 100%; font-size: 16px; border: 1px solid #dee5e7;border-top: 0px;">
                                <tr>
                                    <td
                                        style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                        Policy name</td>
                                    <td style="padding: 8px;background: #f5f7f7;border-top: 1px solid #dee5e7;">
                                        Sum assured</td>
                                    <td
                                        style="padding: 8px;background: #f5f7f7; text-align: right;border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-left: 1px solid #dee5e7;width: 20%;">
                                        Annual premium</td>
                                    <!-- <td
                                        style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;">
                                        Returns</td> -->
                                    <td
                                        style="padding: 8px;background: #f5f7f7; text-align: left;width: 30%; border-left: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                        Advice</td>
                                </tr>

                                <tr *ngFor="let element of dataSource1">
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;">
                                        {{element?.insurance?.policyName ? element?.insurance?.policyName : element?.insurance?.insurerName}}
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;">
                                        <span appFormatNumber>
                                            {{element?.insurance?.sumAssured ? element?.insurance?.sumAssured : element?.insurance?.sumInsuredIdv }}
                                        </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;">
                                        <span appFormatNumber>
                                            {{element?.insurance?.premiumAmount}} </span>
                                    </td>
                                    <!-- <td
                                        style="padding: 8px; text-align: right; border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;">
                                        {{isLoadingPlan ? '' : (element ? element.returnRate : 0)}}{{!isLoadingPlan ? '%' : ''}}

                                    </td> -->
                                    <td
                                        style="padding: 8px; text-align: left; border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;">
                                        {{isLoadingPlan ? '' : (element.advice ? element.advice : '-')}}
                                    </td>
                                </tr>
                                <tr *ngIf="dataSource1.length == 0" style="text-align: center;">
                                    <td style="text-align: center;padding-top: 15px;padding-bottom:15px;border-top: 1px solid #dee5e7;"
                                        colspan="5">
                                        No data found
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr *ngIf="inputData?.insuranceType == 1 && !isLoadingPlan && needAnalysisLoaded">
            <td>
                <table cellpadding="0" cellspacing="0" style="margin-top: 40px; width: 100%;">
                    <tr>
                        <td>
                            <p style=" font-size: 18px; font-weight: 600;margin-bottom: 10px;">Need based analysis</p>

                            <table cellpadding="0" cellspacing="0"
                                style="width: 100%; font-size: 16px; border: 1px solid #dee5e7;border-top: 0px;">
                                <tr>
                                    <td
                                        style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-left: 0px;border-top: 1px solid #dee5e7;">
                                        Particulars</td>
                                    <td
                                        style="padding: 8px;background: #f5f7f7; text-align: right;border-top: 1px solid #dee5e7;">
                                        Annual amount
                                    </td>
                                    <td
                                        style="padding: 8px;background: #f5f7f7; text-align: right;border-left: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                        Total amount
                                    </td>
                                </tr>

                                <tr>
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 0px;">
                                        <b>1. Liabilities</b>
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;text-align: right;">
                                        <span appFormatNumber>
                                            -
                                        </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-right: 0px;">
                                        <span appFormatNumber
                                            [value]="plannerObj.liabilities ? plannerObj.liabilities : '-'"></span>
                                    </td>

                                </tr>
                                <tr>
                                    <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                        <table *ngIf="libilities == true" cellpadding="0" cellspacing="0"
                                            style="width: 90%; margin: 15px auto;">
                                            <tr>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-left:  1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Liability details</td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Principal outstanding
                                                </td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    % to consider
                                                </td>
                                            </tr>
                                            <tr *ngFor="let element of dataSourceLiability">
                                                <td
                                                    style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    {{element.name}}
                                                </td>
                                                <td
                                                    style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    ₹
                                                    <span>{{element.total_loan_outstanding ? formatNumber(element.total_loan_outstanding,0) :'-'}}</span>
                                                </td>
                                                <td
                                                    style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    {{element.percent}}%
                                                </td>

                                            </tr>
                                            <tr *ngIf="dataSourceLiability.length ==0">
                                                <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                                    <h4 style="padding-top: 12px; text-align: center;">No data found
                                                    </h4>
                                                </td>
                                            </tr>
                                        </table>

                                    </td>
                                </tr>

                                <tr>
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 0px;">
                                        <b>2. Dependant's needs</b>
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;text-align: right;">
                                        <span appFormatNumber>
                                            -
                                        </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-right: 0px;">
                                        <span appFormatNumber
                                            [value]="plannerObj.dependantNeeds ? plannerObj.dependantNeeds : '-'"></span>
                                    </td>

                                </tr>
                                <tr>
                                    <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                        <table *ngIf="dependant ==  true" cellpadding="0" cellspacing="0"
                                            style="width: 90%; margin: 15px auto;">
                                            <tr>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-left:  1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Expense details</td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Annual amount
                                                </td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    % to consider
                                                </td>
                                            </tr>
                                            <tr *ngFor="let element of dataSourceLifeInsurance">
                                                <td
                                                    style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    {{element.expenses}}
                                                </td>
                                                <td
                                                    style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    ₹{{element.amount ? formatNumber(element.amount,0) : '-'}}
                                                </td>
                                                <td
                                                    style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    <span appFormatNumber>
                                                        {{element.percent}}%</span>
                                                </td>

                                            </tr>
                                        </table>
                                    </td>
                                </tr>

                                <tr>
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 0px;">
                                        <b>3. Goals to be met</b>
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;text-align: right;">
                                        <span appFormatNumber>
                                            -
                                        </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-right: 0px;">
                                        <span appFormatNumber
                                            [value]="plannerObj.goalsMeet ? plannerObj.goalsMeet : '-'"></span>
                                    </td>

                                </tr>
                                <table *ngIf="goalsToBeMate == true" cellpadding="0" cellspacing="0"
                                    style="width: 90%; margin: 15px auto;">
                                    <tr>
                                        <td
                                            style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-left:  1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                            Goal details</td>
                                        <td
                                            style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                            Goal amount(PV)
                                        </td>
                                        <td
                                            style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                            % to consider
                                        </td>
                                    </tr>
                                    <tr *ngFor="let element of dataSourceGoals">
                                        <td
                                            style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                            {{element.name}}
                                        </td>
                                        <td
                                            style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                            ₹ <span>{{element.goalFV ? formatNumber(element.goalFV,0) : '-'}}</span>
                                        </td>
                                        <td
                                            style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                            <span appFormatNumber>
                                                {{element.percent}}%</span>
                                        </td>

                                    </tr>
                                    <tr *ngIf="dataSourceGoals.length ==0">
                                        <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                            <h4 style="padding-top: 12px; text-align: center;">No data found</h4>
                                        </td>
                                    </tr>
                                </table>
                                <tr>
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 0px;">
                                        <b>4. Gross life insurance required(1+2+3)</b>
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;text-align: right;">
                                        <span appFormatNumber>
                                            -
                                        </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-right: 0px;">
                                        <span appFormatNumber
                                            [value]="plannerObj.GrossLifeinsurance ? plannerObj.GrossLifeinsurance : '-'"></span>
                                    </td>

                                </tr>
                                <table *ngIf="noOpened == true" cellpadding="0" cellspacing="0"
                                    style="width: 90%; margin: 15px auto;">
                                    <tr>
                                        <td
                                            style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-left:  1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                            Income details</td>
                                        <td
                                            style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                            Income amount
                                        </td>
                                        <td
                                            style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                            % to consider
                                        </td>
                                    </tr>
                                    <tr *ngFor="let element of dataSourceIncome">
                                        <td
                                            style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                            {{element.name}}
                                        </td>
                                        <td
                                            style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                            <span appFormatNumber>
                                                ₹{{element.amount ? formatNumber(element.amount,0) : '-'}} </span>
                                        </td>
                                        <td
                                            style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                            <span appFormatNumber>
                                                {{element.percent}}%</span>
                                        </td>
                                    </tr>
                                    <tr *ngIf="dataSourceIncome.length ==0">
                                        <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                            <h4 class="text-center pt-12">No data found</h4>
                                        </td>
                                    </tr>
                                </table>
                                <tr>
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 0px;">
                                        <b>5. Less: Continuous income source</b>
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;text-align: right;">
                                        <span appFormatNumber>
                                            -
                                        </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-right: 0px;">
                                        <span appFormatNumber
                                            [value]="plannerObj.incomeSource ? plannerObj.incomeSource : '-'"></span>
                                    </td>

                                </tr>
                                <tr>
                                    <td colspan="3">
                                        <table *ngIf="continuous == true" cellpadding="0" cellspacing="0"
                                            style="width: 90%; margin: 15px auto;">
                                            <tr>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-left:  1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Income details</td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Income amount
                                                </td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    % to consider
                                                </td>
                                            </tr>
                                            <tr *ngFor="let element of dataSourceIncome">
                                                <td
                                                    style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    {{element.name
                                                </td>
                                                <td
                                                    style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    <span appFormatNumber>
                                                        ₹{{element.amount ? formatNumber(element.amount,0) : '-'}}
                                                    </span>
                                                </td>
                                                <td
                                                    style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    <span appFormatNumber>
                                                        {{element.percent}}%</span>
                                                </td>
                                            </tr>
                                            <tr *ngIf="dataSourceIncome.length ==0">
                                                <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                                    <h4 style="padding-top: 12px; text-align: center;">No data found
                                                    </h4>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>

                                <tr>
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 0px;">
                                        <b>6. Less: Exisiting life Insurance (sum assured)</b>
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;text-align: right;">
                                        <span appFormatNumber>
                                            -
                                        </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-right: 0px;">
                                        <span appFormatNumber
                                            [value]="plannerObj.existingLifeInsurance ? plannerObj.existingLifeInsurance : '-'"></span>
                                    </td>

                                </tr>
                                <tr>
                                    <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                        <table *ngIf="noOpened == true" cellpadding="0" cellspacing="0"
                                            style="width: 90%; margin: 15px auto;">
                                            <tr>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-left:  1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Income details</td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Income amount
                                                </td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    % to consider
                                                </td>
                                            </tr>
                                            <tr *ngFor="let element of dataSourceIncome">
                                                <td
                                                    style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    {{element.name}}
                                                </td>
                                                <td
                                                    style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    <span appFormatNumber>
                                                        ₹{{element.amount ? formatNumber(element.amount,0) : '-'}}
                                                    </span>
                                                </td>
                                                <td
                                                    style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    <span appFormatNumber>
                                                        {{element.percent}}%</span>
                                                </td>
                                            </tr>
                                            <tr *ngIf="dataSourceIncome.length ==0">
                                                <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                                    <h4 class="text-center pt-12">No data found</h4>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>

                                <tr>
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;">
                                        <b>7. Less: Existing Assets</b>
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;text-align: right;">
                                        <span appFormatNumber>
                                            -
                                        </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-right: 0px;">
                                        <span appFormatNumber
                                            [value]="plannerObj.existingAsset ? plannerObj.existingAsset : '-'">
                                        </span>
                                    </td>

                                </tr>
                                <tr>
                                    <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                        <table *ngIf="existingAsset == true" cellpadding="0" cellspacing="0"
                                            style="width: 90%; margin: 15px auto;">
                                            <tr>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-left:  1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Asset details</td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Total amount
                                                </td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    % to consider
                                                </td>
                                            </tr>
                                            <tr *ngFor="let element of dataSourceAsset">
                                                <td
                                                    style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    {{element.name}}
                                                </td>
                                                <td
                                                    style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    <span appFormatNumber>
                                                        ₹{{element.currentValue ? formatNumber(element.currentValue,0) : '-'}}
                                                    </span>
                                                </td>
                                                <td
                                                    style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    <span appFormatNumber>
                                                        {{element.percent}}%</span>
                                                </td>

                                            </tr>
                                            <tr *ngIf="dataSourceAsset.length ==0">
                                                <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                                    <h4 style="padding-top: 12px; text-align: center;">No data found
                                                    </h4>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>

                                <tr>
                                    <td
                                        style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 0px;">
                                        <b>8. Additional life insurance required (4-5-6-7)</b>
                                    </td>
                                    <td
                                        style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;text-align: right;">
                                        <span appFormatNumber>
                                            -
                                        </span>
                                    </td>
                                    <td
                                        style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-right: 0px;">
                                        <span appFormatNumber
                                            [value]="plannerObj.additionalLifeIns ? plannerObj.additionalLifeIns : '-'"></span>
                                    </td>

                                </tr>
                                <tr>
                                    <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                        <table *ngIf="noOpened == true" cellpadding="0" cellspacing="0"
                                            style="width: 90%; margin: 15px auto;">
                                            <tr>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-left:  1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Income details</td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    Income amount
                                                </td>
                                                <td
                                                    style="padding: 8px;background: #f5f7f7; text-align: right; border-right: 1px solid #dee5e7;border-top: 1px solid #dee5e7;">
                                                    % to consider
                                                </td>
                                            </tr>
                                            <tr *ngFor="let element of dataSourceIncome">
                                                <td
                                                    style="padding: 8px;   border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-left: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    {{element.name}}
                                                </td>
                                                <td
                                                    style="padding: 8px; border-top: 1px solid #dee5e7;  border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    <span appFormatNumber>
                                                        ₹{{element.amount ? formatNumber(element.amount,0) : '-'}}
                                                    </span>
                                                </td>
                                                <td
                                                    style="padding: 8px; text-align: right;  border-top: 1px solid #dee5e7; border-right: 1px solid #dee5e7;border-bottom: 1px solid #dee5e7;">
                                                    <span appFormatNumber>
                                                        {{element.percent}}%</span>
                                                </td>
                                            </tr>
                                            <tr *ngIf="dataSourceIncome.length ==0">
                                                <td colspan="3" style="border-top: 1px solid #dee5e7;">
                                                    <h4 class="text-center pt-12">No data found</h4>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>

                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

    </html>
</div>