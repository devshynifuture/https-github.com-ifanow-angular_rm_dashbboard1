<div class="row">
    <div class="col-md-12 text-right mb-10 mt-20">
        <button mat-stroked-button class="btn-primary addon f-14 mr-16" (click)="addCashFlow('')">ADD
            {{ cashFlowCategory | uppercase }}</button>
        <button mat-stroked-button class="btn-primitive" (click)="toggleEditMode()">
            <span *ngIf="!editMode">
                EDIT MODE
            </span>
            <span *ngIf="editMode">
                SAVE
            </span>
        </button>
    </div>
</div>

<div class="col-md-12 cash-flow-upperTable">
    <table mat-table [dataSource]="dataSource" id="table-low" [ngClass]="editMode == true ? 'edit-mode-hover': ''">
        <ng-container matColumnDef="description">
            <th class="br f-400 f-14" mat-header-cell *matHeaderCellDef> Description </th>
            <td class="br f-14" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue row">
                    <span class="col-md-10 p-0 mt-4"> {{ element.description }}</span>
                    <span class="col-md-2 p-0"> <img src="/assets/images/svg/cash-flow-edit-icon.svg"
                            class="c-p"></span>
                </span>


                <span class="inputValue d-none">
                    <input type="text" #descRef (input)="changeTableTdValue(descRef.value, 'description', i)">
                </span>
            </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="month1">
            <th class="br text-right f-400 f-14" mat-header-cell *matHeaderCellDef>
                Apr-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month1.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month1Ref (input)="changeTableTdValue(month1Ref.value, 'month1', i)">
                </span>
            </td>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="month2">
            <th class="br text-right f-400 f-14" mat-header-cell *matHeaderCellDef>
                May-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month2.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month2Ref (input)="changeTableTdValue(month2Ref.value, 'month2', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month3">
            <th class="br text-right f-400 f-14" mat-header-cell *matHeaderCellDef>
                Jun-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month3.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month3Ref (input)="changeTableTdValue(month3Ref.value, 'month3', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month4">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Jul-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month4.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month4Ref (input)="changeTableTdValue(month4Ref.value, 'month4', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month5">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Aug-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month5.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month5Ref (input)="changeTableTdValue(month5Ref.value, 'month5', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="groupHeader">
            <td class="br text-primary text-center" [attr.colspan]="displayedColumns.length" mat-cell
                *matCellDef="let group">
                {{ group.groupName }} </td>
        </ng-container>

        <ng-container matColumnDef="month6">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Sep-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month6.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month6Ref (input)="changeTableTdValue(month6Ref.value, 'month6', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month7">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Oct-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month7.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month7Ref (input)="changeTableTdValue(month7Ref.value, 'month7', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month8">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Nov-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month8.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month8Ref (input)="changeTableTdValue(month8Ref.value, 'month8', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month9">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Dec-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month9.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month9Ref (input)="changeTableTdValue(month9Ref.value, 'month9', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month10">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Jan-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month10.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month10Ref (input)="changeTableTdValue(month10Ref.value, 'month10', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month11">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Feb-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month11.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month11Ref (input)="changeTableTdValue(month11Ref.value, 'month11', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="month12">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Mar-{{ year.slice(-2) }}
            </th>
            <td class="br text-right f-14 f-400" mat-cell *matCellDef="let element; let i = index" appCashflowTableEdit
                [editModeTable]="editMode">
                <span class="tableValue">
                    {{ element.month12.value }}
                </span>
                <span class="inputValue d-none">
                    <input type="text" #month12Ref (input)="changeTableTdValue(month12Ref.value, 'month12', i)">
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="total">
            <th mat-header-cell class="br text-right f-400 f-14" *matHeaderCellDef> Total
                20{{ year.slice(-2) }}-{{ addOneInYear(year.slice(-2))}}
            </th>
            <td class="br text-right f-14  " mat-cell *matCellDef="let element">

                {{ element.total }} </td>
        </ng-container>

        <ng-container matColumnDef="remove">
            <th mat-header-cell *matHeaderCellDef> </th>
            <td class="br text-right f-14 text-center  c-p" mat-cell *matCellDef="let element"
                (click)="deleteEntryCashFlow(element)">
                <img src="/assets/images/svg/delete-danger.svg">
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        <tr mat-row *matRowDef="let row; columns: ['groupHeader']; when: isGroup"> </tr>
    </table>
</div>