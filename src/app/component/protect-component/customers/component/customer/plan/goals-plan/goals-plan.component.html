<div id="ui-goal">
    <div class="row skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoading">
        <div class="col-width-22 relClass br-grey pb-44 mt-5">
            <div class=" row pt-10 pb-8 bb-grey">
                <div class="col-md-4 d-flex align-items-end p-0">
                    <h3 class="mb-0  text-black ">Goals</h3>
                </div>
                <div class="col-md-7 text-right pl-0">
                    <button mat-stroked-button class="btn-primary br-0 addon" (click)="openAddgoals()">ADD GOAL</button>
                </div>
                <div class="col-md-1 p-0 d-flex align-items-center  ">
                    <i class="material-icons c-p" [matMenuTriggerFor]="menu"> more_vert </i>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item>Item 1</button>
                        <button mat-menu-item>Item 2</button>
                    </mat-menu>
                </div>
            </div>

            <div class="mt-8" *ngFor="let goal of allGoals" (click)="loadSelectedGoalData(goal)">
                <div class="row bg-grey lter p-8 c-p br-2" [ngClass]="{'bu-primitive': goal.id == selectedGoal.id}">
                    <div class="col-md-3 p-0">
                        <img class="maxWidth100" [src]="goal.img">
                    </div>
                    <div class="col-md-9 pr-0 pl-10">
                        <p class="m-0"><span class="bar">{{goal.goalName}}</span></p>
                        <div class="row pt-8">
                            <div class="col-md-6 pr-10 pl-0">
                                <h5 class="m-0 l-18 f-12 text-primitive"> Goal value</h5>
                                <h5 class="f-14 m-0"><span class="bar">₹<span appFormatNumber>{{goal.gv}}</span></span>
                                </h5>
                            </div>
                            <div class="col-md-6 pr-0 pl-4">
                                <h5 class="m-0 l-18 f-12 text-primitive"> Year</h5>
                                <h5 class="f-14 m-0"><span class="bar">{{goal.year}}</span></h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-width-78" *ngIf="allGoals.length > 0">
            <div class="row bb-grey pt-28 pb-8">
                <div class="col-md-12 p-0">
                    <h3 class="m-0 text-black f-500">{{selectedGoal.goalName}}</h3>
                </div>
            </div>
            <div class="row">
                <div class="col-width-68 p-0 pb-44 skeletonAnimation" appSkeletonLoading
                    [appSkeletonLoading]="isLoading">
                    <div class="row relClass">
                        <div class="col-md-6 pl-0 ">
                            <div class="row pt-28">
                                <div class="col-md-6 p-0 ">
                                    <h5 class="f-12 m-0 text-primitive">GOAL FUTURE VALUE</h5>
                                    <h3 class="m-0">
                                        <div class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal.dashboardData.futureValue">{{selectedGoal.dashboardData.futureValue}}</span>
                                        </div>
                                    </h3>
                                </div>
                                <div class="col-md-6">
                                    <h5 class="f-12 m-0 text-primitive">ACHIEVED</h5>
                                    <h3 class="m-0">
                                        <div class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal.achievedValue">{{selectedGoal.achievedValue}}</span>
                                        </div>
                                    </h3>
                                </div>
                            </div>
                            <div class="row pt-24">
                                <div class="col-md-12 p-0">
                                    <h5 class="m-0 text-primitive f-12">GOAL PROGRESS</h5>
                                    <mat-progress-bar id="bg-primary" mode="determinate"
                                        [value]="selectedGoal.dashboardData.goalProgress" class="h-30">
                                    </mat-progress-bar>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 p-0 pt-20">
                            <div class="row bg-grey lter b-a">
                                <div class="col-md-6 p-0">
                                    <p class="m-0 text-black roboto p-12 f-500 br bb">Additional required</p>
                                    <p class="m-0 text-black roboto p-12 br bb">Equity</p>
                                    <p class="m-0 text-black roboto p-12 br">Debt</p>
                                </div>
                                <div class="col-md-3 p-0">
                                    <p class="m-0 text-black roboto p-12 f-500 br bb">Monthly</p>
                                    <p class="m-0 text-black roboto p-12 bg-white br bb">
                                        <span class="bar" appFormatNumber
                                            [value]="selectedGoal.dashboardData.equity_monthly">{{selectedGoal.dashboardData.equity_monthly}}</span>
                                    </p>

                                    <p class="m-0 text-black roboto p-12 bg-white br"><span class="bar" appFormatNumber
                                            [value]="selectedGoal.dashboardData.debt_monthly">{{selectedGoal.dashboardData.debt_monthly}}</span>
                                    </p>
                                </div>
                                <div class="col-md-3 p-0">
                                    <p class="m-0 text-black roboto p-12 f-500 bb">Lumpsum</p>
                                    <p class="m-0 text-black roboto p-12 bg-white bb"><span class="bar" appFormatNumber
                                            [value]="selectedGoal.dashboardData.lump_equity">{{selectedGoal.dashboardData.lump_equity}}</span>
                                    </p>
                                    <p class="m-0 text-black roboto p-12 bg-white"><span class="bar" appFormatNumber
                                            [value]="selectedGoal.dashboardData.lump_debt">{{selectedGoal.dashboardData.lump_debt}}</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row pt-40">
                        <div class="col-md-12 p-0">
                            <h5 class="m-0 pb-12">Allocations to this goal</h5>
                        </div>
                    </div>
                    <div class="row b-a bg-grey lter">
                        <div class="col-md-3 p-0">
                            <p class="roboto m-0 p-8 text-black f-500">Description </p>
                        </div>
                        <div class="col-md-3 p-0">
                            <p class="roboto m-0 p-8 text-black f-500">Advice </p>
                        </div>
                        <div class="col-md-3 p-0">
                            <p class="roboto m-0 p-8 text-black f-500">Current value </p>
                        </div>
                        <div class="col-md-3 p-0">
                            <p class="roboto m-0 p-8 text-black f-500">Maturity value </p>
                        </div>
                    </div>
                    <div cdkDropList id="allottedList" [cdkDropListData]="todo" [cdkDropListSortingDisabled]="true"
                        (cdkDropListDropped)="drop($event)" (cdkDropListEntered)="logger($event)"
                        class="hide-placeholder">
                        <div class="row bl-1 bb-1 br bg-white">
                            <div class="col-md-3">
                                <p class="m-0 roboto pt-10">Fixed Deposit </p>
                            </div>
                            <div class="col-md-3">
                                <p class="m-0 roboto pt-10">Continue till maturity</p>
                            </div>
                            <div class="col-md-3">
                                <p class="m-0 roboto pt-10">13,000 </p>
                            </div>
                            <div class="col-md-3">
                                <div class="row pt-10">
                                    <div class="col-md-11 p-0">
                                        <p class="m-0 roboto ">5,28,000 </p>
                                    </div>
                                    <div class="col-md-1 p-0">
                                        <mat-icon class="c-p">more_vert</mat-icon>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="row pt-28" [hidden]="!hasCostOfDelay">
                        <div class="col-md-12 p-0">
                            <h5 class="m-0 f-500 text-black pb-8">Cost of delay</h5>
                        </div>
                    </div>
                    <div class="row b-a" [hidden]="!hasCostOfDelay">
                        <div class="col-md-6" id="monthly-chart-container-main"></div>
                        <div class="col-md-6" id="lumpsum-chart-container-main"></div>
                    </div>
                    <div class="row pt-24 skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoading">
                        <div class="col-md-9 p-0">
                            <h5 class="m-0 f-500 pb-8">Planner notes</h5>
                        </div>
                        <div class="col-md-2 p-0 text-right">
                            <p class="m-0 text-primitive ">23/12/2019</p>
                        </div>
                        <div class="col-md-1 pr-0">
                            <i class="material-icons c-p right">
                                more_vert
                            </i>
                        </div>
                        <div class="b-a relClass">
                            <div class="m-0 p-8 text-black f-14 roboto">
                                <div class="bar">
                                    We have given higher allocations to your retirement goal compared to other goals. We
                                    suggest you to first allocate maximum corpus to this goal. We wile update your EPF
                                    contributions too once we have the details of the same.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-24">
                        <div class="col-md-11 p-0">
                            <h5 class="m-0 f-500 pb-8">Loan deatils</h5>
                        </div>
                        <div class="col-md-1 pr-0">
                            <mat-icon [matMenuTriggerFor]="menu" class="c-p right">more_vert</mat-icon>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item (click)="openInSideBar(null, 'openEdit')">Edit note</button>
                                <button mat-menu-item>Hide from client</button>
                                <button mat-menu-item>Delete note</button>
                                <button mat-menu-item (click)="openInSideBar(null, 'openView')">View from
                                    client</button>
                                <button mat-menu-item (click)="openInSideBar(null, 'openEdit')">Add new note</button>
                            </mat-menu>
                        </div>
                    </div>
                    <div class="row b-a" *ngIf="selectedGoal.remainingData.loan">
                        <div class="col-md-10 skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoading">
                            <div class="row pt-16 relClass">
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">INCOME IN GOAL YEAR</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal.remainingData.loan.netSalary">{{selectedGoal.remainingData.loan.netSalary}}</span></span>
                                    </h5>
                                </div>
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">HIGHEST EMI AVAILABLE</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal.remainingData.loan.highestLoanAndEmiEligible.highest_emi_eligible">{{selectedGoal.remainingData.loan.highestLoanAndEmiEligible.highest_emi_eligible}}</span></span>
                                    </h5>
                                </div>
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">HIGHEST LOAN AVAILABLE</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal.remainingData.loan.highestLoanAndEmiEligible.highest_loan_eligible">{{selectedGoal.remainingData.loan.highestLoanAndEmiEligible.highest_loan_eligible}}</span></span>
                                    </h5>
                                </div>
                            </div>
                            <div class="row pt-16 relClass">
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">LOAN TENURE</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal.remainingData.loan.loanTenure">{{selectedGoal.remainingData.loan.loanTenure}}</span></span>
                                    </h5>
                                </div>
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">EMI PAYABLE</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal.remainingData.loan.emi">{{selectedGoal.remainingData.loan.emi}}</span></span>
                                    </h5>
                                </div>
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">LOAN TO BE TAKEN</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal.remainingData.loan.loanAmount">{{selectedGoal.remainingData.loan.loanAmount}}</span></span>
                                    </h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 pl-0">
                            <div id="donut-chart-container"></div>

                            <!-- <div class="row pt-16">
                                <div class="col-md-2 pl-0">
                                    <p class="hw-12 bg-primary mt-2 mb-0"></p>
                                </div>
                                <div class="col-md-10 pr-0 pl-0">
                                    <p class="m-0 f-11">Loan amount</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2 pl-0">
                                    <p class="hw-12 bg-warning mt-2 mb-0"></p>
                                </div>
                                <div class="col-md-10 pr-0 pl-0">
                                    <p class="m-0 f-11">Down amount</p>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>
                <div class="col-width-31 pr-0 pt-20">
                    <img [src]="selectedGoal.img" class="imgWidth">

                    <div class="btnBox">
                        <button mat-stroked-button class="in-btn" (click)="openInSideBar(null, 'openallocations')">
                            <img src="/assets/images/svg/btn-links.svg">Allocations</button>
                        <button mat-stroked-button class="in-btn-two" (click)="openInSideBar(null, 'openMfAllocation')">
                            <img src="/assets/images/svg/btn-links.svg">MF allocations</button>
                    </div>


                    <div class="btnBox">
                        <button mat-stroked-button class="in-btn" (click)="openInSideBar(null, 'openKeyinfo')">
                            <img src="/assets/images/svg/filter-schemes.svg">Key info</button>
                        <button mat-stroked-button class="in-btn-two" (click)="openInSideBar(null, 'openCalculators')">
                            <img src="/assets/images/svg/cal-sm.svg">Calculators</button>
                    </div>


                    <div class="btnBox">
                        <button mat-stroked-button class="in-btn">
                            <img src="/assets/images/svg/btn-links.svg">Action plan</button>
                        <button mat-stroked-button class="in-btn-two" (click)="openInSideBar(null, 'openPreferences')">
                            <img src="/assets/images/svg/3lines.svg">Preferences</button>
                    </div>


                    <div class="row pt-20" *ngIf="selectedGoal">
                        <div class="col-md-12 right p-0 text-right" (click)="deleteGoal()">
                            <img src="/assets/images/svg/blue-delete.svg">
                            <!-- (click)="deleteGoal(dashboardData)" -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-width-78" *ngIf="allGoals.length == 0">
            No Data Present
        </div>
    </div>
</div>