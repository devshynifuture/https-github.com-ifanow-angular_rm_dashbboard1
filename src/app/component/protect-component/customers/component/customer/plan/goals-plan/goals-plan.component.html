<div id="ui-goal">
    <div class="row" *ngIf="allGoals.length > 0">
        <div class="col-width-22 relClass br-grey  pb-44">
            <div class=" row pt-20 pb-10 bb-grey">
                <div class="col-md-4 p-0">
                    <h3 class="mb-0 d-flex align-items-end text-black pt-4">Goals</h3>
                </div>
                <div class="col-md-7 text-right pl-0">
                    <button mat-stroked-button class="btn-primary br-0 addon" (click)="openAddgoals()">ADD GOAL</button>
                </div>
                <div class="col-md-1 p-0 d-flex align-items-center  ">
                    <i class="material-icons c-p" [matMenuTriggerFor]="menu"> more_vert </i>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item>Item 1</button>
                        <button mat-menu-item>Item 2</button>
                    </mat-menu>
                </div>
            </div>

            <div class="mt-8 skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="loaderFn.loading"
                *ngFor="let goal of allGoals" (click)="loadSelectedGoalData(goal)">
                <div *ngIf="!loaderFn.loading">
                    <div class="row bg-grey lter p-8 c-p br-2" [ngClass]="{'bu-primitive': goal.id == selectedGoal.id}">
                        <div class="col-md-3 p-0">
                            <img class="maxWidth100" [src]="goal.img">
                        </div>
                        <div class="col-md-9 pr-0 pl-10">
                            <p class="m-0"><span class="bar">{{goal.goalName}}</span></p>
                            <div class="row pt-8">
                                <div class="col-md-6 pr-10 pl-0">
                                    <h5 class="m-0 l-18 f-12 text-primitive"> Goal value</h5>
                                    <h5 class="f-14 m-0"><span class="bar">₹<span
                                                appFormatNumber>{{goal.gv}}</span></span>
                                    </h5>
                                </div>
                                <div class="col-md-6 pr-0 pl-4">
                                    <h5 class="m-0 l-18 f-12 text-primitive"> Year</h5>
                                    <h5 class="f-14 m-0"><span class="bar">{{goal.year}}</span></h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div *ngIf="loaderFn.loading">
                    <div class="relClass">
                        <div class="bar82" [ngClass]="{'height82': loaderFn.loading}">

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-width-78" *ngIf="allGoals.length > 0">
            <div class="row bb-grey pb-12 pt-28">
                <div class="col-width-68">
                    <div class="row">
                        <div class="col-md-8 p-0">
                            <h3 class="m-0 text-black f-500">{{selectedGoal.goalName}}</h3>
                        </div>
                        <div class="col-md-4 p-0 text-right">
                            <h3 class="f-20 f-500 mb-0 roboto">{{selectedGoal.year}}</h3>
                        </div>
                    </div>
                </div>
                <div class="col-width-31">
                    <div class="row">
                        <div class="col-md-12 text-right p-0" *ngIf="selectedGoal">
                            <img (click)="deleteGoal()" src="/assets/images/svg/blue-delete.svg">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-width-68 p-0 pb-44 skeletonAnimation" appSkeletonLoading
                    [appSkeletonLoading]="loaderFn.loading">
                    <div class="row ">
                        <div class="col-md-6 pl-0 ">
                            <div class="row pt-28">
                                <div class="col-md-6 p-0 ">
                                    <h5 class="f-12 m-0 text-primitive">GOAL FUTURE VALUE</h5>
                                    <div class="relClass">
                                        <div class="bar" [ngClass]="{'height24': loaderFn.loading}">
                                            <h3 class="m-0  ">
                                                &#8377;<span appFormatNumber
                                                    [value]="selectedGoal?.dashboardData?.futureValue"></span>
                                            </h3>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h5 class="f-12 m-0 text-primitive">ACHIEVED</h5>
                                    <div class="relClass">
                                        <div class="bar">
                                            <h3 class="m-0  ">
                                                &#8377;<span appFormatNumber
                                                    [value]="selectedGoal.achievedValue"></span>
                                            </h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row pt-24">
                                <div class="col-md-12 p-0">
                                    <h5 class="m-0 text-primitive f-12">GOAL PROGRESS</h5>
                                    <mat-progress-bar id="bg-primary" mode="determinate"
                                        [value]="selectedGoal?.dashboardData?.goalProgress" class="h-30">
                                    </mat-progress-bar>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 p-0 pt-20">
                            <div class="row bg-grey lter b-a">
                                <div class="col-md-6 p-0">
                                    <p class="m-0 text-black roboto p-12 f-500 br bb">Additional required</p>
                                    <p class="m-0 text-black roboto p-12 br bb">Equity</p>
                                    <p class="m-0 text-black roboto p-12 br">Debt</p>
                                </div>
                                <div class="col-md-3  p-0">
                                    <p class="m-0 text-black roboto p-12 f-500  bb">Monthly</p>
                                    <p class="m-0 relClass text-black roboto p-12 bg-white  bb">
                                        <span appFormatNumber [value]="selectedGoal?.dashboardData?.equity_monthly">
                                        </span>

                                        <span class="bar height24" style="display: inline-block;"
                                            *ngIf="loaderFn.loading">
                                        </span>
                                    </p>

                                    <p class="m-0 text-black relClass roboto p-12 bg-white ">
                                        <span class="bar" appFormatNumber
                                            [value]="selectedGoal?.dashboardData?.debt_monthly"> </span>

                                        <span class="bar height24" style="display: inline-block;"
                                            *ngIf="loaderFn.loading">
                                        </span>
                                    </p>
                                </div>
                                <div class="col-md-3   p-0">
                                    <p class="m-0 text-black roboto p-12 f-500 bb">Lumpsum</p>
                                    <p class="m-0 text-black relClass roboto p-12 bg-white bb">
                                        <span class="bar" appFormatNumber
                                            [value]="selectedGoal?.dashboardData?.lump_equity"> </span>

                                        <span class="bar height24" style="display: inline-block;"
                                            *ngIf="loaderFn.loading">
                                        </span>
                                    </p>
                                    <p class="m-0 text-black relClass roboto p-12 bg-white">
                                        <span class="bar" appFormatNumber
                                            [value]="selectedGoal?.dashboardData?.lump_debt"> </span>
                                        <span class="bar height24" style="display: inline-block;"
                                            *ngIf="loaderFn.loading">
                                        </span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row pt-40">
                        <div class="col-md-12 p-0">
                            <h5 class="m-0 pb-12">Allocations to this goal</h5>
                        </div>
                    </div>


                    <div class="row b-a bg-grey height40 lter">
                        <div class="col-md-3 d-flex align-items-center">
                            <p class="roboto m-0 text-black f-500">Description </p>
                        </div>
                        <div class="col-md-3 d-flex align-items-center">
                            <p class="roboto m-0 text-black f-500">Advice </p>
                        </div>
                        <div class="col-md-3 d-flex align-items-center">
                            <p class="roboto m-0 text-black f-500">Current value </p>
                        </div>
                        <div class="col-md-3 d-flex align-items-center">
                            <p class="roboto m-0 text-black f-500">Maturity value </p>
                        </div>
                    </div>
                    <div cdkDropList id="allottedList" [cdkDropListData]="todo" [cdkDropListSortingDisabled]="true"
                        (cdkDropListDropped)="drop($event)" (cdkDropListEntered)="logger($event)"
                        class="hide-placeholder">
                        <div class="row height40 bl-1 bb-1 br bg-white">
                            <div class="col-md-3 d-flex align-items-center">
                                <div class="relClass">
                                    <div class="bar">
                                        <p class="mb-0 roboto">Fixed Deposit </p>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-3 d-flex align-items-center">
                                <div class="relClass">
                                    <div class="bar">
                                        <p class="mb-0 roboto">Continue till maturity</p>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-3 d-flex align-items-center">
                                <div class="relClass">
                                    <div class="bar">
                                        <p class="mb-0 roboto">13,000 </p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-3 d-flex align-items-center justify-content-between  ">
                                <div class="relClass">
                                    <div class="bar">
                                        <p class="m-0 roboto ">5,28,000 </p>
                                    </div>
                                </div>


                                <img src="/assets/images/svg/dot-menu.svg" class="c-p">

                            </div>



                            <!-- <div class="col-md-3">
                                <div class="row">
                                    <div class="col-md-11  d-flex align-items-center p-0">
                                        <div class="relClass">
                                            <div class="bar">
                                                <p class="m-0 roboto ">5,28,000 </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-1  d-flex align-items-end p-0">
                                        <mat-icon class="c-p">more_vert</mat-icon>
                                    </div>
                                </div>
                            </div> -->

                        </div>
                    </div>

                    <div class="row pt-28" [hidden]="!hasCostOfDelay || !loaderFn.loading">
                        <div class="col-md-12 p-0">
                            <h5 class="m-0 f-500 text-black pb-8">Cost of delay</h5>
                        </div>
                    </div>
                    <div class="row b-a" [hidden]="!hasCostOfDelay || !loaderFn.loading">
                        <div class="col-md-6" id="monthly-chart-container-main"></div>
                        <div class="col-md-6" id="lumpsum-chart-container-main"></div>
                    </div>

                    <div class=" mt-24 skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="loaderFn.loading">
                        <div class="row">
                            <div class="col-md-9 p-0">
                                <h5 class="m-0 f-500 pb-8">Planner notes</h5>
                            </div>
                            <div class="col-md-3 pL-0 d-flex align-items-center  justify-content-end ">
                                <p class="m-0 text-primitive ">23/12/2019</p>
                                <img src="/assets/images/svg/dot-menu.svg" class="c-p ml-16">
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-12 p-0">
                                <div class="b-a relClass">
                                    <div class="m-0 p-8 text-black f-14 roboto">
                                        We have given higher allocations to your retirement goal compared to other
                                        goals. We
                                        suggest you to first allocate maximum corpus to this goal. We wile update your
                                        EPF
                                        contributions too once we have the details of the same.
                                    </div>
                                    <div class="bar82 p-8" [ngClass]="{'height82': loaderFn.loading}">
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row pt-24">
                        <div class="col-md-11 p-0">
                            <h5 class="m-0 f-500 pb-8">Loan deatils</h5>
                        </div>
                        <div class="col-md-1 text-right">
                            <img [matMenuTriggerFor]="menu" src="/assets/images/svg/dot-menu.svg" class="c-p">
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item (click)="openInSideBar(null, 'openEdit')">Edit note</button>
                                <button mat-menu-item>Hide from client</button>
                                <button mat-menu-item>Delete note</button>
                                <button mat-menu-item (click)="openInSideBar(null, 'openView')">View from
                                    client</button>
                                <button mat-menu-item (click)="openInSideBar(null, 'openEdit')">Add new note</button>
                            </mat-menu>
                        </div>
                    </div>
                    <div class="row b-a" *ngIf="selectedGoal?.remainingData?.loan || loaderFn.loading">
                        <div class="col-md-10 skeletonAnimation" appSkeletonLoading
                            [appSkeletonLoading]="loaderFn.loading">
                            <div class="row pt-16 relClass">
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">INCOME IN GOAL YEAR</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal?.remainingData?.loan?.netSalary"></span></span>
                                    </h5>
                                </div>
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">HIGHEST EMI AVAILABLE</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal?.remainingData?.loan?.highestLoanAndEmiEligible?.highest_emi_eligible"></span></span>
                                    </h5>
                                </div>
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">HIGHEST LOAN AVAILABLE</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal?.remainingData?.loan?.highestLoanAndEmiEligible?.highest_loan_eligible"></span></span>
                                    </h5>
                                </div>
                            </div>
                            <div class="row pt-16 relClass">
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">LOAN TENURE</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal?.remainingData?.loan?.loanTenure"></span></span>
                                    </h5>
                                </div>
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">EMI PAYABLE</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal?.remainingData?.loan?.emi"></span></span>
                                    </h5>
                                </div>
                                <div class="col-md-4 p-0">
                                    <p class="m-0 f-12 text-primitive">LOAN TO BE TAKEN</p>
                                    <h5 class="m-0">
                                        <span class="bar">₹<span appFormatNumber
                                                [value]="selectedGoal?.remainingData?.loan?.loanAmount"></span></span>
                                    </h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 pl-0">
                            <div id="donut-chart-container"></div>


                        </div>
                    </div>
                </div>

                <div class="col-width-31 pr-0 pt-20">
                    <div class="row">
                        <div class="col-md-12 p-0  skeletonAnimation" appSkeletonLoading
                            [appSkeletonLoading]="loaderFn.loading">

                            <div class="imgBoxGoals">
                                <img [src]="selectedGoal.img">
                            </div>

                            <div class="relClass">
                                <div class="bar289" [ngClass]="{'height289': loaderFn.loading}">

                                </div>
                            </div>

                            <div class=" btnBox relClass">
                                <div class="bar36" [ngClass]="{'height36': loaderFn.loading}">
                                </div>

                                <div class="bar36" [ngClass]="{'height36': loaderFn.loading}">
                                </div>
                            </div>

                            <div class=" btnBox relClass">
                                <div class="bar36" [ngClass]="{'height36': loaderFn.loading}">
                                </div>

                                <div class="bar36" [ngClass]="{'height36': loaderFn.loading}">
                                </div>
                            </div>


                            <div class="btnBox">
                                <button mat-stroked-button class="in-btn "
                                    (click)="openInSideBar(null, 'openallocations')">
                                    <img class="ml-8" src="/assets/images/svg/btn-links.svg">Allocations</button>

                                <button mat-stroked-button class="in-btn-two"
                                    (click)="openInSideBar(null, 'openMfAllocation')">
                                    <img class="ml-8" src="/assets/images/svg/btn-links.svg">MF allocations</button>
                            </div>


                            <div class="btnBox">
                                <button mat-stroked-button class="in-btn" (click)="openInSideBar(null, 'openKeyinfo')">
                                    <img class="ml-8" src="/assets/images/svg/filter-schemes.svg">Key info</button>
                                <button mat-stroked-button class="in-btn-two"
                                    (click)="openInSideBar(null, 'openCalculators')">
                                    <img class="ml-8" src="/assets/images/svg/cal-sm.svg">Calculators</button>
                            </div>


                            <div class="btnBox">
                                <button mat-stroked-button class="in-btn">
                                    <img class="ml-8" src="/assets/images/svg/btn-links.svg">Action plan</button>
                                <button mat-stroked-button class="in-btn-two"
                                    (click)="openInSideBar(null, 'openPreferences')">
                                    <img class="ml-8" src="/assets/images/svg/3lines.svg">Preferences</button>
                            </div>




                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>
    <div class="row" *ngIf="allGoals.length == 0 && !loaderFn.loading">
        <div class="col-md-12 emptyGoalmt d-flex align-items-center justify-content-center">

            <div class="emptyImg">
                <img src="/assets/images/svg/empty-goal-icon.svg">
            </div>

            <div class="textEmpty">
                <h3>What’s a life without a goal.</h3>
                <p>Let’s add your goals and achieve them. We’re in this together.</p>
                <button (click)="openAddgoals()" mat-stroked-button class="btn-primary br-0 addon">LET’S GET
                    STARTED</button>
            </div>

        </div>
    </div>
</div>