<div id="ui-expenses" class="account_side-menu">
    <div class="row">
        <div class="col-md-12 p-0" [ngSwitch]="viewMode">
            <div [ngSwitch]="viewMode">
                <div class="wrapper-8">
                    <div class="row pt-28 pb-28">
                        <div class="col-md-4 pl-0">
                            <button mat-button [ngClass]="{'mat-stroked-button': viewMode == 'Transactions','text-primary':viewMode == 'Transactions'}" (click)="viewMode='Transactions';getBugetTab(viewMode)">Transactions</button>
                            <button mat-button (click)="viewMode='Budget';getBugetTab(viewMode)" [ngClass]="{'mat-stroked-button': viewMode == 'Budget','text-primary':viewMode == 'Budget'}">Budget</button>
                        </div>

                        <div class="col-md-8 d-flex align-items-center justify-content-end pr-0">

                            <mat-chip-list class="newDateIcon">
                                <mat-chip *ngFor="let dateFilter of filterDate; let i = index" class="bg-white b-a c-p f-400 p-12">
                                    {{startDateDisp}} - {{endDateDisp}}
                                    <!-- <input  matInput autocomplete="off"
                                        [(value)]="startDate" class="form-control br-0 b-0"
                                        [matDatepicker]="policyStartDatePicker">
            
                                    <mat-datepicker #policyStartDatePicker ></mat-datepicker>
                                        -
            
                                    <input  matInput autocomplete="off"
                                    [(value)]="endDate" class="form-control br-0 b-0"
                                    [matDatepicker]="policyEndtDatePicker">
                                <mat-datepicker #policyStartDatePicker ></mat-datepicker> -->

                                </mat-chip>
                            </mat-chip-list>


                            <mat-form-field class="w-30 ml-16">
                                <mat-select class="form-control" (selectionChange)="addFilterPeriod($event)" [(value)]="selectedPeriod">
                                    <mat-option value="1">This month</mat-option>
                                    <mat-option value="2">Last month</mat-option>
                                    <mat-option value="3">This quarter</mat-option>
                                    <mat-option value="4">Last quarter</mat-option>
                                    <mat-option value="5">This calender year</mat-option>
                                    <mat-option value="6">Last calender year</mat-option>
                                    <mat-option value="7">This financial year</mat-option>
                                    <mat-option value="8">Last financial year</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div>
                        <div *ngSwitchCase="'Transactions'">
                            <div class="row">
                                <div class="col-md-4 p-0" *ngIf="dataSource.data.length > 0 || dataSource1.data.length > 0">
                                    <h4 class="m-0 text-black roboto pt-8">Transactions</h4>
                                </div>
                                <div class="col-md-8 p-0 right text-right justify-content-end d-flex align-items-center" *ngIf="dataSource.data.length > 0">
                                    <button mat-stroked-button class="br-0 btn-sm p-0 min-52 text-custom">Help</button>
                                    <!-- <img src="assets/images/svg/download-bordered.svg" class="c-p"> -->
                                    <div class="pdfClass">

                                        <a class="c-p downloadPdfIcon" [matMenuTriggerFor]="menu1" *ngIf="!fragmentData.isSpinner">
                                            <img src="assets/images/svg/download-bordered.svg">
                                        </a>

                                        <mat-menu #menu1="matMenu">
                                            <button mat-menu-item (click)="generatePdf('template')">PDF</button>
                                            <button (click)="Excel('Expenses','template')" mat-menu-item>XLS</button>
                                        </mat-menu>
                                        <mat-spinner [diameter]="30" *ngIf="fragmentData.isSpinner"></mat-spinner>
                                    </div>
                                    <img src="assets/images/svg/three-dot-bordered.svg" class="c-p mr-12">
                                    <!-- <button mat-stroked-button class="btn-default addon mr-12 v-middle"><i
                                            class="material-icons">filter_list</i>FILTERS</button> -->
                                    <button mat-stroked-button class="btn-primary" (click)="openExpenses('addExpenses',null)">
                                        ADD NEW</button>
                                </div>
                            </div>
                            
                            <div class="row pt-12">
                                <div class="col-md-7 pl-0">
                                    <div class="example-container mb-24 transactions-table">
                                        <table matSort *ngIf="dataSource.data.length > 0" mat-table [dataSource]="dataSource" id="table-low" class="skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoading">
                                            <ng-container matColumnDef="no">
                                                <th mat-header-cell *matHeaderCellDef class="br"> No </th>
                                                <td mat-cell *matCellDef="let element let i = index;" class="br">
                                                    <div [ngClass]="{'bar': isLoading}"> {{isLoading ? '' : i + 1 }}
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="expense">
                                                <th mat-sort-header="expenseType" mat-header-cell *matHeaderCellDef class="br"> Category </th>
                                                <td *matCellDef="let element" class="br" mat-cell>
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        {{isLoading ? '' : element.expenseType}}
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="date">
                                                <th mat-sort-header="expenseDoneOn" mat-header-cell *matHeaderCellDef class="br"> Date </th>
                                                <td mat-cell *matCellDef="let element" class="br">
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        {{isLoading ? '' : (element.expenseDoneOn | date:'dd/MM/yyyy')}}
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="desc">
                                                <th mat-sort-header="description" mat-header-cell *matHeaderCellDef class="br"> Description </th>
                                                <td mat-cell *matCellDef="let element" class="br">
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        {{isLoading ? '' : (element.description ? element.description : '-')}}
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="mode">
                                                <th mat-sort-header="paymentModeId" mat-header-cell *matHeaderCellDef class="br"> Mode </th>
                                                <td mat-cell *matCellDef="let element" class="br">
                                                    <div [ngClass]="{'bar': isLoading}" *ngIf="!isLoading">
                                                        {{(element.paymentModeId == 2)? 'Debit card':(element.paymentModeId == 1)? 'Credit card':'-'}}
                                                    </div>
                                                    <div [ngClass]="{'bar': isLoading}" *ngIf="isLoading">{{''}} </div>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="amt">
                                                <th mat-sort-header="amount" mat-header-cell *matHeaderCellDef class="br"> Amount </th>
                                                <td mat-cell *matCellDef="let element" class="br">
                                                    <div [ngClass]="{'bar': isLoading}">{{!isLoading? "₹" : ""}}<span appFormatNumber>{{isLoading ? '' : element.amount }}</span>
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="status">
                                                <th mat-sort-header="status" mat-header-cell *matHeaderCellDef class="br"> Status </th>
                                                <td mat-cell *matCellDef="let element" class="br">
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        {{isLoading ? '' : element.status}}
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="icons">
                                                <th mat-header-cell *matHeaderCellDef class="t-2"> </th>
                                                <td mat-cell *matCellDef="let element" [matMenuTriggerFor]="menu4" class="c-p text-center">
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        <!-- <i *ngIf="isLoading==false"
                                                            class="material-icons c-p text-black"
                                                            [matMenuTriggerFor]="menu4">more_vert</i> -->
                                                        <img *ngIf="!isLoading" class="c-p" src="/assets/images/svg/dot-menu.svg">
                                                        <mat-menu #menu4="matMenu">
                                                            <button mat-menu-item (click)="element.isRecuring = false;openExpenses('editExpenses',element)">Edit</button>
                                                            <button mat-menu-item (click)="detailedViewExpense(element,'Transactions')">Detailed
                                                                view</button>
                                                            <!-- <button mat-menu-item>Activity</button> -->
                                                            <button mat-menu-item (click)="deleteModal('expense',element)">Delete</button>
                                                        </mat-menu>
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                        </table>

                                    </div>

                                    <div *ngIf="dataSource1.data.length > 0">
                                        <h5 class="m-0 text-black" *ngIf="dataSource1.filteredData.length > 0">Recurring commitments
                                        </h5>
                                        <div class="example-container mt-8 mb-24 other-commitments">
                                            <table matSort *ngIf="dataSource1.filteredData.length > 0" mat-table [dataSource]="dataSource1" id="table-low" class="skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoading">
                                                <ng-container matColumnDef="no">
                                                    <th mat-header-cell *matHeaderCellDef class="br"> No </th>
                                                    <td mat-cell *matCellDef="let element; let i = index;" class="br">
                                                        <div [ngClass]="{'bar': isLoading}"> {{isLoading ? '' : i + 1 }}
                                                        </div>

                                                    </td>
                                                </ng-container>
                                                <ng-container matColumnDef="expense">
                                                    <th mat-sort-header="expenseType" mat-header-cell *matHeaderCellDef class="br"> Category
                                                    </th>
                                                    <td mat-cell *matCellDef="let element" class="br">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{isLoading ? '' : element.expenseType}}
                                                        </div>
                                                    </td>
                                                </ng-container>
                                                <ng-container matColumnDef="date">
                                                    <th mat-sort-header="startsFrom" mat-header-cell *matHeaderCellDef class="br text-left">
                                                        Date </th>
                                                    <td mat-cell *matCellDef="let element" class="br text-left">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{isLoading ? '' : element.startsFrom | date:'dd/MM/yyyy'}}
                                                        </div>
                                                    </td>
                                                </ng-container>
                                                <ng-container matColumnDef="desc">
                                                    <th mat-sort-header="desc" mat-header-cell *matHeaderCellDef class="br"> Description </th>
                                                    <td mat-cell *matCellDef="let element" class="br">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{isLoading ? '' : (element.description ? element.description : '-')}}
                                                        </div>
                                                    </td>
                                                </ng-container>
                                                <ng-container matColumnDef="mode">
                                                    <th mat-sort-header="paymentModeId" mat-header-cell *matHeaderCellDef class="br"> Mode </th>
                                                    <td mat-cell *matCellDef="let element" class="br">
                                                        <div [ngClass]="{'bar': isLoading}" *ngIf="!isLoading">
                                                            {{(element.paymentModeId == 2)? 'Debit card':(element.paymentModeId == 1)? 'Credit card':'-'}}
                                                        </div>
                                                        <div class="bar" *ngIf="isLoading">
                                                            {{''}}
                                                        </div>
                                                    </td>
                                                </ng-container>
                                                <ng-container matColumnDef="amt">
                                                    <th mat-sort-header="amount" mat-header-cell *matHeaderCellDef class="br text-right"> Amount
                                                    </th>
                                                    <td mat-cell *matCellDef="let element" class="br text-right">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{!isLoading? "₹" : ""}}<span appFormatNumber>{{isLoading ? '' : element.amount }}</span>
                                                        </div>
                                                    </td>
                                                </ng-container>
                                                <ng-container matColumnDef="status">
                                                    <th mat-sort-header="status" mat-header-cell *matHeaderCellDef class="br"> Status </th>
                                                    <td mat-cell *matCellDef="let element" class="br">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{isLoading ? '' : element.status}}
                                                        </div>
                                                    </td>
                                                </ng-container>
                                                <ng-container matColumnDef="icons">
                                                    <th mat-header-cell *matHeaderCellDef class="t-2"> </th>
                                                    <td mat-cell *matCellDef="let element" [matMenuTriggerFor]="menu4" class="c-p text-center">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            <!-- <i *ngIf="isLoading==false"
                                                                class="material-icons c-p text-black"
                                                                [matMenuTriggerFor]="menu4">more_vert</i> -->
                                                            <img *ngIf="!isLoading" class="c-p" src="/assets/images/svg/dot-menu.svg">
                                                            <mat-menu #menu4="matMenu">
                                                                <button mat-menu-item (click)="element.isRecuring = true;openExpenses('editExpenses',element)">Edit</button>
                                                                <button mat-menu-item (click)="detailedViewExpense(element,'Recurring commitments')">Detailed
                                                                    view</button>
                                                                <!-- <button mat-menu-item>Activity</button> -->
                                                                <button mat-menu-item (click)="deleteModal('expenseRecuring',element)">Delete</button>
                                                            </mat-menu>
                                                        </div>
                                                    </td>
                                                </ng-container>
                                                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true">
                                                </tr>
                                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                            </table>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-5 pr-8 b-a">
                                    <div class="text-center">
                                        <div class="highcharts-figure" id="piechartExpense"></div>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-12">
                                    <div *ngIf="dataSource.data.length == 0 " class="d-flex flex-column align-items-center">
                                        <img class="width400" src="assets/images/svg/clients-img.svg">
                                        <h4 class="text-center pt-12">{{noData}}</h4>
                                        <button mat-stroked-button class="btn-primary proximaFont addon v-middle" (click)="openExpenses('addExpenses',null)"> ADD NEW
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--- Budget --->
                    <div *ngSwitchCase="'Budget'">
                        <div class="row">
                            <div class="col-md-4 p-0" *ngIf="dataSource4.data.length > 0 || dataSource5.data.length > 0">
                                <h4 class="m-0 text-black roboto pt-8">Budget</h4>
                            </div>
                            <div class="col-md-8 p-0 right text-right justify-content-end d-flex align-items-center" *ngIf="dataSource4.data.length > 0 || dataSource5.data.length > 0">
                                <button mat-stroked-button class="br-0 btn-sm p-0 min-52 text-custom">Help</button>
                                <!-- <img src="assets/images/svg/download-bordered.svg" class="c-p"> -->
                                <div class="pdfClass">

                                    <a class="c-p downloadPdfIcon" [matMenuTriggerFor]="menu2" *ngIf="!fragmentData.isSpinner">
                                        <img src="assets/images/svg/download-bordered.svg">
                                    </a>

                                    <mat-menu #menu2="matMenu">
                                        <button mat-menu-item (click)="generatePdf('template2')">PDF</button>
                                        <button (click)="Excel('Expenses','template2')" mat-menu-item>XLS</button>
                                    </mat-menu>
                                    <mat-spinner [diameter]="30" *ngIf="fragmentData.isSpinner"></mat-spinner>
                                </div>
                                <img src="assets/images/svg/three-dot-bordered.svg" class="c-p mr-12">
                                <!-- <button mat-stroked-button class="btn-default addon mr-12 v-middle">
                                    <i class="material-icons">filter_list</i>
                                    FILTERS
                                </button> -->
                                <button mat-stroked-button class="btn-primary addon v-middle" (click)="openExpenses('addBudget', null)">
                                    <i class="material-icons">add</i>
                                    ADD NEW
                                </button>
                            </div>
                        </div>

                        <div class="row pt-12">
                            <div class="col-md-7 pl-0 budget">
                                <div class="example-container  mb-24 fixed-DEPOSIT">
                                    <table matSort *ngIf="dataSource4.filteredData.length > 0" mat-table [dataSource]="dataSource4" id="table-low" class="skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoading">
                                        <ng-container matColumnDef="no">
                                            <th mat-header-cell *matHeaderCellDef class="br t-2"> No </th>
                                            <td mat-cell *matCellDef="let element;  let i = index;" class="br t-2">
                                                <div [ngClass]="{'bar': isLoading}"> {{isLoading ? '' : i + 1 }} </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="expense">
                                            <th mat-sort-header="expenseType" mat-sort-header="expenseType" mat-header-cell *matHeaderCellDef class="br t-26"> Category </th>
                                            <td mat-cell *matCellDef="let element" class="br t-26">
                                                <div [ngClass]="{'bar': isLoading}">
                                                    {{isLoading ? '' : element.expenseType}}
                                                </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="budget">
                                            <th mat-sort-header="amount" mat-header-cell *matHeaderCellDef class="br t-10 text-right"> Budget
                                            </th>
                                            <td mat-cell *matCellDef="let element" class="br t-10 text-right">

                                                <div [ngClass]="{'bar': isLoading}">
                                                    {{!isLoading && element.amount? "₹" : ""}}<span appFormatNumber>{{(isLoading) ? '' :  (element.amount ? element.amount : '-') }}</span>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="progress">
                                            <th mat-header-cell *matHeaderCellDef class="br "> Progress </th>
                                            <td mat-cell *matCellDef="let element" class="br">
                                                <div [ngClass]="{'bar': isLoading}">
                                                    <mat-progress-bar *ngIf="isLoading==false" mode="determinate" value="40" class="w-80"></mat-progress-bar>
                                                    <span *ngIf="isLoading">{{''}}</span>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="spent">
                                            <th mat-sort-header="spent" mat-header-cell *matHeaderCellDef class="br text-right"> Spent </th>
                                            <td mat-cell *matCellDef="let element" class="br text-right">

                                                <div [ngClass]="{'bar': isLoading}">
                                                    {{!isLoading && element.spent ? "₹" : ""}}<span appFormatNumber>{{isLoading ? '' : (element.spent ? element.spent  : '-')}}</span>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="icons">
                                            <th mat-header-cell *matHeaderCellDef class="t-2"> </th>
                                            <td mat-cell *matCellDef="let element" [matMenuTriggerFor]="menu4" class="c-p text-center">
                                                <div [ngClass]="{'bar': isLoading}">
                                                    <!-- <i *ngIf="isLoading==false"
                                                        class="material-icons c-p text-black"
                                                        [matMenuTriggerFor]="menu4">more_vert</i> -->
                                                    <img *ngIf="!isLoading" class="c-p" src="/assets/images/svg/dot-menu.svg">
                                                    <mat-menu #menu4="matMenu">
                                                        <button mat-menu-item (click)="element.isRecuring = false;openExpenses('editBudget',element)">Edit</button>
                                                        <button mat-menu-item (click)="detailedViewExpense(element,'Budget')">Detailed
                                                            view</button>
                                                        <!-- <button mat-menu-item>Activity</button> -->
                                                        <button mat-menu-item (click)="deleteModal('budget',element)">Delete</button>
                                                    </mat-menu>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="displayedColumns4; sticky: true"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns4;"></tr>
                                    </table>
                                    <div *ngIf="dataSource4.filteredData.length == 0 && dataSource4.filteredData.length == 0" class="d-flex flex-column align-items-center">
                                        <img class="width400" src="assets/images/svg/clients-img.svg">
                                        <h4 class="text-center pt-12">{{noData}}</h4>
                                        <button mat-stroked-button class="btn-primary proximaFont addon v-middle" (click)="openExpenses('addBudget', null)"> ADD NEW
                                        </button>
                                    </div>
                                </div>

                                <h5 class="m-0 text-black" *ngIf="dataSource5.filteredData.length > 0"> Other commitments
                                </h5>

                                <div class="example-container mt-8 mb-24 fixed-DEPOSIT">
                                    <table matSort *ngIf="dataSource5.filteredData.length > 0" mat-table [dataSource]="dataSource5" id="table-low" class="skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoading">
                                        <ng-container matColumnDef="no">
                                            <th mat-header-cell *matHeaderCellDef class="br t-2"> No </th>
                                            <td mat-cell *matCellDef="let element;  let i = index;" class="br t-2">
                                                <div [ngClass]="{'bar': isLoading}"> {{isLoading ? '' : i + 1 }} </div>

                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="expense">
                                            <th mat-sort-header="expenseType" mat-header-cell *matHeaderCellDef class="br t-26"> Category </th>
                                            <td mat-cell *matCellDef="let element" class="br t-26">
                                                <div [ngClass]="{'bar': isLoading}">
                                                    {{isLoading ? '' : element.expenseType}}
                                                </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="budget">
                                            <th mat-sort-header="amount" mat-header-cell *matHeaderCellDef class="br t-10 text-right"> Budget
                                            </th>
                                            <td mat-cell *matCellDef="let element" class="br t-10 text-right">
                                                <div [ngClass]="{'bar': isLoading}">
                                                    {{!isLoading && element.amount? "₹" : ""}}<span appFormatNumber>{{(isLoading) ? '' :  (element.amount ? element.amount : '-')}}</span>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="progress">
                                            <th mat-header-cell *matHeaderCellDef class="br "> Progress </th>
                                            <td mat-cell *matCellDef="let element" class="br">
                                                <div [ngClass]="{'bar': isLoading}">
                                                    <mat-progress-bar *ngIf="isLoading==false" mode="determinate" value="40"></mat-progress-bar>
                                                    <span *ngIf="isLoading">{{''}}</span>

                                                </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="spent">
                                            <th mat-sort-header="spent" mat-header-cell *matHeaderCellDef class="br text-right"> Spent </th>
                                            <td mat-cell *matCellDef="let element" class="br text-right">

                                                <div [ngClass]="{'bar': isLoading}">
                                                    {{!isLoading && element.spent ? "₹" : ""}}<span appFormatNumber>{{isLoading ? '' : (element.spent ? element.spent : '-')}}</span>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="icons">
                                            <th mat-header-cell *matHeaderCellDef class="t-2"> </th>
                                            <td mat-cell *matCellDef="let element" [matMenuTriggerFor]="menu4" class="c-p text-center">
                                                <div [ngClass]="{'bar': isLoading}">
                                                    <!-- <i *ngIf="isLoading==false"
                                                        class="material-icons c-p text-black"
                                                        [matMenuTriggerFor]="menu4">more_vert</i> -->
                                                    <img *ngIf="!isLoading" class="c-p" src="/assets/images/svg/dot-menu.svg">
                                                    <mat-menu #menu4="matMenu">
                                                        <button mat-menu-item (click)="element.isRecuring = true;openExpenses('editBudget',element)">Edit</button>
                                                        <button mat-menu-item (click)="detailedViewExpense(element,'Other commitments')">Detailed
                                                            view</button>
                                                        <!-- <button mat-menu-item>Activity</button> -->
                                                        <button mat-menu-item (click)="deleteModal('budgetRecuring',element)">Delete</button>
                                                    </mat-menu>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="displayedColumns4; sticky: true"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns4;"></tr>
                                    </table>
                                </div>

                            </div>
                            <div class="col-md-5 p-0 ">
                                <div class="text-center">
                                    <div class="highcharts-figure" id="bugetChart"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!--------------------------------------------------------PDF------------------------------------------------------>

<!-----------------------------------TRANSACTION AN OTHER Commitmments----------------------------------------------->
<div #transactionExpens id="template" class="hide" *ngIf="viewMode == 'Transactions'">
    <table style="width: 100%;border-collapse: collapse;font-family: Roboto,sans-serif;">

        <tr>
            <td colspan="11">
                <table style="width: 100%;">
                    <tr>
                        <td style="vertical-align: top;">
                            <img style="width: 300px;" *ngIf="getOrgData" [src]="getOrgData.reportLogoUrl">
                        </td>
                        <td>
                            <table style="float: right;">
                                <tr *ngIf="userInfo">
                                    <td colspan="2" style="font-weight: 600; font-size: 20px; text-align: right;">
                                        {{(userInfo.name) ? userInfo.name : '-'}}
                                    </td>
                                </tr>
                                <tr *ngIf="userInfo">
                                    <td style="font-size: 14px; text-align: right;">
                                        <span style="font-weight: 500;"> Mobile no:</span> {{(userInfo.mobileList?.length > 0) ? userInfo.mobileList[0].mobileNo : '-'}}
                                    </td>
                                </tr>

                                <tr *ngIf="userInfo">
                                    <td style="font-size: 14px; text-align: right;">
                                        <span style="font-weight: 500;">Email Id:</span> {{(details) ? details.emailId : '-'}}
                                    </td>
                                </tr>

                                <tr>

                                    <td style="font-size: 14px; text-align: right;">
                                        <span style="font-weight: 500;">Report as on:</span> {{reportDate | date:'dd-MMM-yyyy' }}
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <tr>
            <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Transactions & Recurring commitments</td>
        </tr>
        <tr>
            <td colspan="11">
                <p style="margin: 0px; font-weight: 600;font-size: 14px;padding-top: 10px; padding-bottom: 10px;" *ngIf="clientData">
                    Client name: {{(clientData.name) ? clientData.name : '-'}}</p>
            </td>
        </tr>
        <tr>
            <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Transactions</td>
        </tr>
        <tr style="background-color: #F5F7F7;height: 40px;border: 1px solid #DADCE0;" *ngIf="dataSource.data.length > 0">
            <!-- <tr>
                <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                    Transactions </td>
            </tr> -->
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                No. </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Category</td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Date </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Description </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Mode </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Amount </td>


        </tr>
        <tr style="border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;" *ngFor="let item of dataSource.data ;index as i">
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{i + 1}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{item.expenseType}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{item.expenseDoneOn | date:'dd/MM/yyyy'}}
            </td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;">
                {{(item.description)?item.description:'-'}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;" appFormatNumber>
                {{(item.paymentModeId == 2)? 'Debit card':(item.paymentModeId == 1)? 'Credit card':'-'}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;" appFormatNumber>{{item.amount}}</td>


        </tr>
        <tr *ngIf="dataSource.data.length == 0">
            <td style="text-align: center;text-align: center; padding-top: 12px !important;padding-bottom: 12px !important;line-height: 16px !important;font-size: 14px;border-left: 1px solid #DADCE0;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;font-family: Roboto,sans-serif;"
                colspan="9">
                No data found
            </td>
        </tr>
        <tr>
            <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Recurring commitments</td>
        </tr>
        <tr style="background-color: #F5F7F7;height: 40px;border: 1px solid #DADCE0;" *ngIf="dataSource1.data.length > 0">
            <!-- <tr>
                <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                    Other commitments </td>
            </tr> -->
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                No. </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Category</td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Date </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Description </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Mode </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Amount </td>


        </tr>
        <tr style="border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;" *ngFor="let item of dataSource1.data ;index as i">
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{i + 1}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{item.expenseType}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{item.expenseDoneOn | date:'dd/MM/yyyy'}}
            </td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;">
                {{(item.description)?item.description:'-'}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;" appFormatNumber>
                {{(item.paymentModeId == 2)? 'Debit card':(item.paymentModeId == 1)? 'Credit card':'-'}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;" appFormatNumber>{{item.amount}}</td>


        </tr>
        <tr *ngIf="dataSource1.data.length == 0">
            <td style="text-align: center;text-align: center; padding-top: 12px !important;padding-bottom: 12px !important;line-height: 16px !important;font-size: 14px;border-left: 1px solid #DADCE0;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;font-family: Roboto,sans-serif;"
                colspan="9">
                No data found
            </td>
        </tr>
    </table>
</div>
<!-----------------------------------------BUDGETS AND OTHER COMMITMMENTS------------------------------------->


<div #transactionExpens id="template2" class="hide" *ngIf="viewMode == 'Budget'">
    <table style="width: 100%;border-collapse: collapse;font-family: Roboto,sans-serif;">

        <tr>
            <td colspan="11">
                <table style="width: 100%;">
                    <tr>
                        <td style="vertical-align: top;">
                            <img style="width: 300px;" *ngIf="getOrgData" [src]="getOrgData.reportLogoUrl">
                        </td>
                        <td>
                            <table style="float: right;">
                                <tr *ngIf="userInfo">
                                    <td colspan="2" style="font-weight: 600; font-size: 20px; text-align: right;">
                                        {{(userInfo.name) ? userInfo.name : '-'}}
                                    </td>
                                </tr>
                                <tr *ngIf="userInfo">
                                    <td style="font-size: 14px; text-align: right;">
                                        <span style="font-weight: 500;"> Mobile no:</span> {{(userInfo.mobileList?.length > 0) ? userInfo.mobileList[0].mobileNo : '-'}}
                                    </td>
                                </tr>

                                <tr *ngIf="userInfo">
                                    <td style="font-size: 14px; text-align: right;">
                                        <span style="font-weight: 500;">Email Id:</span> {{(details) ? details.emailId : '-'}}
                                    </td>
                                </tr>

                                <tr>

                                    <td style="font-size: 14px; text-align: right;">
                                        <span style="font-weight: 500;">Report as on:</span> {{reportDate | date:'dd-MMM-yyyy' }}
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <tr>
            <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Budget & Other commitments</td>
        </tr>
        <tr>
            <td colspan="11">
                <p style="margin: 0px; font-weight: 600;font-size: 14px;padding-top: 10px; padding-bottom: 10px;" *ngIf="clientData">
                    Client name: {{(clientData.name) ? clientData.name : '-'}}</p>
            </td>
        </tr>
        <tr>
            <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Budget</td>
        </tr>
        <tr style="background-color: #F5F7F7;height: 40px;border: 1px solid #DADCE0;" *ngIf="dataSource.data.length > 0">
            <!-- <tr>
                <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                    Transactions </td>
            </tr> -->
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                No. </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Category</td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Budget </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Progress </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Spent </td>


        </tr>
        <tr style="border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;" *ngFor="let item of dataSource4.data ;index as i">
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{i + 1}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{item.expenseType}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{item.amount}}
            </td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;" appFormatNumber>
                <mat-progress-bar mode="determinate" value="40" class="w-80"></mat-progress-bar>
            </td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;" appFormatNumber>{{item.spent}}</td>


        </tr>
        <tr *ngIf="dataSource4.data.length == 0">
            <td style="text-align: center;text-align: center; padding-top: 12px !important;padding-bottom: 12px !important;line-height: 16px !important;font-size: 14px;border-left: 1px solid #DADCE0;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;font-family: Roboto,sans-serif;"
                colspan="9">
                No data found
            </td>
        </tr>
        <tr>
            <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Other commitments</td>
        </tr>
        <tr style="background-color: #F5F7F7;height: 40px;border: 1px solid #DADCE0;" *ngIf="dataSource5.data.length > 0">
            <!-- <tr>
                <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                    Transactions </td>
            </tr> -->
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                No. </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Category</td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Budget </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Progress </td>
            <td style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                Spent </td>


        </tr>
        <tr style="border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;" *ngFor="let item of dataSource4.data ;index as i">
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{i + 1}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{item.expenseType}}</td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;">
                {{item.amount}}
            </td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;" appFormatNumber>
                <mat-progress-bar mode="determinate" value="40" class="w-80"></mat-progress-bar>
            </td>
            <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right;" appFormatNumber>{{item.spent}}</td>


        </tr>
        <tr *ngIf="dataSource5.data.length == 0">
            <td style="text-align: center;text-align: center; padding-top: 12px !important;padding-bottom: 12px !important;line-height: 16px !important;font-size: 14px;border-left: 1px solid #DADCE0;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;font-family: Roboto,sans-serif;"
                colspan="9">
                No data found
            </td>
        </tr>
    </table>
</div>