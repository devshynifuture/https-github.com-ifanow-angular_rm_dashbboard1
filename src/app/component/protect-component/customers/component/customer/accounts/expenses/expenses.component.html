<div id="ui-expenses" class="account_side-menu" [ngClass]="{'hide': finPlanObj?.hideForFinPlan}">
    <div class="row">
        <div class="col-md-12 p-0" [ngSwitch]="viewMode">
            <div [ngSwitch]="viewMode">
                <div class="wrapper-8">
                    <div class="row pt-28 pb-28">
                        <div class="col-md-4 pl-0">
                            <button mat-button
                                *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.transactions.enabled"
                                [ngClass]="{'mat-stroked-button': viewMode == 'Transactions','text-primary':viewMode == 'Transactions'}"
                                (click)="viewMode='Transactions';getBugetTab(viewMode)">Transactions</button>
                            <button mat-button
                                *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.transactions.enabled"
                                (click)="viewMode='Budget';getBugetTab(viewMode)"
                                [ngClass]="{'mat-stroked-button': viewMode == 'Budget','text-primary':viewMode == 'Budget'}">Budget</button>
                        </div>

                        <div class="col-md-8  d-flex align-items-center justify-content-end pr-0">

                            <mat-chip-list class="newDateIcon">
                                <mat-chip *ngFor="let dateFilter of filterDate; let i = index"
                                    class="bg-white b-a c-p f-400 p-12">
                                    {{startDateDisp}} - {{endDateDisp}}

                                </mat-chip>
                            </mat-chip-list>

                            <mat-form-field class="w-30 ml-16">
                                <mat-select class="form-control" (selectionChange)="addFilterPeriod($event)"
                                    [(value)]="selectedPeriod">
                                    <mat-option value="1">This month</mat-option>
                                    <mat-option value="2">Last month</mat-option>
                                    <mat-option value="3">This quarter</mat-option>
                                    <mat-option value="4">Last quarter</mat-option>
                                    <mat-option value="5">This calender year</mat-option>
                                    <mat-option value="6">Last calender year</mat-option>
                                    <mat-option value="7">This financial year</mat-option>
                                    <mat-option value="8">Last financial year</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>

                    <div>
                        <div *ngSwitchCase="'Transactions'">
                            <div class="row">
                                <div class="col-md-4 p-0"
                                    *ngIf="dataSource.data.length > 0 || dataSource1.data.length > 0">
                                    <h4 class="m-0 text-black roboto pt-8">Transactions</h4>
                                </div>
                                <div class="col-md-8 p-0 right text-right justify-content-end d-flex align-items-center"
                                    *ngIf="dataSource.data.length > 0">
                                    <!-- <button mat-stroked-button class="br-0 btn-sm p-0 min-52 text-custom">Help</button> -->
                                    <!-- <img src="assets/images/svg/download-bordered.svg" class="c-p"> -->
                                    <div class="pdfClass">

                                        <a class="c-p downloadPdfIcon mr-8" [matMenuTriggerFor]="menu1"
                                            *ngIf="!fragmentData.isSpinner && roleService.planPermission.subModule.profile.subModule.expenses.subModule.transactions.capabilityList.Download">
                                            <img src="assets/images/svg/download-bordered.svg">
                                        </a>

                                        <mat-menu #menu1="matMenu">
                                            <button mat-menu-item (click)="generatePdf('templateExpense')">PDF</button>
                                            <button (click)="Excel('Expenses','templateExpense')"
                                                mat-menu-item>XLS</button>
                                        </mat-menu>
                                        <mat-spinner [diameter]="30" *ngIf="fragmentData.isSpinner"></mat-spinner>
                                    </div>
                                    <div class="p-0 d-flex align-items-center justify-content-center mt-8">
                                        <mat-spinner *ngIf="isLoadingUpload==true" [diameter]="30"></mat-spinner>
                                    </div>

                                    <!-- <a class="c-p downloadPdfIcon iconBorderNone " [matMenuTriggerFor]="menu7">
                                        <img src="assets/images/svg/up-down.svg">
                                    </a>
                                    <mat-menu #menu7="matMenu">
                                        <button mat-menu-item>Upload file
                                            <input (change)="fetchData('Budget',$event)" class="uploadInput"
                                                id="file-4" multiple type="file">
                                        </button>
                                    </mat-menu> -->
                                    <!-- <img src="assets/images/svg/three-dot-bordered.svg" [matMenuTriggerFor]="menu"
                                        class="c-p mr-12">
                                    <mat-menu #menu="matMenu">
                                        <button mat-menu-item>Email report</button>
                                        <button mat-menu-item>Option 1</button>
                                        <button mat-menu-item>Option 2</button>
                                    </mat-menu> -->
                                    <!-- <img src="assets/images/svg/three-dot-bordered.svg" class="c-p mr-12"> -->
                                    <!-- <button mat-stroked-button class="btn-default addon mr-12 v-middle"><i
                                            class="material-icons">filter_list</i>FILTERS</button> -->
                                    <button
                                        *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.transactions.capabilityList.Add"
                                        class="ml-8" mat-stroked-button class="btn-primary"
                                        (click)="openExpenses('addExpenses',null)">
                                        ADD NEW</button>
                                </div>
                            </div>

                            <div class="row pt-12" *ngIf="dataSource.data.length > 0 ">
                                <div class="col-md-7 pl-0">
                                    <div class="example-container mb-24 transactions-table">
                                        <table matSort #Transaction="matSort" *ngIf="dataSource.data.length > 0"
                                            mat-table [dataSource]="dataSource" id="table-low" class="skeletonAnimation"
                                            appSkeletonLoading [appSkeletonLoading]="isLoading">
                                            <ng-container matColumnDef="no">
                                                <th mat-header-cell *matHeaderCellDef class="br"> No </th>
                                                <td mat-cell *matCellDef="let element let i = index;" class="br">
                                                    <div [ngClass]="{'bar': isLoading}"> {{isLoading ? '' : i + 1 }}
                                                    </div>
                                                </td>
                                                <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                            </ng-container>
                                            <ng-container matColumnDef="expense">
                                                <th mat-sort-header="expenseType" mat-header-cell *matHeaderCellDef
                                                    class="br"> Category </th>
                                                <td *matCellDef="let element" class="br" mat-cell>
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        {{isLoading ? '' : element.expenseType}}
                                                    </div>
                                                </td>
                                                <td *matFooterCellDef class="br pr-8 text-right f-600" mat-footer-cell>
                                                    <div class="bar"> {{isLoading ? '' : 'Total' }} </div>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="date">
                                                <th mat-sort-header="expenseDoneOn" mat-header-cell *matHeaderCellDef
                                                    class="br"> Date </th>
                                                <td mat-cell *matCellDef="let element" class="br">
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        {{isLoading ? '' : (element.continueTill ? (element.startsFrom | date:'dd/MM/yyyy') : (element.expenseDoneOn | date:'dd/MM/yyyy'))}}
                                                    </div>
                                                </td>
                                                <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                            </ng-container>
                                            <ng-container matColumnDef="desc">
                                                <th mat-sort-header="description" mat-header-cell *matHeaderCellDef
                                                    class="br"> Description </th>
                                                <td mat-cell *matCellDef="let element" class="br">
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        {{isLoading ? '' : (element.description ? element.description : '-')}}
                                                    </div>
                                                </td>
                                                <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                            </ng-container>
                                            <ng-container matColumnDef="mode">
                                                <th mat-sort-header="paymentModeId" mat-header-cell *matHeaderCellDef
                                                    class="br"> Mode </th>
                                                <td mat-cell *matCellDef="let element" class="br">
                                                    <div [ngClass]="{'bar': isLoading}" *ngIf="!isLoading">
                                                        {{(element.paymentModeId == 2)? 'Debit card':(element.paymentModeId == 1)? 'Credit card':'-'}}
                                                    </div>
                                                    <div [ngClass]="{'bar': isLoading}" *ngIf="isLoading">{{''}} </div>
                                                </td>
                                                <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                            </ng-container>
                                            <ng-container matColumnDef="amt">
                                                <th mat-sort-header="amount" class="text-right br right-hcb hide-arrow "
                                                    mat-header-cell *matHeaderCellDef> Amount </th>
                                                <td mat-cell *matCellDef="let element" class="br text-right">
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        {{!isLoading && element.totalAmount? "₹" : ""}}<span
                                                            appFormatNumber>{{isLoading ? '' : element.totalAmount }}</span>
                                                    </div>
                                                </td>
                                                <td mat-footer-cell *matFooterCellDef
                                                    class="br f-600 p-8 amt text-right">
                                                    <div>{{!isLoading && totalTransactionAmount!=0 ? '₹ ' : ''}}<span
                                                            [value]="totalTransactionAmount ? totalTransactionAmount : '-'"
                                                            appFormatNumber></span>
                                                    </div>
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="status">
                                                <th mat-sort-header="status" mat-header-cell *matHeaderCellDef
                                                    class="br"> Status </th>
                                                <td mat-cell *matCellDef="let element" class="br">
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        {{isLoading ? '' : element.status}}
                                                    </div>
                                                </td>
                                                <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                            </ng-container>
                                            <ng-container matColumnDef="icons">
                                                <th mat-header-cell *matHeaderCellDef class="t-2"> </th>
                                                <td mat-cell *matCellDef="let element" [matMenuTriggerFor]="menu4"
                                                    class="c-p text-center">
                                                    <div [ngClass]="{'bar': isLoading}">
                                                        <!-- <i *ngIf="isLoading==false"
                                                            class="material-icons c-p text-black"
                                                            [matMenuTriggerFor]="menu4">more_vert</i> -->
                                                        <img *ngIf="!isLoading" class="c-p"
                                                            src="/assets/images/svg/dot-menu.svg">
                                                        <mat-menu #menu4="matMenu">
                                                            <button
                                                                *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.transactions.capabilityList.Edit"
                                                                mat-menu-item
                                                                (click)="element.isRecuring = false;openExpenses('editExpenses',element)">Edit</button>
                                                            <button mat-menu-item
                                                                (click)="detailedViewExpense(element,'Transactions')">Detailed
                                                                view</button>
                                                            <button mat-menu-item>Upload file
                                                                <input (change)="fetchData('Budget',$event,element)"
                                                                    class="uploadInput" id="file-4" multiple
                                                                    type="file">
                                                            </button>
                                                            <!-- <button mat-menu-item>Activity</button> -->
                                                            <button
                                                                *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.transactions.capabilityList.Delete"
                                                                mat-menu-item
                                                                (click)="deleteModal('expense',element)">Delete</button>
                                                        </mat-menu>
                                                    </div>
                                                </td>
                                                <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                            </ng-container>
                                            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                            <tr mat-footer-row *matFooterRowDef="displayedColumns;sticky: true"
                                                [hidden]="isLoading"></tr>
                                        </table>

                                    </div>

                                    <div *ngIf="dataSource1.data.length > 0">
                                        <h5 class="m-0 text-black" *ngIf="dataSource1.filteredData.length > 0">Recurring
                                            commitments
                                        </h5>
                                        <div class="example-container mt-8 mb-24 other-commitments">
                                            <table matSort #recurringTransactionTab="matSort"
                                                *ngIf="dataSource1.filteredData.length > 0" mat-table
                                                [dataSource]="dataSource1" id="table-low" class="skeletonAnimation"
                                                appSkeletonLoading [appSkeletonLoading]="isLoading">
                                                <ng-container matColumnDef="no">
                                                    <th mat-header-cell *matHeaderCellDef class="br"> No </th>
                                                    <td mat-cell *matCellDef="let element; let i = index;" class="br">
                                                        <div [ngClass]="{'bar': isLoading}"> {{isLoading ? '' : i + 1 }}
                                                        </div>

                                                    </td>
                                                    <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                                </ng-container>
                                                <ng-container matColumnDef="expense">
                                                    <th mat-sort-header="expenseType" mat-header-cell *matHeaderCellDef
                                                        class="br"> Category
                                                    </th>
                                                    <td mat-cell *matCellDef="let element" class="br">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{isLoading ? '' : (element.name ? element.name : '-')}}
                                                        </div>
                                                    </td>
                                                    <td *matFooterCellDef class="br pr-8 text-right f-600"
                                                        mat-footer-cell>
                                                        <div class="bar"> {{isLoading ? '' : 'Total' }} </div>
                                                    </td>
                                                </ng-container>
                                                <ng-container matColumnDef="date">
                                                    <th mat-sort-header="startsFrom" mat-header-cell *matHeaderCellDef
                                                        class="br text-left">
                                                        Date </th>
                                                    <td mat-cell *matCellDef="let element" class="br text-left">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{isLoading ? '' : (element.startsFrom ? (element.startsFrom | date:'dd/MM/yyyy') : '-')}}
                                                        </div>
                                                    </td>
                                                    <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                                </ng-container>
                                                <ng-container matColumnDef="desc">
                                                    <th mat-sort-header="desc" mat-header-cell *matHeaderCellDef
                                                        class="br"> Description </th>
                                                    <td mat-cell *matCellDef="let element" class="br">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{isLoading ? '' : (element.description ? element.description : '-')}}
                                                        </div>
                                                    </td>
                                                    <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                                </ng-container>
                                                <ng-container matColumnDef="mode">
                                                    <th mat-sort-header="paymentModeId" mat-header-cell
                                                        *matHeaderCellDef class="br"> Mode </th>
                                                    <td mat-cell *matCellDef="let element" class="br">
                                                        <div [ngClass]="{'bar': isLoading}" *ngIf="!isLoading">
                                                            {{(element.paymentModeId == 2)? 'Debit card':(element.paymentModeId == 1)? 'Credit card':'-'}}
                                                        </div>
                                                        <div class="bar" *ngIf="isLoading">
                                                            {{''}}
                                                        </div>
                                                    </td>
                                                    <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                                </ng-container>
                                                <ng-container matColumnDef="amt">
                                                    <th mat-sort-header="monthlyContribution" mat-header-cell
                                                        *matHeaderCellDef class="br right-hcb hide-arrow text-right">
                                                        Amount
                                                    </th>
                                                    <td mat-cell *matCellDef="let element" class="br text-right">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{!isLoading && element.total? "₹" : ""}}<span
                                                                appFormatNumber
                                                                *ngIf="!isLoading">{{element.total ? element.total :'-'}}</span>
                                                        </div>
                                                    </td>
                                                    <td mat-footer-cell *matFooterCellDef
                                                        class="br f-600 p-8 amt text-right">
                                                        <div>{{!isLoading && totalRecurringAmount!=0 ? '₹ ' : ''}}<span
                                                                [value]="totalRecurringAmount ? totalRecurringAmount : '-'"
                                                                appFormatNumber></span>
                                                        </div>
                                                    </td>
                                                </ng-container>
                                                <!-- <ng-container matColumnDef="status">
                                                    <th mat-sort-header="status" mat-header-cell *matHeaderCellDef class="br"> Status </th>
                                                    <td mat-cell *matCellDef="let element" class="br">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            {{isLoading ? '' : element.status}}
                                                        </div>
                                                    </td>
                                                </ng-container> -->
                                                <ng-container matColumnDef="icons">
                                                    <th mat-header-cell *matHeaderCellDef class="t-2"> </th>
                                                    <td mat-cell *matCellDef="let element" [matMenuTriggerFor]="menu4"
                                                        class="c-p text-center">
                                                        <div [ngClass]="{'bar': isLoading}">
                                                            <img *ngIf="!isLoading" class="c-p"
                                                                src="/assets/images/svg/dot-menu.svg">
                                                            <mat-menu #menu4="matMenu">
                                                                <!-- <button mat-menu-item (click)="element.isRecuring = true;openExpenses('editExpenses',element)">Edit</button> -->
                                                                <button mat-menu-item
                                                                    (click)="detailedViewRecurring(element,'Recurring commitments')">Detailed
                                                                    view</button>
                                                                <!-- <button mat-menu-item (click)="deleteModal('expenseRecuring',element)">Delete</button> -->
                                                            </mat-menu>
                                                        </div>
                                                    </td>
                                                    <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                                </ng-container>
                                                <tr mat-header-row *matHeaderRowDef="displayedColumns1; sticky: true">
                                                </tr>
                                                <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
                                                <tr mat-footer-row *matFooterRowDef="displayedColumns1;sticky: true"
                                                    [hidden]="isLoading"></tr>
                                            </table>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-5 pr-8 b-a">
                                    <div class="text-center">
                                        <div class="highcharts-figure" id="piechartExpense"></div>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-12">
                                    <div *ngIf="dataSource.data.length == 0 "
                                        class="d-flex flex-column align-items-center">
                                        <img class="width400" src="assets/images/svg/clients-img.svg">
                                        <h4 class="text-center pt-12">No expense found</h4>
                                        <button
                                            *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.transactions.capabilityList.Add"
                                            mat-stroked-button class="btn-primary proximaFont addon v-middle"
                                            (click)="openExpenses('addExpenses',null)"> ADD NEW
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- <div *ngIf="dataSource.data.length == 0 " class="d-flex flex-column align-items-center">
                                <img class="width400" src="assets/images/svg/clients-img.svg">
                                <h4 class="text-center pt-12">{{noData}}</h4>
                                <button mat-stroked-button class="btn-primary proximaFont addon v-middle" (click)="openExpenses('addExpenses',null)"> ADD NEW
                                </button>
                            </div> -->
                        </div>
                    </div>
                    <!--- Budget --->
                    <div *ngSwitchCase="'Budget'">
                        <div class="row">
                            <div class="col-md-4 p-0"
                                *ngIf="dataSource4.data.length > 0 || dataSource5.data.length > 0">
                                <h4 class="m-0 text-black roboto pt-8">Budget</h4>
                            </div>
                            <div class="col-md-8 p-0 right text-right justify-content-end d-flex align-items-center"
                                *ngIf="dataSource4.data.length > 0 || dataSource5.data.length > 0">
                                <!-- <button mat-stroked-button class="br-0 btn-sm p-0 min-52 text-custom">Help</button> -->
                                <!-- <img src="assets/images/svg/download-bordered.svg" class="c-p"> -->
                                <div class="pdfClass ">

                                    <a class="c-p downloadPdfIcon mr-8" [matMenuTriggerFor]="menu2"
                                        *ngIf="!fragmentData.isSpinner && roleService.planPermission.subModule.profile.subModule.expenses.subModule.budgets.capabilityList.Download">
                                        <img src="assets/images/svg/download-bordered.svg">
                                    </a>

                                    <mat-menu #menu2="matMenu">
                                        <button mat-menu-item (click)="generatePdf('template2')">PDF</button>
                                        <button (click)="Excel('Expenses','template2')" mat-menu-item>XLS</button>
                                    </mat-menu>
                                    <mat-spinner [diameter]="30" *ngIf="fragmentData.isSpinner"></mat-spinner>
                                </div>
                                <div class="p-0 d-flex align-items-center justify-content-center mt-8">
                                    <mat-spinner *ngIf="isLoadingUpload==true" [diameter]="30"></mat-spinner>
                                </div>

                                <!-- <a class="c-p downloadPdfIcon iconBorderNone" [matMenuTriggerFor]="menu7">
                                    <img src="assets/images/svg/up-down.svg">
                                </a>
                                <mat-menu #menu7="matMenu">
                                    <button mat-menu-item>Upload file
                                        <input (change)="fetchData('Budget',$event)" class="uploadInput" id="file-4"
                                            multiple type="file">
                                    </button>
                                </mat-menu>
                                <img src="assets/images/svg/three-dot-bordered.svg" [matMenuTriggerFor]="menu"
                                    class="c-p mr-12">
                                <mat-menu #menu="matMenu">
                                    <button mat-menu-item>Email report</button>
                                    <button mat-menu-item>Option 1</button>
                                    <button mat-menu-item>Option 2</button>
                                </mat-menu> -->
                                <!-- <img src="assets/images/svg/three-dot-bordered.svg" class="c-p mr-12"> -->
                                <!-- <button mat-stroked-button class="btn-default addon mr-12 v-middle">
                                    <i class="material-icons">filter_list</i>
                                    FILTERS
                                </button> -->
                                <button
                                    *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.budgets.capabilityList.Add"
                                    mat-stroked-button class="btn-primary addon v-middle"
                                    (click)="openExpenses('addBudget', null)">
                                    <i class="material-icons">add</i>
                                    ADD NEW
                                </button>
                            </div>
                        </div>

                        <div class="row pt-12" *ngIf="dataSource4.filteredData.length > 0">
                            <div class="col-md-7 pl-0 budget">
                                <div class="example-container  mb-24 fixed-DEPOSIT">
                                    <table matSort #Budget="matSort" *ngIf="dataSource4.filteredData.length > 0"
                                        mat-table [dataSource]="dataSource4" id="table-low" class="skeletonAnimation"
                                        appSkeletonLoading [appSkeletonLoading]="isLoadingBudget">
                                        <ng-container matColumnDef="no">
                                            <th mat-header-cell *matHeaderCellDef class="br t-2"> No </th>
                                            <td mat-cell *matCellDef="let element;  let i = index;" class="br t-2">
                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    {{isLoadingBudget ? '' : i + 1 }} </div>
                                            </td>
                                            <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                        </ng-container>
                                        <ng-container matColumnDef="expense">
                                            <th mat-sort-header="expenseType" mat-sort-header="expenseType"
                                                mat-header-cell *matHeaderCellDef class="br t-26"> Category </th>
                                            <td mat-cell *matCellDef="let element" class="br t-26">
                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    {{isLoadingBudget ? '' : element.expenseType}}
                                                </div>
                                            </td>
                                            <td *matFooterCellDef class="br pr-8 text-right f-600" mat-footer-cell>
                                                <div class="bar"> {{isLoading ? '' : 'Total' }} </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="budget">
                                            <th mat-sort-header="amount" mat-header-cell *matHeaderCellDef
                                                class="br t-10 text-right"> Budget
                                            </th>
                                            <td mat-cell *matCellDef="let element" class="br t-10 text-right">

                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    {{!isLoadingBudget && element.totalAmount? "₹" : ""}}<span
                                                        appFormatNumber>{{(isLoadingBudget) ? '' :  (element.totalAmount ? element.totalAmount : '-') }}</span>
                                                </div>
                                            </td>
                                            <td mat-footer-cell *matFooterCellDef class="br f-600 p-8 amt text-right">
                                                <div>{{!isLoading && totalBudget!=0 ? '₹ ' : ''}}<span
                                                        [value]="totalBudget ? totalBudget : '-'"
                                                        appFormatNumber></span>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="progress">
                                            <th mat-header-cell *matHeaderCellDef class="br "> Progress </th>
                                            <td mat-cell *matCellDef="let element" class="br">
                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    <div class="row">
                                                        <mat-progress-bar *ngIf="isLoadingBudget==false"
                                                            [matTooltip]="element.spentPer+'%'" mode="determinate"
                                                            [value]="element.spentPer"
                                                            [ngStyle]="{'width':element.progressPercent > 100 ? '70%' : '100%' }">
                                                        </mat-progress-bar>
                                                        <mat-progress-bar
                                                            *ngIf="isLoadingBudget==false && element.progressPercent > 100 "
                                                            [matTooltip]="element.budgetPer+'%'" mode="determinate"
                                                            [value]="100" class="w-30 style1">
                                                        </mat-progress-bar>
                                                    </div>

                                                    <!-- <mat-progress-bar *ngIf="isLoading==false"
                                                        [matTooltip]="element.progressPercent > 100 ? ('Spent :'+element.spentPer+' % ' + ' Budget :'+element.budgetPer+' %') : ('Spent :'+element.spentPer+'%')" mode="determinate"
                                                        [value]="element.progressPercent" class="w-80">
                                                    </mat-progress-bar> -->
                                                    <!-- <div fxLayout="row" fxLayoutGap="3px" style="width: 100%">
                                                        <div fxFlex="15" class="div1"></div>
                                                        <div fxFlex="30" class="div2"></div>
                                                      </div> -->
                                                    <span *ngIf="isLoadingBudget">{{''}}</span>
                                                </div>
                                            </td>
                                            <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                        </ng-container>
                                        <ng-container matColumnDef="spent">
                                            <th mat-sort-header="spent" mat-header-cell *matHeaderCellDef
                                                class="br text-right right-hcb hide-arrow"> Spent </th>
                                            <td mat-cell *matCellDef="let element" class="br text-right">

                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    {{!isLoadingBudget && element.spent ? "₹" : ""}}<span
                                                        appFormatNumber>{{isLoadingBudget ? '' : (element.spent ? element.spent  : '-')}}</span>
                                                </div>
                                            </td>
                                            <td mat-footer-cell *matFooterCellDef class="br f-600 p-8 amt text-right">
                                                <div>{{!isLoading && totalBudgetAmount!=0 ? '₹ ' : ''}}<span
                                                        [value]="totalBudgetAmount ? totalBudgetAmount : '-'"
                                                        appFormatNumber></span>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="icons">
                                            <th mat-header-cell *matHeaderCellDef class="t-2"> </th>
                                            <td mat-cell *matCellDef="let element" [matMenuTriggerFor]="menu4"
                                                class="c-p text-center">
                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    <!-- <i *ngIf="isLoading==false"
                                                        class="material-icons c-p text-black"
                                                        [matMenuTriggerFor]="menu4">more_vert</i> -->
                                                    <img *ngIf="!isLoadingBudget" class="c-p"
                                                        src="/assets/images/svg/dot-menu.svg">
                                                    <mat-menu #menu4="matMenu">
                                                        <button
                                                            *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.budgets.capabilityList.Edit"
                                                            mat-menu-item
                                                            (click)="element.isRecuring = false;openExpenses('editBudget',element)">Edit</button>
                                                        <button mat-menu-item
                                                            (click)="detailedViewExpense(element,'Budget')">Detailed
                                                            view</button>
                                                        <button mat-menu-item>Upload file
                                                            <input (change)="fetchData('Budget',$event,element)"
                                                                class="uploadInput" id="file-4" multiple type="file">
                                                        </button>
                                                        <!-- <button mat-menu-item>Activity</button> -->
                                                        <button
                                                            *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.budgets.capabilityList.Delete"
                                                            mat-menu-item
                                                            (click)="deleteModal('budget',element)">Delete</button>
                                                    </mat-menu>
                                                </div>
                                            </td>
                                            <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="displayedColumns4; sticky: true"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns4;"></tr>
                                        <tr mat-footer-row *matFooterRowDef="displayedColumns4;sticky: true"
                                            [hidden]="isLoadingBudget"></tr>
                                    </table>
                                </div>

                                <h5 class="m-0 text-black" *ngIf="dataSource5.filteredData.length > 0"> Other
                                    commitments
                                </h5>

                                <div class="example-container mt-8 mb-24 fixed-DEPOSIT">
                                    <table matSort #recurringBudget="matSort"
                                        *ngIf="dataSource5.filteredData.length > 0" mat-table [dataSource]="dataSource5"
                                        id="table-low" class="skeletonAnimation" appSkeletonLoading
                                        [appSkeletonLoading]="isLoadingBudget">
                                        <ng-container matColumnDef="no">
                                            <th mat-header-cell *matHeaderCellDef class="br t-2"> No </th>
                                            <td mat-cell *matCellDef="let element;  let i = index;" class="br t-2">
                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    {{isLoadingBudget ? '' : i + 1 }} </div>

                                            </td>
                                            <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                        </ng-container>
                                        <ng-container matColumnDef="expense">
                                            <th mat-sort-header="expenseType" mat-header-cell *matHeaderCellDef
                                                class="br t-26"> Category </th>
                                            <td mat-cell *matCellDef="let element" class="br t-26">
                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    {{isLoadingBudget ? '' : (element.name ? element.name : '-')}}
                                                </div>
                                            </td>
                                            <td *matFooterCellDef class="br pr-8 text-right f-600" mat-footer-cell>
                                                <div class="bar"> {{isLoading ? '' : 'Total' }} </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="budget">
                                            <th mat-sort-header="amount" mat-header-cell *matHeaderCellDef
                                                class="br t-10 text-right"> Budget
                                            </th>
                                            <td mat-cell *matCellDef="let element" class="br t-10 text-right">
                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    {{!isLoadingBudget && element.total? "₹" : ""}}<span appFormatNumber
                                                        *ngIf="!isLoadingBudget">{{element.total ? element.total :'-'}}</span>
                                                </div>
                                            </td>
                                            <td mat-footer-cell *matFooterCellDef class="br f-600 p-8 amt text-right">
                                                <div>{{!isLoading && totalbudegtRecurring!=0 ? '₹ ' : ''}}<span
                                                        [value]="totalbudegtRecurring ? totalbudegtRecurring : '-'"
                                                        appFormatNumber></span>
                                                </div>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="progress">
                                            <th mat-header-cell *matHeaderCellDef class="br "> Progress </th>
                                            <td mat-cell *matCellDef="let element" class="br">
                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    <div class="row">
                                                        <mat-progress-bar *ngIf="isLoadingBudget==false"
                                                            [matTooltip]="element.spentPerOther+'%'" mode="determinate"
                                                            [value]="element.spentPerOther"
                                                            [ngStyle]="{'width':element.progressPercentOther > 100 ? '70%' : '100%' }">
                                                            <!-- [ngClass]="{'w-50': element.progressPercentOther > 100,'w-100': element.progressPercentOther < 100}" -->
                                                        </mat-progress-bar>
                                                        <mat-progress-bar
                                                            *ngIf="isLoadingBudget==false && element.progressPercentOther > 100 "
                                                            [matTooltip]="element.budgetPerOther+'%'" mode="determinate"
                                                            [value]="100" class="w-30 style1">
                                                        </mat-progress-bar>
                                                    </div>
                                                    <span *ngIf="isLoadingBudget">{{''}}</span>

                                                </div>
                                            </td>
                                            <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                        </ng-container>
                                        <ng-container matColumnDef="spent">
                                            <th mat-sort-header="spent" mat-header-cell *matHeaderCellDef
                                                class="br text-right right-hcb hide-arrow"> Spent </th>
                                            <td mat-cell *matCellDef="let element" class="br text-right">

                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    {{!isLoadingBudget && element.total? "₹" : ""}}<span appFormatNumber
                                                        *ngIf="!isLoadingBudget">{{element.total ? element.total :'-'}}</span>
                                                </div>
                                            </td>
                                            <td mat-footer-cell *matFooterCellDef class="br f-600 p-8 amt text-right">
                                                <div>{{!isLoading && totalbudegtRecurring!=0 ? '₹ ' : ''}}<span
                                                        [value]="totalbudegtRecurring ? totalbudegtRecurring : '-'"
                                                        appFormatNumber></span>
                                                </div>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="icons">
                                            <th mat-header-cell *matHeaderCellDef class="t-2"> </th>
                                            <td mat-cell *matCellDef="let element" [matMenuTriggerFor]="menu4"
                                                class="c-p text-center">
                                                <div [ngClass]="{'bar': isLoadingBudget}">
                                                    <!-- <i *ngIf="isLoading==false"
                                                        class="material-icons c-p text-black"
                                                        [matMenuTriggerFor]="menu4">more_vert</i> -->
                                                    <img *ngIf="!isLoadingBudget" class="c-p"
                                                        src="/assets/images/svg/dot-menu.svg">
                                                    <mat-menu #menu4="matMenu">
                                                        <button mat-menu-item
                                                            (click)="detailedViewRecurring(element,'Recurring commitments')">Detailed
                                                            view</button>
                                                    </mat-menu>
                                                </div>
                                            </td>
                                            <td *matFooterCellDef class="br text-right " mat-footer-cell></td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="displayedColumns5; sticky: true"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns5;"></tr>
                                        <tr mat-footer-row *matFooterRowDef="displayedColumns5;sticky: true"
                                            [hidden]="isLoadingBudget"></tr>
                                    </table>
                                </div>

                            </div>
                            <div class="col-md-5 p-0 ">
                                <div class="text-center">
                                    <div class="highcharts-figure" id="bugetChart"></div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="dataSource4.filteredData.length == 0 && dataSource4.filteredData.length == 0"
                            class="d-flex flex-column align-items-center">
                            <img class="width400" src="assets/images/svg/clients-img.svg">
                            <h4 class="text-center pt-12">No budget found</h4>
                            <button
                                *ngIf="roleService.planPermission.subModule.profile.subModule.expenses.subModule.budgets.capabilityList.Add"
                                mat-stroked-button class="btn-primary proximaFont addon v-middle"
                                (click)="openExpenses('addBudget', null)"> ADD NEW
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!--------------------------------------------------------PDF------------------------------------------------------>

<!-----------------------------------TRANSACTION AN OTHER Commitmments----------------------------------------------->


<!-- <div #transactionExpens id="templateExpense" class="hide" *ngIf="viewMode == 'Transactions'"> -->

<div #transactionExpens id="templateExpense" class="hide" *ngIf="viewMode == 'Transactions'">
    <html>
    <meta charset="UTF-8">
    <table style="width: 100%;border-collapse: collapse;font-family: Roboto,sans-serif;">

        <tr>
            <td>
                <table style="width: 100%;">
                    <tr>
                        <td style="text-align: left; vertical-align: top; width: 50%;" *ngIf="getOrgData">
                            <div style="width: 200px;"
                                *ngIf="getOrgData && getOrgData.reportLogoUrl != null && getOrgData.reportLogoUrl !='https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png' ">
                                <img style="max-width: 100%;" *ngIf="getOrgData" [src]="getOrgData.reportLogoUrl">
                            </div>
                            <div style="width: 200px;"
                                *ngIf="getOrgData && getOrgData.logoUrl != 'https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png' && getOrgData.reportLogoUrl == 'https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png'">
                                <img style="max-width: 100%;" *ngIf="getOrgData" [src]="getOrgData.logoUrl">
                            </div>
                            <div
                                *ngIf="getOrgData.logoUrl == 'https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png' && getOrgData.reportLogoUrl == 'https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png'">
                                <span width="200px" style="font-size: 25px;">{{getOrgData.companyName}}</span>
                            </div>
                        </td>
                        <td style=" text-align: right; width: 50%;">
                            <p style="margin: 0px; font-weight: 600; font-size: 20px;padding-top: 12px;"
                                *ngIf="userInfo">
                                {{(getOrgData.companyName) ? getOrgData.companyName : '-'}}</p>
                            <p style="margin: 0px; font-size: 14px;padding-top: 12px;" *ngIf="userInfo"> <strong>
                                    Number: </strong>
                                {{(userInfo.mobileList?.length > 0) ? userInfo.mobileList[0].mobileNo : userInfo.mobile}}
                            </p>
                            <p style="margin: 0px; font-size: 14px;padding-top: 12px;" *ngIf="userInfo"> <strong> Email:
                                </strong>
                                {{getOrgData.email ? getOrgData.email  : userInfo.email}}</p>

                            <p style="margin: 0px; font-size: 14px; margin-bottom: 5px;padding-top: 12px;"> <strong>
                                    Report as on:
                                    {{reportDate | date:'dd-MMM-yyyy' }}</strong>
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>



        <tr>
            <td style="padding: 10px;"></td>
        </tr>

        <tr>
            <td
                style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Transactions & Recurring
                commitments({{selectedPeriod == '1' ? 'This month' : selectedPeriod == '2' ? 'Last month' : selectedPeriod == '3' ? 'This quarter' : selectedPeriod == '4' ? 'Last quarter' : selectedPeriod == '5' ? 'This calender year' : selectedPeriod == '6' ? 'Last calender year' : selectedPeriod == '7' ? 'This financial year' : selectedPeriod == '8' ? 'Last financial year' :''}})
            </td>
        </tr>

        <tr>
            <td>
                <p style="margin: 0px; font-weight: 600;font-size: 14px;padding-top: 10px; padding-bottom: 10px;"
                    *ngIf="clientData">
                    Client name: {{(clientData.name) ? clientData.name : '-'}}</p>
            </td>
        </tr>

        <tr>
            <td
                style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Transactions</td>
        </tr>

        <tr *ngIf="dataSource.data.length > 0">
            <td>
                <table style="width: 100%;">
                    <tr style="background-color: #F5F7F7;height: 40px;border: 1px solid #DADCE0;">
                        <!-- <tr>
                        <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                            Transactions </td>
                    </tr> -->
                        <th
                            style="width: 5%; padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; border-left: 1px solid #DADCE0; text-align: left;">
                            No. </th>
                        <th
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            Category</th>
                        <th
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            Date </th>
                        <th
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            Description </th>
                        <th
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            Mode </th>
                        <th
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; text-align: right; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">
                            Amount </th>

                    </tr>

                    <tr style="border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;"
                        *ngFor="let item of dataSource.data ;index as i">
                        <td
                            style=" width: 5%; padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; border-left: 1px solid #DADCE0;">
                            {{i + 1}}</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">
                            {{item.expenseType}}</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">
                            {{isLoading ? '' : (item.continueTill && item.continueTill ? (item.startsFrom | date:'dd/MM/yyyy') : (item.expenseDoneOn | date:'dd/MM/yyyy'))}}
                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{(item.description)?item.description:'-'}}</td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: left; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber>
                            {{(item.paymentModeId == 2)? 'Debit card':(item.paymentModeId == 1)? 'Credit card':'-'}}
                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && item.totalAmount? "₹" : ""}}<span
                                appFormatNumber>{{item.totalAmount ? item.totalAmount : '-'}}</span>
                        </td>
                    </tr>
                    <tr
                        style="font-weight: 700;border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;">
                        <td
                            style="padding: 7px 8px; border-left: 1px solid #DADCE0; font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">
                        </td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber>Total</td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber></td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber></td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && totalTransactionAmount ? "₹" : ""}}<span appFormatNumber
                                [value]="totalTransactionAmount">
                            </span>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>



        <tr *ngIf="dataSource.data.length == 0">
            <td>
                <table style="width: 100%;">
                    <tr>
                        <td style="text-align: center;text-align: center; padding-top: 12px !important;padding-bottom: 12px !important;line-height: 16px !important;font-size: 14px;border-left: 1px solid #DADCE0;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;font-family: Roboto,sans-serif;"
                            colspan="9">
                            No data found
                        </td>
                    </tr>
                </table>
            </td>
        </tr>




        <tr>
            <td
                style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Recurring commitments</td>
        </tr>

        <tr *ngIf="dataSource1.data.length > 0 && dataSource.data.length > 0">
            <td>
                <table style="width: 100%;">
                    <tr style="background-color: #F5F7F7;height: 40px;border: 1px solid #DADCE0;">
                        <!-- <tr>
                            <td colspan="9" style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                                Other commitments </td>
                        </tr> -->
                        <td
                            style=" width: 5%; padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left; border-left: 1px solid #DADCE0; ">
                            No. </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left; border-top: 1px solid #DADCE0;">
                            Category</td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left; border-top: 1px solid #DADCE0;">
                            Date </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left; border-top: 1px solid #DADCE0;">
                            Description </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left; border-top: 1px solid #DADCE0;">
                            Mode </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; text-align: right; border-bottom: 1px solid #DADCE0; border-top: 1px solid #DADCE0;">
                            Amount </td>

                    </tr>

                    <tr style="border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;"
                        *ngFor="let item of dataSource1.data ;index as i"
                        [ngStyle]="{'display': dataSource.data.length == 0 ? 'none' : ''}">
                        <td
                            style=" width: 5%; padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left; border-left: 1px solid #DADCE0; ">
                            {{i + 1}}</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            {{item.name ? item.name : '-'}}</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            {{item.expenseDoneOn ? (item.expenseDoneOn | date:'dd/MM/yyyy') : '-'}}
                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            {{(item.description)?item.description:'-'}}</td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;"
                            appFormatNumber>
                            {{(item.paymentModeId == 2)? 'Debit card':(item.paymentModeId == 1)? 'Credit card':'-'}}
                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && item.total? "₹" : ""}}<span
                                appFormatNumber>{{item.total ? item.total : '-'}}</span>
                        </td>


                    </tr>
                    <tr
                        style="font-weight: 700;border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;">
                        <td
                            style="padding: 7px 8px; border-left: 1px solid #DADCE0; font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">
                        </td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber>Total</td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber></td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber></td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && totalRecurringAmount ? "₹" : ""}}<span appFormatNumber
                                [value]="totalRecurringAmount">
                            </span>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>


        <tr *ngIf="dataSource.data.length == 0">
            <td>
                <table style="width: 100%;">
                    <tr>
                        <td style="text-align: center;text-align: center; padding-top: 12px !important;padding-bottom: 12px !important;line-height: 16px !important;font-size: 14px;border-left: 1px solid #DADCE0;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;font-family: Roboto,sans-serif;"
                            colspan="9">
                            No data found
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

    </table>

    </html>

</div>
<!-----------------------------------------BUDGETS AND OTHER COMMITMMENTS------------------------------------->

<div #budgetPdf id="template2" class="hide" *ngIf="viewMode == 'Budget'">
    <html>
    <meta charset="UTF-8">
    <table style="width: 100%;border-collapse: collapse;font-family: Roboto,sans-serif;">

        <tr>
            <td>
                <table style="width: 100%;">
                    <tr>
                        <td style="text-align: left; vertical-align: top; width: 50%;" *ngIf="getOrgData">
                            <div style="width: 200px;"
                                *ngIf="getOrgData && getOrgData.reportLogoUrl != null && getOrgData.reportLogoUrl !='https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png' ">
                                <img style="max-width: 100%;" *ngIf="getOrgData" [src]="getOrgData.reportLogoUrl">
                            </div>
                            <div style="width: 200px;"
                                *ngIf="getOrgData && getOrgData.logoUrl != 'https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png' && getOrgData.reportLogoUrl == 'https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png'">
                                <img style="max-width: 100%;" *ngIf="getOrgData" [src]="getOrgData.logoUrl">
                            </div>
                            <div
                                *ngIf="getOrgData.logoUrl == 'https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png' && getOrgData.reportLogoUrl == 'https://res.cloudinary.com/futurewise/image/upload/v1566029063/icons_fakfxf.png'">
                                <span width="200px" style="font-size: 25px;">{{getOrgData.companyName}}</span>
                            </div>
                        </td>
                        <td style=" text-align: right; width: 50%;">
                            <p style="margin: 0px; font-weight: 600; font-size: 20px;padding-top: 12px;"
                                *ngIf="userInfo">
                                {{(getOrgData.companyName) ? getOrgData.companyName : '-'}}</p>
                            <p style="margin: 0px; font-size: 14px;padding-top: 12px;" *ngIf="userInfo"> <strong>
                                    Number: </strong>
                                {{(userInfo.mobileList?.length > 0) ? userInfo.mobileList[0].mobileNo : userInfo.mobile}}
                            </p>
                            <p style="margin: 0px; font-size: 14px;padding-top: 12px;" *ngIf="userInfo"> <strong> Email:
                                </strong>
                                {{getOrgData.email ? getOrgData.email  : userInfo.email}}</p>

                            <p style="margin: 0px; font-size: 14px; margin-bottom: 5px;padding-top: 12px;"> <strong>
                                    Report as on:
                                    {{reportDate | date:'dd-MMM-yyyy' }}</strong>
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>



        <tr>
            <td style="padding: 10px;"></td>
        </tr>

        <tr>
            <td
                style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Budget & Other commitments
                ({{selectedPeriod == '1' ? 'This month' : selectedPeriod == '2' ? 'Last month' : selectedPeriod == '3' ? 'This quarter' : selectedPeriod == '4' ? 'Last quarter' : selectedPeriod == '5' ? 'This calender year' : selectedPeriod == '6' ? 'Last calender year' : selectedPeriod == '7' ? 'This financial year' : selectedPeriod == '8' ? 'Last financial year' :''}})
            </td>
        </tr>

        <tr>
            <td>
                <p style="margin: 0px; font-weight: 600;font-size: 14px;padding-top: 10px; padding-bottom: 10px;"
                    *ngIf="clientData">
                    Client name: {{(clientData.name) ? clientData.name : '-'}}</p>
            </td>
        </tr>

        <tr *ngIf="dataSource4.data.length == 0">
            <td
                style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Budget</td>
        </tr>


        <tr *ngIf="dataSource4.data.length > 0">
            <td>
                <table style="width: 100%;">
                    <tr style="background-color: #F5F7F7;height: 40px;border: 1px solid #DADCE0;">

                        <td
                            style="width: 5%; padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; border-top: 1px solid #DADCE0; text-align: left; border-left: 1px solid #DADCE0;  ">
                            No. </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; border-top: 1px solid #DADCE0; text-align: left; ">
                            Category</td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; border-top: 1px solid #DADCE0; text-align: right;">
                            Budget </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; border-top: 1px solid #DADCE0; text-align: left;">
                            Progress </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; border-top: 1px solid #DADCE0; text-align: right;">
                            Spent </td>

                    </tr>

                    <tr style="border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;"
                        *ngFor="let item of dataSource4.data ;index as i">
                        <td
                            style="width: 5%; padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; border-left: 1px solid #DADCE0;">
                            {{i + 1}}</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">
                            {{item.expenseType}}</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && item.totalAmount? "₹" : ""}}<span
                                appFormatNumber>{{item.totalAmount ? item.totalAmount : '-'}}</span>

                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">

                            <div *ngIf="item.progressPercent > 100">
                                <div
                                    style="background:#007bff ;height:5px;width: 70%; display: inline-block;float: left;">
                                </div>
                                <div
                                    style="background:#fd7e14 ;height:5px;width: 30%; display: inline-block;float: left;">
                                </div>
                            </div>

                            <div *ngIf="item.progressPercent <= 100">
                                <div style="background:rgb(192, 192, 192);width: 100%">
                                    <div style="background:#007bff ;height:5px;"
                                        [ngStyle]="{'width':item.spentPer+'%' }">
                                    </div>
                                </div>

                            </div>
                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && item.spent ? "₹" : ""}}<span
                                appFormatNumber>{{item.spent ? item.spent : '-'}}</span>
                        </td>


                    </tr>
                    <tr
                        style="font-weight: 700;border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;">
                        <td
                            style="padding: 7px 8px; border-left: 1px solid #DADCE0; font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">
                        </td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber>Total</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && totalBudget ? "₹" : ""}}<span appFormatNumber [value]="totalBudget">
                            </span>
                        </td>
                        <td
                            style="padding: 7px 8px; border-left: 1px solid #DADCE0; font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">
                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && totalBudgetAmount ? "₹" : ""}}<span appFormatNumber
                                [value]="totalBudgetAmount">
                            </span>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>





        <tr *ngIf="dataSource4.data.length == 0">
            <td style="text-align: center;text-align: center; padding-top: 12px !important;padding-bottom: 12px !important;line-height: 16px !important;font-size: 14px;border-left: 1px solid #DADCE0;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;font-family: Roboto,sans-serif;"
                colspan="9">
                No data found
            </td>
        </tr>

        <tr *ngIf="dataSource5.data.length > 0 && dataSource5.data.length > 0">
            <td
                style="font-size: 18px;line-height: 20px;color: #000000 !important;padding-top: 20px;padding-bottom: 20px;">
                Other commitments</td>
        </tr>


        <tr *ngIf="dataSource5.data.length > 0 && dataSource5.data.length > 0">
            <td>
                <table style="width: 100%;">
                    <tr style="background-color: #F5F7F7;height: 40px;border: 1px solid #DADCE0;">
                        <td
                            style="width: 5%; padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-left: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            No. </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            Category</td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: right;">
                            Budget </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;  border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            Progress </td>
                        <td
                            style="padding: 7px 8px;font-weight: 600;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-top: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: right; border-left: 1px solid #DADCE0;">
                            Spent </td>

                    </tr>
                    <tr style="border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;"
                        *ngFor="let item of dataSource5.data ;index as i"
                        [ngStyle]="{'display': dataSource4.data.length == 0 ? 'none' : ''}">
                        <td
                            style="width: 5%; padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-left: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            {{i + 1}}</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: left;">
                            {{item.name ? item.name : '-'}}</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0; text-align: right;">

                            {{!isLoading && item.total ? "₹" : ""}}<span
                                appFormatNumber>{{item.total ? item.total : '-'}}</span>
                        </td>
                        <td
                            style="display:flex;padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;text-align: left; border-bottom: 1px solid #DADCE0; ">

                            <div *ngIf="item.budgetPerOther > 100 ">
                                <div
                                    style="background:#007bff ;height:5px;width: 70%;display: inline-block;float: left;">

                                </div>
                                <div
                                    style="background:#fd7e14 ;height:5px;width: 30%;display: inline-block;float: left;">

                                </div>
                            </div>
                            <div *ngIf="item.progressPercentOther <= 100">
                                <div style="background:rgb(192, 192, 192);width: 100%">
                                    <div style="background:#007bff ;height:5px;"
                                        [ngStyle]="{'width':item.spentPerOther+'%' }">
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0; border-left: 1px solid #DADCE0;">
                            {{!isLoading && item.total ? "₹" : ""}}<span
                                appFormatNumber>{{item.total ? item.total : '-'}}</span>
                        </td>


                    </tr>
                    <tr
                        style="font-weight: 700;border-left: 1px solid #DADCE0;border-bottom: 1px solid #DADCE0;height: 40px !important;">
                        <td
                            style="padding: 7px 8px; border-left: 1px solid #DADCE0; font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;">
                        </td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber>Total</td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && totalbudegtRecurring ? "₹" : ""}}<span appFormatNumber
                                [value]="totalbudegtRecurring">
                            </span>
                        </td>
                        <td style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;"
                            appFormatNumber></td>
                        <td
                            style="padding: 7px 8px;font-size: 13px !important;line-height: 16px !important;color: #202020;border-right: 1px solid #DADCE0;text-align: right; border-bottom: 1px solid #DADCE0;">
                            {{!isLoading && totalbudegtRecurring ? "₹" : ""}}<span appFormatNumber
                                [value]="totalbudegtRecurring">
                            </span>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>





        <tr *ngIf="dataSource4.data.length == 0 ">
            <td
                style="text-align: center;text-align: center; padding-top: 12px !important;padding-bottom: 12px !important;line-height: 16px !important;font-size: 14px;border-left: 1px solid #DADCE0;border-right: 1px solid #DADCE0; border-bottom: 1px solid #DADCE0;font-family: Roboto,sans-serif;">
                No data found
            </td>
        </tr>
        <!-- <tr>
            <td style="width: 300px; text-align: center; border: 1px solid #dee5e7; border-right: transparent;">
                <div>showPieChart</div>
            </td>
        </tr> -->
    </table>

    </html>
</div>