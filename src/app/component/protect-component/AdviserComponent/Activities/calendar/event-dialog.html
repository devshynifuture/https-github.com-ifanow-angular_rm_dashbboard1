<div class="p-24" *ngIf="isEditAdd">
    <h1 mat-dialog-title class="m-0" *ngIf="!isEditable">Add New Event</h1>
    <h1 mat-dialog-title class="m-0" *ngIf="isEditable"><span style="font-size: 80px; color:#84BDF3; line-height: 0px;">.</span>Edit Event</h1>
    <div mat-dialog-content class="p-24">
        <form [formGroup]="eventForm">
            <h5 class="m-0 text-black">Title</h5>
            <div class="form-group">
                <mat-form-field>
                    <input matInput formControlName="title" class="form-control br-0">
                </mat-form-field>
            </div>
            <h5 class="m-0 mb-2 text-black">Description</h5>
            <app-froala [(model)]="eventData.description" (modelChange)="descriptionData($event)"></app-froala>

            <h5 class="m-0 mb-2 text-black" style="margin-top:-46px !important">Event address</h5>
            <div class="form-group">
                <mat-form-field>
                    <textarea matInput rows="4" formControlName="location" class="form-control p-8"></textarea>
                </mat-form-field>
            </div>
            <div class="pt-28">
                <div class="date-wrapper">
                    <div class="row">
                        <div class="col-md-3 pl-0">
                            <h5 class="m-0 f-12 
                    text-black ">Start date</h5>
                            <div class="form-group">
                                <mat-form-field class="date-input">
                                    <input (click)="picker.open()" (dateChange)="setEndDate()" readonly matInput formControlName="startDateTime" class="form-control"
                                       [value]="this.eventData.start.dateTime == undefined ? startDate : this.eventData.start.dateTime" [min]="startDate" [matDatepicker]="picker">
                                    <mat-datepicker-toggle matSuffix style="margin-top: -18px;" [for]="picker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-3 p-0" *ngIf="showTime">
                            <div class="row pl-0">
                                <div class="col-md-6 pl-0">
                                    <mat-form-field class="form-group">
                                        <h5 class="text-black f-12 " style="margin-bottom: 18px;">Start time</h5>
                                        <!-- <mat-label>Start time</mat-label> -->
                                        <select matNativeControl class="form-control" formControlName="startTime"
                                            (change)="setTime('start')">
                                            <option *ngFor="let time of timeArr" [value]="time">{{time}}</option>
                                        </select>

                                    </mat-form-field>
                                </div>
                                <div class="col-md-6 pl-0">
                                    <mat-form-field class="form-group">
                                        <h5 class="text-black f-12 " style="margin-bottom: 18px;">End time</h5>
                                        <!-- <mat-label>End time</mat-label> -->
                                        <select matNativeControl class="form-control" formControlName="endTime"
                                            (change)="setTime('end')">
                                            <option *ngFor="let time of timeArr" [value]="time"
                                                [hidden]="eventForm.value.startTime > time"> {{time}} </option>
                                        </select>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 pr-0">
                            <h5 class="m-0 text-black f-12">End date</h5>
                            <div class="form-group">
                                <mat-form-field class="date-input">
                                    <input (click)="epicker.open()" readonly class="form-control" matInput formControlName="endDateTime"
                                        [min]="eventForm.value.startDateTime._d == null?startDate : eventForm.value.startDateTime._d"
                                        [matDatepicker]="epicker">
                                    <mat-datepicker-toggle matSuffix style="margin-top: -18px;" [for]="epicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #epicker></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-3 pr-0 " style="margin-top: 27px;" *ngIf="!showTime">
                            <button (click)="addTime()">Add Time</button>
                        </div>
                    </div>
                </div>
            </div>
            <h5 class="m-0 text-black">Attendee List </h5>
            <div class="row pl-0">
                <div class="col-md-10 pl-0 " >
                    <div class="form-group" >
                        <mat-form-field>
                            <input matInput formControlName="attendee" class="form-control br-0 ">
                            <mat-error *ngIf="eventForm.controls['attendee'].hasError('pattern')">Email is valid</mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="col-md-2 pl-0 mt-8">
                    <button type="button" [hidden]="eventForm.controls['attendee'].hasError('pattern') || this.eventForm.get('attendee').value == ''" mat-stroked-button class="btn-primary br-0 p-12 btn-sm m-n0" (click)="addAttendee()">
                        <img src="/assets/images/svg/plus.svg"
                    >
                    </button>
                </div>
                <div class="col-md-10 pl-0 mt-8" *ngIf="attendeesArr.length > 0">
                    <div class="row pl-0" *ngFor="let member of attendeesArr" >
                        <div class="col-md-10 pl-0 " >
                            {{member.email}}
                        </div>
                        <div class="col-md-2 pl-0 " >
                            <img src="assets/images/svg/delete.svg" (click)="removeMember(member)">
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <!-- <input matInput [(ngModel)]="data.animal"> -->
    </div>
    <div mat-dialog-actions>
        <button mat-button (click)="onNoClick()">No Thanks</button>
        <button mat-button [mat-dialog-close]="eventForm.value" cdkFocusInitial>Ok</button>
    </div>
</div>

<!---------------------------------- view Event start ----------------------------------------->

<div class="p-24" *ngIf="!isEditAdd">
    <div mat-dialog-title class="m-0">
    <h5 class="m-0" ><strong><span style="font-size: 80px; color:#84BDF3; line-height: 0px;">.</span>{{eventData.summary}}</strong></h5>
    <p *ngIf="eventData.start.dateTime != null && eventData.start.dateTime != null" class="mt-4"><span>{{eventData.start.dateTime | date : 'MMMM d, y'}}</span><span *ngIf="eventData.start.dateTime != null">, {{eventData.startTime}}</span> - <span *ngIf="showBothDate">{{eventData.end.dateTime | date : 'MMMM d, y'}}, </span><span *ngIf="eventData.end.dateTime != null">{{eventData.endTime}}</span></p>
    <p class="mt-4" *ngIf="eventData.start.dateTime == null && eventData.start.dateTime == null"><span>{{eventData.created | date : 'MMMM d, y'}}</span></p>
    </div>
    <div mat-dialog-content class="p-24 f-12">
        <div *ngIf="eventData.description != null" style="display: flex;">
            <div> <img src="assets/images/svg/bell.svg" width="25px" class="mr-16"> </div>
            <div>
                <div  [innerHTML]="eventData.description"> </div>
            </div>
        </div>
        <div *ngIf="eventData.location != null" style="display: flex;" class="mt-16">
            <div> <img src="assets/images/svg/addon-three.svg" width="25px" class="mr-16"> </div>
            <div>
                <strong class="mb-2 text-black">Event address:</strong>
                <div [innerHTML]="eventData.location"> </div>
            </div>
        </div>
        
        <div style="display: flex;" *ngIf="attendeesArr.length > 0" class="mt-16" >
            <div> <img src="assets/images/svg/people.svg" width="25px" class="mr-16"> </div>   
            <div class="col-md-10 pl-0" >
                <strong class="m-0 text-black">Attendee List: </strong>
                <div class="row pl-0" *ngFor="let member of attendeesArr" >
                    <div class="col-md-10 pl-0 " >
                        <strong><span style="font-size: 30px; color:#84BDF3; line-height: 7px;">.</span></strong> {{member.email}}
                    </div>
                </div>
            </div>     
        </div>
    </div>
    <div mat-dialog-actions>
        <!-- *ngIf="eventData.creator.self" -->
        <img  (click)="editEvent()" class="c-p" src="assets/images/svg/pencil.svg">
        <img (click)="deleteEvent(eventData.id)" class="b-a c-p wrapper-9 ml-8"
              src="assets/images/svg/delete.svg">
        <!-- <button mat-button (click)="onNoClick()">No Thanks</button>
        <button mat-button [mat-dialog-close]="eventForm.value" cdkFocusInitial>Ok</button> -->
    </div>
</div>