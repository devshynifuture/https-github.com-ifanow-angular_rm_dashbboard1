<div class="p-20" *ngIf="isEditAdd">
    <h1 class=" f-22" *ngIf="!isEditable">Add New Event</h1>
    <h1 class=" f-22" *ngIf="isEditable">Edit Event</h1>

    <form [formGroup]="eventForm">

        <div class="row">
            <div class="col-md-8 p-0">
                <h5 class="mb-4 f-14 text-black roboto">Title</h5>
                <div class="form-group">
                    <mat-form-field>
                        <input matInput formControlName="title" class="form-control br-0">
                    </mat-form-field>
                </div>
            </div>
        </div>

        <div class="row pt-12">
            <div class="col-md-12 p-0 newTextarea">
                <h5 class="mb-4 mb-2 f-14 text-black roboto">Description</h5>
                <app-froala [(model)]="eventData.description" (modelChange)="descriptionData($event)"></app-froala>
            </div>
        </div>

        <div class="row pt-12">
            <div class="col-md-8 p-0">
                <h5 class="mb-4  f-14 text-black roboto">Event address</h5>
                <div class="form-group heightTextarea">
                    <mat-form-field>
                        <textarea matInput rows="4" formControlName="location" class="form-control  "></textarea>
                    </mat-form-field>
                </div>
            </div>
        </div>

        <div class="row pt-12">
            <div class="col-md-4 pl-0">
                <h5 class="mb-4 f-14 roboto text-black ">Start date</h5>
                <div class="form-group">
                    <mat-form-field class="ba-date">
                        <input class="form-control b-0" (click)="picker.open()" (dateChange)="setEndDate()" readonly matInput formControlName="startDateTime" [value]="this.eventData.start.dateTime == undefined ? startDate : this.eventData.start.dateTime" [min]="startDate" [matDatepicker]="picker">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>

            <div class="col-md-4 pl-0" *ngIf="showTime">
                <div class="row pl-0">
                    <div class="col-md-6 pl-0 pr-2">
                        <h5 class="text-black mb-4 f-14 ">Start time</h5>
                        <div class="form-group">
                            <mat-form-field>
                                <select class="form-control" matNativeControl formControlName="startTime" (change)="setTime('start')">
                                    <option *ngFor="let time of timeArr" [value]="time">{{time}}</option>
                                </select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-md-6 pl-2 pr-0">
                        <h5 class="text-black mb-4 f-14 ">End time</h5>
                        <div class="form-group">
                            <mat-form-field>
                                <select class="form-control" matNativeControl formControlName="endTime" (change)="setTime('end')">
                                    <option *ngFor="let time of timeArr" [value]="time"
                                        [hidden]="eventForm.value.startTime > time"> {{time}} </option>
                                </select>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4 pl-0">
                <h5 class="mb-4 text-black f-14 roboto">End date</h5>
                <div class="form-group">
                    <mat-form-field class="ba-date">
                        <input (click)="epicker.open()" readonly class="form-control b-0" matInput formControlName="endDateTime" [min]="eventForm.value.startDateTime._d == null?startDate : eventForm.value.startDateTime._d" [matDatepicker]="epicker">
                        <mat-datepicker-toggle matSuffix style="margin-top: -18px;" [for]="epicker">
                        </mat-datepicker-toggle>
                        <mat-datepicker #epicker></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>
            <div class="col-md-3 pl-0 " *ngIf="!showTime">
                <button (click)="addTime()">Add Time</button>
            </div>
        </div>

        <div class="row pt-6">
            <div class="col-md-10 p-0">
                <h5 class="mb-4 text-black f-14 roboto">Attendee List </h5>
                <div class="row pl-0">
                    <div class="col-md-10 pl-0 ">
                        <div class="form-group">
                            <mat-form-field>
                                <input matInput formControlName="attendee" class="form-control br-0 ">
                                <mat-error *ngIf="eventForm.controls['attendee'].hasError('pattern')">Email is valid
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-md-2 pl-0">
                        <img src="/assets/images/svg/plus.svg" (click)="addAttendee()" [hidden]="eventForm.controls['attendee'].hasError('pattern') || this.eventForm.get('attendee').value == ''">
                    </div>

                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-10 pl-0 mt-8" *ngIf="attendeesArr.length > 0">
                <div class="row pl-0" *ngFor="let member of attendeesArr">
                    <div class="col-md-10 pl-0 ">
                        {{member.email}}
                    </div>
                    <div class="col-md-2 pl-0 ">
                        <!-- <img src="assets/images/svg/delete.svg" > -->
                        <i (click)="removeMember(member)" class="material-icons c-p">
                            cancel
                        </i>
                    </div>
                </div>
            </div>
        </div>

        <div class="row pl-0">
            <div class="col-md-10 pl-0 ">
                <button mat-stroked-button class="btn-primary">
                    <input style="display: none;" (change)="getFileDetails($event)" id="file-3" multiple type="file">
                    <!-- <label class="uploadLabel c-p f-14 c-p" for="file-3">
                            <img class="mr-8" src="/assets/images/svg/upload-document-icon.svg">
                            <span></span>
                        </label> -->
                    Attach files
                </button>
            </div>
            <div class="col-md-10 pl-0 mt-8" *ngIf="myFiles.length > 0">
                <div class="row pl-0" *ngFor="let file of myFiles, let i = index">
                    <div class="col-md-10 pl-0 ">
                        {{i+1}}. {{file.name}}
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- <input matInput [(ngModel)]="data.animal"> -->
    <div class="row">
        <div class="col-md-12 p-0 text-right">

            <button mat-button (click)="onNoClick()">Cancel</button>
            <button mat-button [mat-dialog-close]="eventForm.value" cdkFocusInitial class="text-primary">Save</button>

        </div>
    </div>

</div>

<!---------------------------------- view Event start ----------------------------------------->

<div class="p-20" *ngIf="!isEditAdd">

    <h5 class="m-0">
        {{eventData.summary}}
    </h5>
    <p *ngIf="eventData.start.dateTime != null && eventData.start.dateTime != null" class="mt-4">
        <span>{{eventData.start.dateTime | date : 'MMMM d, y'}}</span><span *ngIf="eventData.start.dateTime != null">,
            {{eventData.startTime}}</span> - <span *ngIf="showBothDate">{{eventData.end.dateTime | date : 'MMMM d, y'}},
        </span><span *ngIf="eventData.end.dateTime != null">{{eventData.endTime}}</span></p>
    <p class="mt-4" *ngIf="eventData.start.dateTime == null && eventData.start.dateTime == null">
        <span>{{eventData.created | date : 'MMMM d, y'}}</span></p>


    <div *ngIf="eventData.description != null" style="display: flex;">
        <div> <img src="assets/images/svg/bell.svg" width="25px" class="mr-16"> </div>
        <div>
            <div [innerHTML]="eventData.description"> </div>
        </div>
    </div>
    <div *ngIf="eventData.location != null" style="display: flex;" class="mt-16">
        <div> <img src="assets/images/svg/addon-three.svg" width="25px" class="mr-16"> </div>
        <div>
            <strong class="mb-2 text-black">Event address:</strong>
            <div [innerHTML]="eventData.location"> </div>
        </div>
    </div>

    <div style="display: flex;" *ngIf="attendeesArr.length > 0" class="mt-16">
        <div> <img src="assets/images/svg/people.svg" width="25px" class="mr-16"> </div>
        <div class="col-md-10 pl-0">
            <strong class="m-0 text-black">Attendee List: </strong>
            <div class="row pl-0" *ngFor="let member of attendeesArr">
                <div class="col-md-10 pl-0 ">
                    <strong><span style="font-size: 30px; color:#84BDF3; line-height: 7px;">.</span></strong> {{member.email}}
                </div>
            </div>
        </div>
    </div>

    <div mat-dialog-actions>
        <!-- *ngIf="eventData.creator.self" -->
        <img (click)="editEvent()" class="c-p" src="assets/images/svg/pencil.svg">
        <img (click)="deleteEvent(eventData.id)" class="b-a c-p wrapper-9 ml-8" src="assets/images/svg/delete.svg">
        <!-- <button mat-button (click)="onNoClick()">No Thanks</button>
        <button mat-button [mat-dialog-close]="eventForm.value" cdkFocusInitial>Ok</button> -->
    </div>
</div>