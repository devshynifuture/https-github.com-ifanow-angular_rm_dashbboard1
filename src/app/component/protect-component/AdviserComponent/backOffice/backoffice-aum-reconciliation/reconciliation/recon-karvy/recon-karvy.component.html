<div class="row pt-28">
    <div class="col-md-12 pr-0">
        <div class="row justify-content-right" [formGroup]="selectBrokerForm">
            <div class="col-md-6"></div>
            <div class="col-md-4">
                <div matTooltip="Kindly, Select the broker code" [matTooltipDisabled]="isBrokerSelected"
                    matTooltipPosition="below">
                    <button [disabled]="!isBrokerSelected" class="btn-primary h-40" mat-stroked-button color="primary"
                        (click)="openAumReconciliation('startReconciliation','')">
                        START RECONCILIATION
                    </button>

                </div>
            </div>
            <div class="col-md-2">
                <!-- <button mat-stroked-button class="btn-default br-0 help-btn">ARN-83865</button> -->
                <mat-select class="b-a text-left form-control" formControlName="selectBrokerId"
                    placeholder="Select broker">
                    <mat-option>
                        Select Option
                    </mat-option>
                    <mat-option *ngFor="let broker of brokerList" [value]="broker.id"
                        (click)="getAumReconHistoryData()">
                        {{ broker.brokerCode }}
                    </mat-option>
                </mat-select>
            </div>
        </div>
    </div>
</div>
<div class="row pb-44"
    *ngIf="selectBrokerForm.get('selectBrokerId').valid && selectBrokerForm.get('selectBrokerId').touched">
    <div class="col-md-12 recon-karvy">
        <table mat-table [dataSource]="dataSource" class="mt-8" id="table-low" appSkeletonLoading
            [appSkeletonLoading]="isLoading">
            <ng-container matColumnDef="doneOn">
                <th mat-header-cell *matHeaderCellDef class="text-left br"> Last Done On </th>
                <td mat-cell *matCellDef="let element" class="text-left br">
                    <div class="bar">
                        {{ element.doneOn | date: 'dd/MM/yyyy' }}
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="doneBy">
                <th mat-header-cell *matHeaderCellDef class="text-left br"> Done By </th>
                <td mat-cell *matCellDef="let element" class="text-left br">
                    <div class="bar">
                        {{ element.doneBy }}
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="totalFolioCount">
                <th mat-header-cell *matHeaderCellDef class="text-left br"> Total Folios </th>
                <td mat-cell *matCellDef="let element" class="text-left br">
                    <div class="bar">
                        {{ element.totalFolioCount }}
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="unmatchedCountBeforeRecon">
                <th mat-header-cell *matHeaderCellDef class="text-left"> Before Recon </th>
                <td mat-cell *matCellDef="let element" class="text-left">
                    <div class="bar">
                        {{ element.unmatchedCountBeforeRecon }}
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="unmatchedCountAfterRecon">
                <th mat-header-cell *matHeaderCellDef class="text-left br"> After Recon </th>
                <td mat-cell *matCellDef="let element" class="text-left br">
                    <div class="bar">
                        {{ element.unmatchedCountAfterRecon }}
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="aumBalanceDate">
                <th mat-header-cell *matHeaderCellDef class="text-left "> AUM Balance </th>
                <td mat-cell *matCellDef="let element" class="text-left ">
                    <div class="bar">
                        {{element.aumBalanceDate | date: 'dd/MM/yyyy'}}
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="transactionDate">
                <th mat-header-cell *matHeaderCellDef class="text-left br"> Transaction Date </th>
                <td mat-cell *matCellDef="let element" class="text-left br">
                    <div class="bar">
                        {{ element.transactionDate | date: 'dd/MM/yyyy'}}
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="deleted">
                <th mat-header-cell *matHeaderCellDef class="text-left"> Delete </th>
                <td mat-cell *matCellDef="let element" class="text-left">
                    <div class="bar">
                        {{ element.deleted ? 'Yes' : 'No'}}
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="reordered">
                <th mat-header-cell *matHeaderCellDef class="text-left br"> Re ordered </th>
                <td mat-cell *matCellDef="let element" class="text-left br">
                    <div class="bar">
                        {{ element.reordered ? 'Yes': 'No'}}
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="orderSuccess">
                <th mat-header-cell *matHeaderCellDef class="text-left"> Success </th>
                <td mat-cell *matCellDef="let element" class="text-left">
                    <div class="bar">
                        {{ element.orderSuccess }}
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="orderFailed">
                <th mat-header-cell *matHeaderCellDef class="text-left br"> Failed </th>
                <td mat-cell *matCellDef="let element" class="text-left br">
                    <div class="bar">
                        {{ element.orderFailed }}
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let element">
                    <button mat-stroked-button class="btn-primary report-karvy" color="primary"
                        (click)="openAumReconciliation('report',element)">
                        Report
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
    <div class="col-md-12" *ngIf="dataSource.data === null">
        <h4 class="d-flex justify-content-center b-a p-44">
            No Data Found
        </h4>
    </div>
</div>

<div class="row text-center p-16 pt-0"
    *ngIf="selectBrokerForm.get('selectBrokerId').invalid && selectBrokerForm.get('selectBrokerId').untouched">
    <div class="col-md-12 b-a p-44 mt-12 text-primitive">
        Please Select Broker From the Drop down
    </div>
</div>