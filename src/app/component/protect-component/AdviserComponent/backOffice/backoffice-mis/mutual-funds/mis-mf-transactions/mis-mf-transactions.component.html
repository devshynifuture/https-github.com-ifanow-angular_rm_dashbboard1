<!-- <p>mis-mf-transactions works!</p> -->
<div class="row pt-10">
    <div class="col-md-4 d-flex align-items-center text-left">
        <h2 class="f-18 m-0 proximaFont ">Mutual fund transactions</h2>
    </div>

    <div class="col-md-8 d-flex align-items-center justify-content-end">
        <div class="w-30 mr-20 remove-top">
            <mat-form-field>
                <mat-select (selectionChange)="selectOption(selectedSearch)" [(ngModel)]='selectedSearch'
                    class="form-control f-14 br-0" id="sel11">
                    <mat-option [disabled]="true" value="search">Select search type</mat-option>
                    <mat-option [value]="4">Investor name</mat-option>
                    <mat-option [value]="1">Scheme name</mat-option>
                    <mat-option [value]="2">Folio Number</mat-option>
                    <mat-option [value]="3">PAN</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="w-30 mr-20 remove-top">
            <mat-form-field appearance="standard" class="searchInputWidth" floatLabel="never">
                <input (keyup)="onSearchChange($event.target.value)" autocomplete="off" class="form-control br-0"
                    matInput placeholder="Type to search data">
            </mat-form-field>
        </div>


        <div class="d-flex align-items-center justify-content-end">
            <mat-spinner [diameter]="30" *ngIf="fragmentData.isSpinner"></mat-spinner>
            <a [matMenuTriggerFor]="menu5" class="c-p downloadPdfIcon">
                <img src="assets/images/svg/download-bordered.svg">
            </a>
            <mat-menu #menu5="matMenu">
                <button (click)="Excel('mfTransaction')" mat-menu-item>XLS</button>
            </mat-menu>
            <button (click)="showFilter = true" mat-stroked-button class="btn-default addon ml-8 v-middle"><i
                    class="material-icons">filter_list</i>FILTER
            </button>
        </div>



    </div>




</div>
<div class="row pt-20 pb-10" *ngIf="showFilter == true">
    <div class="col-md-7 pr-0 custom-tags">
        <mat-chip-list>
            <mat-chip *ngFor="let status of filterStatus; let ind = index" class="bg-white b-a c-p f-400 p-12">
                {{status.name}}{{status.transactionType}}<i (click)="remove(ind,status)"
                    class="material-icons f-16 text-custom ml-12">
                    cancel
                </i></mat-chip>
            <mat-chip-list class="newDateIcon">
                <mat-chip *ngFor="let dateFilter of filterDate; let i = index" class="bg-white b-a c-p f-400 p-12">
                    <p>{{dateFilter.name}}</p>
                    <input (click)="picker2.open()" [(ngModel)]="selectedDateRange" [max]="maxDate"
                        [satDatepicker]="picker2" class="pL-20" matInput placeholder="Choose a date" readonly>
                    <sat-datepicker #picker2 (closed)="onClose()" [closeAfterSelection]="false"
                        [calendarFooterComponent]="rangesFooter" [selectFirstDateOnClose]="true" [rangeMode]="true">
                    </sat-datepicker>
                    <sat-datepicker-toggle [for]="picker2" matSuffix></sat-datepicker-toggle>
                    <i (click)="removeDate(i)" class="material-icons f-16 text-custom c-p">
                        cancel
                    </i>
                </mat-chip>
            </mat-chip-list>
        </mat-chip-list>
    </div>
    <div class="col-md-5 right text-right pl-0">
        <div class="row">
            <div class="col-md-4 pr-0">
                <mat-form-field>
                    <mat-select (selectionChange)="addFilters(selectedStatusFilter)" [(ngModel)]='selectedStatusFilter'
                        class="form-control f-14 br-0" id="sel11">
                        <mat-option [disabled]="true" value="statusFilter">Category</mat-option>
                        <mat-option *ngFor="let chip of chips" [value]="chip">{{chip.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-4 pr-0">
                <mat-form-field>
                    <mat-select (selectionChange)="addFiltersDate($event)" [(ngModel)]='selectedDateFilter'
                        class="form-control f-14 br-0" id="sel12">
                        <mat-option [disabled]="true" value="dateFilter">Transaction date</mat-option>
                        <mat-option *ngFor="let dateAdd of dateChips" [value]="dateAdd">{{dateAdd.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-4 pr-0 text-right">
                <mat-form-field>
                    <mat-select (selectionChange)="addTransactionType(selectedTransactionFilter)"
                        [(ngModel)]='selectedTransactionFilter' class="form-control br-0" id="sel12">
                        <mat-option [disabled]="true" value="tranFilter">Transaction Type</mat-option>
                        <mat-option *ngFor="let tran of transactionTypeChips" [value]="tran">{{tran.transactionType}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
    </div>
</div>
<div class="row pt-20">
    <div class="col-md-12 mb-20">
        <div *ngIf="mfTransaction.data.length  != 0">
            <div class="people-table-scroll" (scroll)="onWindowScroll($event)">
                <table matSort #tableEl mat-table [dataSource]="mfTransaction" class="skeletonAnimation"
                    [appSkeletonLoading]="isLoading" id="tbs">
                    <ng-container matColumnDef="name">
                        <th class="br" mat-sort-header="ownerName" mat-header-cell *matHeaderCellDef sticky>Investor
                            name </th>
                        <td class="br" mat-cell *matCellDef="let element">
                            <div class="bar">
                                {{(isLoading) ? '':element.ownerName}}
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="scheme">
                        <th class="br" mat-sort-header="schemeName" mat-header-cell *matHeaderCellDef sticky> Scheme
                            name
                        </th>
                        <td class="br text-left" mat-cell *matCellDef="let element">
                            <div class="bar c-p">
                                {{(isLoading) ? '':element.schemeName}}
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="folio">
                        <th class="br w-15" mat-sort-header="folioNumber" mat-header-cell *matHeaderCellDef sticky>
                            Folio
                            Number
                        </th>
                        <td class="br text-left w-15" mat-cell *matCellDef="let element">
                            <div class="bar c-p">
                                {{(isLoading) ? '':element.folioNumber}}
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="unit">
                        <!-- <th class="br text-right" mat-sort-header mat-header-cell *matHeaderCellDef sticky> Unit
                        </th> -->
                        <th class="br text-right" mat-header-cell *matHeaderCellDef>
                            Unit</th>
                        <td class="br text-right" mat-cell *matCellDef="let element">
                            <div class="bar c-p">
                                {{(isLoading) ? '':(element.unit | number:'1.2-3')}}
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="Amount">
                        <!-- <th class="br text-right" mat-sort-header mat-header-cell *matHeaderCellDef sticky>Amount
                        </th> -->
                        <th class="br text-right" mat-header-cell *matHeaderCellDef>
                            Amount</th>
                        <td class="br text-right" mat-cell *matCellDef="let element">
                            <div class="bar d-flex justify-content-end c-p">
                                <span
                                    appFormatNumber>{{(isLoading) ? '': (element.amount ? element.amount : '-')}}</span>
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="tType">
                        <th class="br" mat-sort-header="fwTransactionType" mat-header-cell *matHeaderCellDef sticky>
                            Transaction type
                        </th>
                        <td class="br text-left" mat-cell *matCellDef="let element">
                            <div class="bar c-p">
                                {{(isLoading) ? '':element.fwTransactionType}}
                            </div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="tDate">
                        <th class="br  " mat-sort-header="transactionDate" mat-header-cell *matHeaderCellDef sticky>
                            Transaction
                            date
                        </th>
                        <td class="br " mat-cell *matCellDef="let element">
                            <div class="bar c-p">
                                {{(isLoading) ? '':element.transactionDate | date: 'dd/MM/yyyy' }}
                            </div>
                        </td>

                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
            </div>
        </div>
        <div *ngIf="mfTransaction.data.length  == 0">
            <span class="text-center pt-28 d-flex flex-column align-items-center mt-20">
                <img src="assets/images/svg/documents-empty-states.svg">
                No data found
            </span>
        </div>
    </div>
</div>