<!-- <div *ngIf="showLoader">
    <mat-spinner class="loader" [diameter]="30"></mat-spinner>

    <img class="loader" src="https://offerscouponsdeals.in/public/ocd_images/overlay-loader.gif">
</div> -->
<div id="ui-misreport">
    <div class="bg-white pb-36">
        <div *ngIf="sipComponent==true">
            <div class="row pt-28 pb-16">
                <div class="col-md-8">
                    <h3 class="mb-0">SIP</h3>
                </div>
                <div *ngIf="arnRiaList.length  > 0" class="col-md-4 text-right ">
                    <button [matMenuTriggerFor]="menu" class="ba-black borderLine br-0" mat-stroked-button>
                        {{viewMode}}
                        <mat-icon aria-hidden="false" aria-label="Example home icon">keyboard_arrow_down</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                        <div *ngFor="let item of arnRiaList">
                            <button (click)="changeArnRiaValue(item)" mat-menu-item>{{item.number}}</button>
                        </div>
                    </mat-menu>
                </div>
            </div>

            <div class=" mr-12 skeletonAnimation" appSkeletonLoading [appSkeletonLoading]="isLoading">
                <div class="row ">
                    <div class="col-md-9 p-0">
                        <div class="row">
                            <div class="col-md-4 pr-0 relClass">
                                <div class="bar180">
                                    <div class="bg-grey lter pt-24 pb-24 text-center br-2 height180">
                                        <div class="row">
                                            <div class="col-md-12 p-0">
                                                <h1 class="  text-diff f-44 f-300 pt-32">
                                                    <span>
                                                        {{(isLoading) ? '' :((sipCount) && sipCount.totalAmountInWords  ? sipCount.totalAmountInWords : '0')}}
                                                    </span>
                                                </h1>
                                                <p class="f-16 pt-4 text-diff" *ngIf="!isLoading">TOTAL SIP BOOK</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 relClass pr-0">
                                <div class="bar180">
                                    <div class="bg-grey lter br-2 height180 pr-20 pl-12">
                                        <div class="row pt-12">
                                            <div class="col-md-5 text-left p-0">
                                                <div class="pl-12">
                                                    <h1 class="relClass f-24 text-diff mb-0 pb-8">
                                                        <span>
                                                            {{(isLoading) ? '' : ((sipCount && sipCount.hasOwnProperty('totalAmountInWords')) ? sipCount.totalCount : 0)}}
                                                        </span>
                                                    </h1>
                                                    <p class="f-12 text-diff mb-0" *ngIf="!isLoading">SIP Count</p>
                                                </div>
                                            </div>
                                            <div class="col-md-7 p-0 text-right">
                                                <h1 class="text-diff f-24 mb-0 pb-8">
                                                    <span *ngIf="!isLoading" appFormatNumber>
                                                        {{(sipCount &&  sipCount.hasOwnProperty('avgSipAmount')) ? sipCount.avgSipAmount : 0}}</span>
                                                    <span *ngIf="isLoading">{{''}}</span>
                                                </h1>
                                                <p class="f-12 mb-0 text-diff" *ngIf="!isLoading">Average SIP</p>

                                            </div>
                                            <div class="col-md-12 pr-0">
                                                <div class="pt-20" *ngIf="!isLoading">
                                                    <mat-progress-bar class="text-diff" mode="determinate"
                                                        [value]="clientWithoutSip">
                                                    </mat-progress-bar>
                                                    <p class="text-diff f-12 pt-4 mb-0 pb-8">
                                                        <span>{{clientWithoutSip | number:'1.2-2'}} </span>% Clients
                                                        <!-- prod fix -->
                                                        <!-- without SIP{{loader}} -->
                                                        without SIP
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4  relClass pr-0">
                                <div class="bar180">
                                    <div class="bg-grey lter p-16 br-2 pt-12 height180">
                                        <div class="row" *ngIf="!isLoading">
                                            <div class="col-md-12 p-0">
                                                <div class="text-center">
                                                    <h1 class="text-diff f-300 f-40 mb-4 pt-8">
                                                        {{sipCount ?  sipCount.sipLinkedToGoalPercent : 0}}%</h1>

                                                    <p class="text-diff f-14 mb-0 pt-12 l-21">
                                                        Out of {{sipCount ?  sipCount.totalCount:0}} SIP,
                                                        {{sipCount ?  sipCount.sipLinkedToGoalPercent:0}}%
                                                        ({{sipCount ?  sipCount.sipLinkedToGoalCount : '' }} SIP) are currently
                                                        linked to
                                                        financial goals of your
                                                        clients
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row pt-16">
                            <div class="col-md-6">
                                <p class="f-16 text-muted">Filter Options</p>
                            </div>
                            <div class="col-md-6 pr-0 text-right" *ngIf="!isLoading">
                                <button mat-stroked-button class="btn-black h-30 lh-29 pl-8 pr-8"
                                    (click)="amcWise('Allsip','all')">View all
                                    Sip</button>
                            </div>

                        </div>


                        <div class="row">
                            <div class="col-md-12 d-flex pr-0">
                                <div class=" width183 borderLine ">
                                    <div class="row ">
                                        <div class="col-md-3 pt-12 pl-8">
                                            <img src="/assets/images/svg/cal.svg">
                                        </div>
                                        <div (click)="amcWise('amc','')" class="col-md-9 p-0 c-p">
                                            <h5 class="mb-0 text-custom pt-16 pb-16 ">Amc wise</h5>
                                        </div>
                                    </div>
                                </div>

                                <div class="width183 borderLine">
                                    <div class="row ">
                                        <div class="col-md-3 pt-12 pl-8 ">
                                            <img src="/assets/images/svg/cal.svg">
                                        </div>
                                        <!-- (click)="categoryWise('amc')" prod build -->
                                        <div (click)="amcWise('scheme','')" class="col-sm-9 p-0 c-p">
                                            <h5 class="mb-0 text-custom pt-16 pb-16 ">Scheme wise</h5>
                                        </div>
                                    </div>
                                </div>

                                <div class="width183 borderLine">
                                    <div class="row ">
                                        <div class="col-md-3 pt-12 pl-8 ">
                                            <img src="/assets/images/svg/cal.svg">
                                        </div>
                                        <!-- (click)="categoryWise('client')" prod build -->
                                        <div (click)="amcWise('client','')" class="col-md-9 p-0 c-p">
                                            <h5 class="mb-0 text-custom pt-16 pb-16 ">Client wise</h5>
                                        </div>
                                    </div>
                                </div>

                                <div class="width183 borderLine m-0">
                                    <div class="row ">
                                        <div class="col-md-3 pt-12 pl-8">
                                            <img src="/assets/images/svg/cal.svg">
                                        </div>
                                        <!-- (click)="categoryWise('applicant')"  prod build -->
                                        <div (click)="amcWise('applicant','')" class="col-sm-9 p-0 c-p">
                                            <h5 class="mb-0 text-custom pt-16 pb-16 ">Applicant wise</h5>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row p-12 pr-0">
                            <!-- <img src="/assets/images/grap.png"
                      class="w-100 h-365"> -->
                            <div class="col-md-8 p-0 borderLine">
                                <div class="highcharts-figure" id="pieChartSip"></div>
                            </div>
                            <div class="col-md-4 p-0">
                                <div id="mistabs1">
                                    <div class="h-500 bg-white borderLine borderLeftNone skeletonAnimation"
                                        appSkeletonLoading [appSkeletonLoading]="isLoading">
                                        <h5 class="m-0 f-500 text-primary text-center pt-8 pb-8 bb">SIP
                                            Rejections/Reversals</h5>
                                        <p class="bb text-center p-8 mb-0 f-12 text-custom">List of SIP rejection in
                                            last 90 days
                                        </p>

                                        <!-- *ngIf="clientTotalAum" prod build -->
                                        <div class="b-white h-424" *ngIf="rejectionSip?.length > 0">
                                            <div *ngFor="let item of rejectionSip" class="row bb">
                                                <div class=" col-md-12 p-0 relClass">
                                                    <div [ngClass]="{'height23': isLoading,'bar':isLoading}">
                                                        <p *ngIf="!isLoading" class="mb-0 f-bold  p-8 ">
                                                            {{item.schemeName}}|{{item.folioNumber}}</p>

                                                    </div>
                                                </div>
                                                <div class="row w-100">
                                                    <div class="col-md-8 pl-0">
                                                        <p *ngIf="!isLoading"
                                                            class="mb-0 f-13 p-4 pr-8 text-custom  pt-8">
                                                            {{item.investorName}}</p>
                                                        <p *ngIf="!isLoading" class="pl-4"> {{item.amount}}</p>
                                                        <p *ngIf="isLoading">{{''}}</p>
                                                    </div>
                                                    <div class="col-md-4 bar pl-0 relClass pt-4">
                                                        <div>
                                                            <p *ngIf="!isLoading"
                                                                class="mb-0 f-12 f-500 p-4 label bg-danger bg text-white  roboto p-4 ">
                                                                {{item.transactionDate | date:'dd/MM/yyyy'}}</p>
                                                            <!-- <p *ngIf="isLoading">{{''}}</p> -->
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div *ngIf="rejectionSip?.length==0" class="text-center pt-48">
                                            No data found
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 pr-0">
                        <div id="mistabs1">
                            <mat-tab-group class="h-800 borderLine bg-white b-a">
                                <mat-tab label="Expiring SIP">
                                    <div class="bb-1 d-flex p-8">
                                        <p class="text-center mb-0 f-12 text-custom pt-2">List of SIP expiring in last
                                            90
                                            days </p>
                                        <div class="text-right " *ngIf="!isExpiringLoading && expiringSip?.length >0">
                                            <button mat-stroked-button
                                                class="btn-black h-22 lh-20 mn-auto pr-4 pl-4 ml-12 f-12"
                                                (click)="amcWise('Allsip','expiring')">View
                                                all</button>
                                        </div>
                                    </div>


                                    <!-- *ngIf="clientTotalAum" prod build -->
                                    <div class="b-white skeletonAnimation" appSkeletonLoading
                                        [appSkeletonLoading]="isExpiringLoading">
                                        <div *ngFor="let item of expiringSip" class="row bb">
                                            <div class=" col-md-12 p-0 relClass">
                                                <div
                                                    [ngClass]="{'height23': isExpiringLoading,'bar':isExpiringLoading}">
                                                    <p *ngIf="!isExpiringLoading" class="mb-0 f-bold  p-8 ">
                                                        {{item.schemeName}}|{{item.folioNumber}}
                                                    </p>

                                                </div>
                                            </div>
                                            <div class="row w-100">
                                                <div class="col-md-8 pl-0">
                                                    <p *ngIf="!isExpiringLoading"
                                                        class="mb-0 f-13 p-4 pr-8 text-custom  pt-8">
                                                        {{item.investorName}}</p>
                                                    <p *ngIf="!isExpiringLoading" class="pl-4">{{item.amount}}</p>
                                                    <p *ngIf="isExpiringLoading">{{''}}</p>
                                                </div>
                                                <div class="bar col-md-4 p-0 relClass pt-6">
                                                    <div>
                                                        <p *ngIf="!isExpiringLoading"
                                                            class="mb-0 f-12 label bg-danger bg text-white f-500 roboto p-4">
                                                            {{item.dateDiff}}{{' Days'}}</p>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                    <div *ngIf="expiringSip?.length==0" class="text-center">
                                        No data found
                                    </div>
                                </mat-tab>
                                <mat-tab label="Expired / CEASED">
                                    <div class="bb-1 p-8 d-flex">
                                        <p class=" mb-0 f-12 pt-2 text-custom">List of SIP expired in last
                                            90
                                            days </p>
                                        <div class="text-right" *ngIf="!isExpiredLoading && expiredSip?.length > 0">
                                            <button mat-stroked-button
                                                class="btn-black h-22 lh-20 mn-auto pr-4 pl-4 ml-12 f-12 ml-12"
                                                (click)="amcWise('Allsip','expired')">View all</button>
                                        </div>
                                    </div>
                                    <div class="b-white skeletonAnimation" appSkeletonLoading
                                        [appSkeletonLoading]="isExpiredLoading">
                                        <div *ngFor="let item of expiredSip" class="row bb ">
                                            <div class="col-md-12 p-0 relClass">
                                                <div [ngClass]="{'height23': isExpiredLoading,'bar':isExpiringLoading}">
                                                    <p *ngIf="!isExpiredLoading" class="mb-0 f-bold  p-8 ">
                                                        {{item.schemeName}}|{{item.folioNumber}}
                                                    </p>

                                                </div>
                                            </div>
                                            <div class="row w-100">
                                                <div class="col-md-8 pl-0">
                                                    <p *ngIf="!isExpiredLoading"
                                                        class="mb-0 f-13 p-4 pr-8 text-custom  pt-8">
                                                        {{item.investorName}}</p>
                                                    <p *ngIf="!isExpiredLoading" class="pl-4">{{item.amount}}</p>
                                                    <p *ngIf="isExpiredLoading">{{''}}</p>
                                                </div>

                                                <div class=" col-md-4 p-0 ">
                                                    <div>
                                                        <p *ngIf="!isExpiredLoading"
                                                            class="mb-0 f-12 label bg-danger bg text-white f-500 roboto p-4">
                                                            {{item.dateDiff}}{{' Days'}}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="expiredSip?.length==0" class="text-center">
                                        No data found
                                    </div>
                                </mat-tab>
                            </mat-tab-group>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="sipcomponentWise=='Allsip' && sipComponent==false">
        <app-all-sip [mode]="mode" [data]="objTosend" (changedValue)="display($event)"></app-all-sip>
    </div>
    <div *ngIf="sipcomponentWise=='amc'">
        <app-sip-amc-wise [data]="objTosend" (changedValue)="display($event)"></app-sip-amc-wise>
    </div>
    <div *ngIf="sipcomponentWise=='scheme'">
        <app-sip-scheme-wise [data]="objTosend" (changedValue)="display($event)"></app-sip-scheme-wise>
    </div>
    <div *ngIf="sipcomponentWise=='client'">
        <app-sip-client-wise [data]="objTosend" (changedValue)="display($event)"></app-sip-client-wise>
    </div>
    <div *ngIf="sipcomponentWise=='applicant'">
        <app-sip-applicant-wise [data]="objTosend" (changedValue)="display($event)"></app-sip-applicant-wise>
    </div>