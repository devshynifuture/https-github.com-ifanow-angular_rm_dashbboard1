<div class="popup-header-fix w-65">
    <div class="row bb-1">
        <div class="col-md-8 p-0">
            <h3 class="mb-0 wrapper-20">{{transactionType}} TRANSACTION</h3>
        </div>
        <div class="col-md-4 text-right">
            <div class="wrapper-12">
                <i (click)="close()" class="material-icons c-p pt-8 v-middle"> clear</i>
            </div>
        </div>
    </div>
</div>
<div [formGroup]="redemptionTransaction">

    <div class="pt-90 pr-20 pl-20 pb-44">
        <div class="row">
            <div class="col-md-12 p-0">
                <h5 class="m-0 text-black"> <img src="/assets/images/svg/back-arrow.svg" class="v-initial pr-12">Investor name: {{selectedFamilyMember}}
                </h5>
            </div>
        </div>
        <div class="row pt-28 pb-44">
            <div class="col-md-8 pl-0 pr-20">

                <!-- value == 1 -->

                <div class="row">
                    <div class="col-md-12 p-0 text-left">
                        <h5 class="m-0  text-black pb-12">Select scheme to redeem from</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-11 p-0">
                        <div class="form-group ">
                            <mat-form-field>
                                <input type="text" aria-label="Number" class="form-control " matInput formControlName="investor" [matAutocomplete]="auto" (keyup)="getSchemeList($event.target.value)" value="Start typing to see investor names">
                                <mat-autocomplete #auto="matAutocomplete">
                                    <mat-option (onSelectionChange)="selectedScheme(scheme)" *ngFor="let scheme of schemeList" [value]="scheme.schemeName">
                                        {{scheme.schemeName}}
                                    </mat-option>
                                </mat-autocomplete>
                                <mat-hint align="start" class="f-12 text-custom  ">
                                    Last closing NAV: {{navOfSelectedScheme}}
                                </mat-hint>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-md-1" *ngIf="showSpinner == true">
                        <mat-spinner class="mt-8"></mat-spinner>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 p-0 text-left">
                        <h5 class="m-0 pt-28 text-black pb-12">Select scheme folio</h5>
                    </div>
                    <div class="col-md-7 p-0">
                        <div class="form-group mb-0">
                            <mat-form-field>
                                <mat-select class="form-control" formControlName="investmentAccountSelection">
                                    <mat-option value="option" (onSelectionChange)="selectedFolio(folio)" *ngFor="let folio of folioList">{{folio.folioNumber}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <!-- *ngIf="showUnits == true" commented for prod -->
                <div class="row" *ngIf="showUnits ==true">
                    <div class="col-md-12 mt-20 pl-0">
                        <div class="bg-grey lter" *ngIf="folioDetails">
                            <div class="row">
                                <div class="col-md-6 p-20 text-left">
                                    <p class="f-14 m-0">Current value</p>
                                    <h3 class="f-18 roboto m-0">Rs: {{folioDetails.currentValue}}</h3>
                                </div>
                                <div class="col-md-6 p-20 text-left">
                                    <p class="f-14 m-0">Balance unit</p>
                                    <h3 class="f-18 roboto m-0">{{folioDetails.balanceUnit}}</h3>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 pb-12">
                                    <p class="f-12 m-0">Note: Note: Units data provided here is as per data uploaded in the system. This data may not be updated in NSE NMF. As a result, some transactions may not go through.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 p-0 text-left">
                        <h5 class="m-0 pt-28 text-black pb-12">Redemption type</h5>
                    </div>
                    <div class="col-md-5 p-0">
                        <mat-form-field>
                            <mat-select class="form-control br-0" formControlName="redeemType" (selectionChange)="redemptionType($event)">
                                <mat-option value="1">Amount Rs.
                                </mat-option>
                                <mat-option value="2">No. of units
                                </mat-option>
                                <mat-option value="3">All avialable units
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 p-0 text-left">
                        <h5 class="m-0 pt-28 text-black pb-12"> Amount/Units</h5>
                    </div>

                    <div class="col-md-5 p-0">
                        <div class="form-group mb-0 iconRupess">
                            <mat-form-field>
                                <input #employeeContry matInput maxlength="10" type="text" class="form-control  rupess" formControlName="employeeContry" (change)="enteredAmount($event.target.value)">
                                <mat-hint align="start" class="f-12 text-custom">
                                    Min amount: â‚¹{{(schemeDetails == undefined)?'-':schemeDetails.redemptionAmountMinimum }}
                                </mat-hint>
                                <mat-error *ngIf="(redemptionTransaction.get('employeeContry').errors?.min)" class="f-12">
                                    Should be greater than or equal to {{schemeDetails.redemptionAmountMinimum}}
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4 bg-grey lter p-0">
                <app-transaction-summary [data]="transactionSummary" (defaultDetails)='getDefaultDetails($event)'>
                </app-transaction-summary>
            </div>
        </div>
    </div>

</div>
<div class="bottom-fixed wrapper-12 pt-16 w-65">
    <div class="row">
        <div class="col-md-4 pt-8">
            <h5 class="mb-0  text-white c-p" (click)="close()">Cancel</h5>
        </div>
        <!-- <div class="col-md-8 right pt-8" *ngIf="formStep == 'step-1' || formStep == 'step-2'">

            <h5 class="mb-0 text-white c-p" (click)="saveAndNext()"> NEXT </h5>
        </div> -->
        <div class="col-md-8 text-right">
            <!-- commented for prod build -->
            <button mat-button class="text-white">
                SAVE & ADD ANOTHER
            </button>
            <button mat-button class="text-success" (click)="redeem()">
                SAVE & PROCEED
            </button>
        </div>
    </div>
</div>