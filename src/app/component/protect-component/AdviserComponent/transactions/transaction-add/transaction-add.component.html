<div class="popup-header-fix w-65">
    <div class="row bb-1">
        <div class="col-md-8 p-0">
            <h4 class="mb-2 wrapper-20">NEW TRANSACTION</h4>
        </div>
        <div class="col-md-4 text-right">
            <div class="wrapper-12">
                <i (click)="close()" class="material-icons c-p pt-8 v-middle"> clear</i>
            </div>
        </div>
    </div>
</div>

<div [formGroup]="transactionAddForm" (ngSubmit)="onAddTransaction()">
    <!-- first page -->
    <div class="pt-90 pr-40 pl-40 pb-40" *ngIf="formStep == 'step-1'">
        <div class="row">
            <div class="col-md-8 p-0">
                <h5 class="m-0 text-black pb-12">Select an investor from the search box below...</h5>
                <mat-form-field class="w-100">    
                <mat-select appOwner (valueChange)='display($event)' (valueChange1)='lisNominee($event)'  [data]='ownerData'formControlName="ownerName" class="form-control br-0">
                    <mat-option value=''>Search family members</mat-option>
                    <mat-option *ngFor="let f of nomineesListFM" [value]="f.userName" (click)="ownerDetails(f)">
                        <span>{{f.userName}}</span>
                    </mat-option>
                </mat-select>
                <mat-error class="f-12 pt-4">
                    This field is required
                </mat-error>
            </mat-form-field>
            </div>
        </div>
    </div>

    <!-- second click -->
    <div *ngIf="formStep == 'step-2'">
        <div class="row pt-60">
            <div class="col-md-12 pl-8">
                <h5 class="m-0 text-black">Great! Next, select a transaction type from the below given options...</h5>
            </div>
        </div>
        <div class="row pt-12">
            <div class="col-md-4 pl-8 pr-8 c-p" (click)="selectTransactionType('purchase')">
                <mat-checkbox [ngStyle]="{'pointer-events': (selectedDiv == 'purchase') ? 'all': 'none'}"
                    [ngClass]="{'v-h': selectedDiv != 'purchase' }" class="checked" checked="false"></mat-checkbox>
                <div class="row pt-20 pb-20 bg-grey lter" [ngClass]="{'b-a-custom': selectedDiv == 'purchase'}">
                    <div class="col-md-4 text-right">
                        <img src="/assets/images/svg/shopping{{ (selectedDiv == 'purchase') ? '-blue': '-icons' }}.svg"
                            class="pt-4">
                    </div>
                    <div class="col-md-8 pl-0">
                        <h3 class="m-0" [ngClass]="{ 'text-primary': selectedDiv == 'purchase' }"> Purchase</h3>
                        <p class="m-0 roboto text-custom pt-4 f-13"
                            [ngClass]="{ 'text-primary': selectedDiv == 'purchase' }">Invest a
                            lumpsum amount in a jiffy</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 pl-8 pr-8 c-p" (click)="selectTransactionType('switch')">
                <mat-checkbox [ngStyle]=" {'pointer-events': (selectedDiv == 'switch') ? 'all': 'none'}"
                    [ngClass]="{'v-h':selectedDiv != 'switch' }" class="checked" checked="false">
                </mat-checkbox>
                <div class="row pt-20 pb-20 bg-grey lter" [ngClass]="{'b-a-custom': selectedDiv == 'switch'}">
                    <div class="col-md-4 text-right">
                        <img src="/assets/images/svg/switch{{ (selectedDiv == 'switch') ? '-blue': '-icons' }}.svg"
                            class="pt-4">
                    </div>
                    <div class="col-md-8 pl-0">
                        <h3 class="m-0" [ngClass]="{ 'text-primary': selectedDiv == 'switch' }"> Switch</h3>
                        <p class="m-0 roboto text-custom pt-4 f-13"
                            [ngClass]="{ 'text-primary': selectedDiv == 'switch' }">Switch lumpsum from one scheme to
                            another</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 pl-8 pr-8 c-p" (click)="selectTransactionType('redeem')">
                <mat-checkbox [ngStyle]="{'pointer-events': (selectedDiv == 'redeem') ? 'all': 'none'}"
                    [ngClass]="{'v-h':selectedDiv != 'redeem' }" class="checked" checked="false"></mat-checkbox>
                <div class="row pt-20 pb-20 bg-grey lter" [ngClass]="{'b-a-custom': selectedDiv == 'redeem'}">
                    <div class="col-md-4 text-right">
                        <img src="/assets/images/svg/reedem{{ (selectedDiv == 'redeem') ? '-blue': '-icons' }}.svg"
                            class="pt-4">
                    </div>
                    <div class="col-md-8 pl-0">
                        <h3 class="m-0" [ngClass]="{ 'text-primary': selectedDiv == 'redeem' }"> Redeem</h3>
                        <p class="m-0 roboto text-custom pt-4 f-13"
                            [ngClass]="{ 'text-primary': selectedDiv == 'redeem' }">Redeem from your existing schemes
                        </p>
                    </div>
                </div>
            </div>

        </div>
        <div class="row pt-12">
            <div class="col-md-4 pl-8 pr-8 c-p" (click)="selectTransactionType('sip')">
                <mat-checkbox [ngStyle]="{'pointer-events': (selectedDiv == 'sip') ? 'all': 'none'}"
                    [ngClass]="{'v-h':selectedDiv != 'sip' }" class="checked" checked="false"></mat-checkbox>
                <div class="row pt-20 pb-20 bg-grey lter" [ngClass]="{'b-a-custom': selectedDiv == 'sip'}">
                    <div class="col-md-4 text-right">
                        <img src="/assets/images/svg/sip{{ (selectedDiv == 'sip') ? '-blue': '-icons' }}.svg"
                            class="pt-4">
                    </div>
                    <div class="col-md-8 pl-0">
                        <h3 class="m-0" [ngClass]="{ 'text-primary': selectedDiv == 'sip' }"> SIP</h3>
                        <p class="m-0 roboto text-custom pt-4 f-13"
                            [ngClass]="{ 'text-primary': selectedDiv == 'sip' }">Start a systematic investment plan</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 pl-8 pr-8 c-p" (click)="selectTransactionType('stp')">
                <mat-checkbox [ngStyle]="{'pointer-events':(selectedDiv == 'stp') ? 'all': 'none'}"
                    [ngClass]="{'v-h':selectedDiv != 'stp' }" class="checked" checked="false"></mat-checkbox>
                <div class="row pt-20 pb-20 bg-grey lter" [ngClass]="{'b-a-custom': selectedDiv == 'stp'}">
                    <div class="col-md-4 text-right">
                        <img src="/assets/images/svg/switch{{ (selectedDiv == 'stp') ? '-blue': '-icons' }}.svg"
                            class="pt-4">
                    </div>
                    <div class="col-md-8 pl-0">
                        <h3 class="m-0" [ngClass]="{ 'text-primary': selectedDiv == 'stp' }"> STP</h3>
                        <p class="m-0 roboto text-custom pt-4 f-13"
                            [ngClass]="{ 'text-primary': selectedDiv == 'stp' }">Systematic transfer from one scheme to
                            another</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 pl-8 pr-8 c-p" (click)="selectTransactionType('swp')">
                <mat-checkbox [ngStyle]="{'pointer-events':(selectedDiv == 'swp') ? 'all': 'none'}"
                    [ngClass]="{'v-h':selectedDiv != 'swp' }" class="checked" checked="false"></mat-checkbox>
                <div class="row pt-20 pb-20 bg-grey lter" [ngClass]="{'b-a-custom': selectedDiv == 'swp'}">
                    <div class="col-md-4 text-right">
                        <img src="/assets/images/svg/reedem{{ (selectedDiv == 'swp') ? '-blue': '-icons' }}.svg"
                            class="pt-4">
                    </div>
                    <div class="col-md-8 pl-0">
                        <h3 class="m-0" [ngClass]="{ 'text-primary': selectedDiv == 'swp' }"> SWP</h3>
                        <p class="m-0 roboto text-custom pt-4 f-13"
                            [ngClass]="{ 'text-primary': selectedDiv == 'swp' }">Systematic withdrawal from a scheme
                        </p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- third click -->
    <!-- last step ui -->
    <div class="pt-90 pr-20 pl-20 pb-44" *ngIf="formStep== 'step-3'">
        <div class="row">
            <div class="col-md-12 p-0">
                <h5 class="m-0 text-black"> <img src="/assets/images/svg/back-arrow.svg"
                        class="v-initial pr-12">Investor
                    name: Rahul Jain
                </h5>
            </div>
        </div>
        <div class="row pt-20 pb-44">
            <div class="col-md-8 pl-0 pr-20" *ngIf="!isSaveAndAddClicked">
                <h5 class="m-0 pb-10 text-black">Select from the following options</h5>
                <mat-radio-group aria-label="Select an option" formControlName="schemeType">
                    <mat-radio-button value="existing"
                        [ngClass]="transactionAddForm.get('schemeType').value == 'existing' ? 'text-primary b-a-custom': 'b-a text-primitive'">
                        Invest in
                        existing scheme
                    </mat-radio-button>
                    <mat-radio-button value="new"
                        [ngClass]="transactionAddForm.get('schemeType').value == 'new' ? 'text-primary b-a-custom': 'b-a text-primitive'">
                        Select a new
                        scheme</mat-radio-button>
                </mat-radio-group>
                <h5 class="m-0 pt-28 text-black pb-12">Select a scheme to invest in</h5>
                <div class="form-control mb-0 add-transactions">
                    <input type="text" aria-label="Number" class="form-group h-0" matInput formControlName="scheme"
                        [matAutocomplete]="auto1" value="Start typing to see investor names">
                    <mat-autocomplete #auto1="matAutocomplete">
                        <mat-option [value]="item" *ngFor="let item of schemes">
                            {{ item }}
                        </mat-option>
                    </mat-autocomplete>
                    <p class="m-0 f-12 text-custom pt-8">Last closing NAV: 390.27</p>
                </div>
                <h5 class="m-0 pt-28 text-black pb-12">Select folio</h5>
                <mat-radio-group aria-label="Select an option" formControlName="folio">
                    <mat-radio-button value="existing"
                        [ngClass]="transactionAddForm.get('folio').value == 'existing' ? 'b-a-custom text-primary': 'b-a text-primitive'">
                        Existing
                    </mat-radio-button>
                    <mat-radio-button value="new"
                        [ngClass]="transactionAddForm.get('folio').value == 'new' ? 'b-a-custom text-primary': 'b-a text-primitive'">
                        New </mat-radio-button>
                </mat-radio-group>
                <h5 class="m-0 pt-28 text-black pb-12">Enter amount</h5>
                <div class="form-group mb-0">
                    <mat-form-field>
                        <input #employeeContry matInput maxlength="10" type="text" class="form-control br-0 rupess"
                            formControlName="employeeContry" appInputValueValidation
                            [inputValidator]="validatorType.NUMBER_ONLY" [minValue]="500">
                    </mat-form-field>
                    <p class="m-0 f-12 text-custom">Min amount: ₹500</p>
                </div>
                <h5 class="m-0 pt-28 text-black pb-12">Select investment account</h5>
                <div class="form-group mb-0">
                    <mat-form-field>
                        <mat-select class="form-control" formControlName="investmentAccountSelection">
                            <mat-option value="option">Option</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <h5 class="m-0 pt-40 text-black pb-12">Select mode of payment</h5>
                <mat-radio-group aria-label="Select an option" formControlName="modeOfPayment">
                    <mat-radio-button value="net-banking"
                        [ngClass]="transactionAddForm.get('modeOfPayment').value == 'net-banking' ? 'b-a-custom text-primary' : 'b-a text-primitive'"
                        class="b-a-custom text-primary"> Net banking
                    </mat-radio-button>
                    <mat-radio-button value="debate-mandate"
                        [ngClass]="transactionAddForm.get('modeOfPayment').value == 'debate-mandate' ? 'b-a-custom text-primary' : 'b-a text-primitive'">
                        Debit mandate </mat-radio-button>
                </mat-radio-group>
                <h5 class="m-0 pt-40 pb-12 text-black">Select bank account</h5>
                <mat-form-field>
                    <mat-select class="form-control" formControlName="bankAccountType">
                        <mat-option value="option">Option</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="col-md-8 pl-0 pr-20" *ngIf="isSaveAndAddClicked">
                <div class="row">
                    <div class="col-md-12 p-0 text-center">
                        <img src="/assets/images/svg/last-step.svg" class="pt-28">
                        <h3 class="m-0 text-primary pt-24">So far so good. One last step!</h3>
                        <h5 class="m-0 pt-12 pb-12 b-h-dashed">Your client needs to <b>authorize</b> the transaction
                            to <b>complete</b> it.</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="p-8">
                            <p class="m-0 roboto pt-28"> An email has been sent to <b>registered email id.</b> Your
                                client
                                should
                                review the <b>transaction
                                    details</b> and click on the <b>payment link</b> provided there.</p>


                            <p class="m-0 roboto pt-28"> Next, your client will be redirected to the <b>net banking
                                    page.</b> The
                                client needs to login and make
                                the payment.</p>


                            <p class="m-0 roboto pt-28"> Once the payment is done, NSE NMF will send a <b>confirmation
                                    email</b> to
                                the registered email id.</p>


                            <p class="m-0 roboto pt-28"> Additionally, the Purchase transaction has been added to the
                                <u> Transaction List.</u></p>


                            <p class="m-0 roboto pt-28"> Track transaction status - <u>Track.</u></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 bg-grey lter p-0">
                <mat-tab-group animationDuration="0ms" mat-align-tabs="center" id="ui-addtransaction-tabs">
                    <mat-tab label="Transaction summary">
                        <div class="p-20 transaction-summary">
                            <div class="row pt-16 pb-16">
                                <div class="col-md-9">
                                    <p class="m-0 roboto text-custom">Transaction platform</p>
                                    <h5 class="m-0">NSE NMF II</h5>
                                </div>
                                <div class="col-md-2">
                                    <button mat-stroked-button class="primary-sm">Edit</button>
                                </div>
                            </div>
                            <div class="row  pt-16 pb-16">
                                <div class="col-md-9">
                                    <p class="m-0 roboto text-custom">Investor details</p>
                                    <h5 class="m-0">Rahul Jain</h5>
                                    <h5 class="m-0"> IIN 5011102595 (Joint)</h5>
                                </div>
                                <div class="col-md-2">
                                    <button mat-stroked-button class="primary-sm">Edit</button>
                                </div>
                            </div>
                            <div class="row  pt-16 pb-16">
                                <div class="col-md-9">
                                    <p class="m-0 roboto text-custom">ARN/RIA and EUIN</p>
                                    <h5 class="m-0">ARN-83866
                                    </h5>
                                    <h5 class="m-0"> E023539 - Ankit Mehta</h5>
                                </div>
                                <div class="col-md-2">
                                    <button mat-stroked-button class="primary-sm">Edit</button>
                                </div>
                            </div>
                            <div class="row  pt-16 pb-16">
                                <div class="col-md-12 p-0">
                                    <p class="m-0 roboto text-custom">Scheme, folio and amount</p>
                                    <h5 class="m-0"><span class="f-500">Scheme:</span> Axis Liquid Fund -Regular Plan -
                                        Weekly Dividend Option
                                    </h5>
                                    <h5 class="m-0"> <span class="f-500">Folio:</span> 91032325824</h5>
                                    <h5 class="m-0"> <span class="f-500">Amount:</span> ₹5,00,000/Lumpsum</h5>
                                </div>
                            </div>
                            <div class="row  pt-16 pb-16">
                                <div class="col-md-9">
                                    <p class="m-0 roboto text-custom">TRANSACTION INITIATION</p>
                                    <h5 class="m-0">Immediate</h5>
                                </div>
                                <div class="col-md-2">
                                    <button mat-stroked-button class="primary-sm">Edit</button>
                                </div>
                            </div>
                            <div class="row  pt-16 pb-16">
                                <div class="col-md-9">
                                    <p class="m-0 roboto text-custom">Mode of payment</p>
                                    <h5 class="m-0">Net banking</h5>
                                </div>
                            </div>
                            <div class="row  pt-16 pb-16">
                                <div class="col-md-9">
                                    <p class="m-0 roboto text-custom">Bank A/c details</p>
                                    <h5 class="m-0">ICICI Bank</h5>
                                    <h5 class="m-0"> Saving A/c 1032*****710</h5>
                                </div>
                                <div class="col-md-2">
                                    <button mat-stroked-button class="primary-sm">Edit</button>
                                </div>
                            </div>
                        </div>
                    </mat-tab>
                    <mat-tab label="Rationale">
                        <div class="p-20 rationaletabs">
                            <p class="m-0 roboto text-custom">The scheme seeks to generate long-term capital
                                appreciation
                                from a
                                diversified portfolio of
                                predominantly equity and equity related instruments.
                            </p>
                            <p class="m-0 roboto text-custom pt-20"> Lorem ipsum dolor sit amet, consectetur adipiscing
                                elit,
                                sed
                                do
                                eiusmod tempor incididunt ut labore
                                et dolore magna aliqua. Sit amet nulla facilisi morbi tempus iaculis. Dui ut ornare
                                lectus
                                sit
                                amet
                                est placerat in egestas. Sed turpis tincidunt id aliquet risus feugiat in. Magna sit
                                amet
                                purus
                                gravida quis blandit turpis cursus.
                            </p>
                            <div class="row pt-12">
                                <div class="col-md-12 p-0">
                                    <button mat-stroked-button class="bg-white pl-12 text-custom"><img
                                            src="/assets/images/svg/attech-light.svg" class="pr-8">Fact
                                        sheet.pdf<img src="/assets/images/svg/s-cross.svg" class="pl-8"></button>

                                </div>
                                <div class="col-md-12 p-0">
                                    <button mat-stroked-button class="primary-sm mt-16">Edit</button>
                                </div>
                            </div>
                        </div>
                    </mat-tab>
                </mat-tab-group>
            </div>
        </div>
    </div>
    <div class="bottom-fixed wrapper-12 pt-16 w-65">
        <div class="row">
            <div class="col-md-4 pt-8">
                <h5 class="mb-0  text-white c-p" (click)="close()">Cancel</h5>
            </div>
            <div class="col-md-8 right pt-8" *ngIf="formStep == 'step-1' || formStep == 'step-2'">

                <h5 class="mb-0 text-white c-p" (click)="saveAndNext()"> NEXT </h5>
            </div>
            <div class="col-md-8 right pt-8" *ngIf="formStep == 'step-3'">
                <button mat-button class="text-success" (click)="saveAndAddAnother()">
                    SAVE & ADD ANOTHER
                </button>
                <button mat-button class="text-success" (click)="onAddTransaction()">
                    SAVE & PROCEED
                </button>
            </div>
        </div>
    </div>
</div>