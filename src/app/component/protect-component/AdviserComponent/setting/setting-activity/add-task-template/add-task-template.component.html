<div class="row bb-1 popup-header-fix-50">
    <div class="col-md-10 p-0">
        <h4 class="mb-0 l-22 wrapper-20">Add task template</h4>
    </div>
    <div class="col-md-2 text-right">
        <i class="material-icons pt-20 c-p pr-16" (click)="Close(false)">
            clear
        </i>
    </div>
</div>
<!-- Add task template -->


<!-- Adding a linked task template -->
<div class="row pt-90 pl-28 pr-28" [formGroup]="taskTemplate">
    <div class="col-md-12 p-0 select-category">
        <h5 class="m-0 pb-12">Select category</h5>
        <mat-radio-group aria-label="Select an option" formControlName="category">
            <mat-radio-button [value]="1" (click)="getSelectedCategory(1,'asset')" checked
                [ngClass]="taskTemplate.get('category').value == 1 ? 'text-primary bu-primary': 'b-a text-primitive'">
                Asset</mat-radio-button>
            <mat-radio-button [value]="2" (click)="getSelectedCategory(2,'insurance')"
                [ngClass]="taskTemplate.get('category').value == 2 ? 'text-primary bu-primary': 'b-a text-primitive'">
                Insurance</mat-radio-button>
            <mat-radio-button [value]="3" (click)="getSelectedCategory(3,'liability')"
                [ngClass]="taskTemplate.get('category').value == 3 ? 'text-primary bu-primary': 'b-a text-primitive'">
                Liability</mat-radio-button>
        </mat-radio-group>
        <div class="col-md-6 p-0">
            <h5 class="m-0 pb-12 pt-24">Select sub category</h5>
            <div class="form-group">
                <mat-form-field>
                    <mat-select class="form-control" formControlName="subCategory">
                        <mat-option value="Health insurance">Health insurance</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="col-md-6 p-0">
            <h5 class="m-0 pb-12 pt-24">Select {{category}}</h5>
            <div class="form-group">
                <mat-form-field>
                    <mat-select class="form-control" formControlName="subCategory">
                        <mat-option value="Health insurance">Health insurance</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="col-md-10 p-0">
            <h5 class="m-0 pb-12 pt-24">Select task template</h5>
            <div class="form-group">
                <mat-form-field>
                    <mat-select class="form-control" formControlName="taskTemplate">
                        <mat-option value="Port policy">Port policy</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="row pt-24">
            <div class="col-md-5 pl-0">
                <h5 class="m-0 pb-12">Default assigned to</h5>
                <div class="form-group">
                    <mat-form-field>
                        <mat-select class="form-control" formControlName="defaultAssign">
                            <mat-option value="Nita Shinde">Nita Shinde</mat-option>
                        </mat-select>
                        <mat-hint>Optional</mat-hint>
                    </mat-form-field>
                </div>
            </div>
            <div class="col-md-5 pr-0">
                <h5 class="m-0 pb-12">Turnaround time</h5>
                <div class="form-group">
                    <mat-form-field>
                        <mat-select class="form-control" formControlName="turnaroundTime">
                            <mat-option value="T + 1 day">T + 1 day</mat-option>
                        </mat-select>
                        <mat-hint>Optional</mat-hint>
                    </mat-form-field>
                </div>
            </div>
        </div>
        <div formArrayName="subTaskList">
            <div class="row pt-24 sub-tasks pb-60">
                <div class="col-md-12 p-0">
                    <h5 class="m-0 f-500 text-black">Sub-tasks</h5>
                    <table mat-table [dataSource]="dataSource" class="mt-8" id="table-low">

                        <ng-container matColumnDef="position">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element" class="w-70">
                                {{(editMode == true)? '':element.position}}
                                <input *ngIf="editMode == true" #position type="text"
                                    (input)="changeTableTdValue(position.value, element)" [value]="element.position">
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element" class="c-p">
                                <img src="/assets/images/svg/calander.svg">
                                <input *ngIf="editMode == true" #position type="number"
                                    (input)="changeTableTdValue(name.value, element)" [value]="element.name">
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="weight">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element" class="c-p">
                                <img src="/assets/images/svg/people.svg">
                                <mat-select class="form-control" *ngIf="editMode == true">
                                    <mat-option value="Nita Shinde">Nita Shinde</mat-option>
                                </mat-select>
                            </td>

                        </ng-container>

                        <ng-container matColumnDef="symbol">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element" class="c-p">
                                <mat-icon [matMenuTriggerFor]="menu" class="c-p">more_vert</mat-icon>
                                <mat-menu #menu="matMenu">
                                    <button mat-menu-item (click)="toggleEditMode()">
                                        Edit
                                    </button>
                                    <button mat-menu-item>
                                        Delete
                                    </button>
                                </mat-menu>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                    <p class="m-0 roboto text-custom pt-12 pb-44">+ Add sub-task</p>
                    <p class="m-0 roboto text-custom pt-12 pb-44">+ Save sub task</p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="bottom-fixed wrapper-12 w-50">
    <div class="row">
        <div class="col-md-4">
            <h5 class="mb-0 pt-8 text-white c-p" (click)="Close(false)">Cancel</h5>
        </div>
        <div class="col-md-8 right text-right">
            <button mat-button class="btn-bottom br-0 text-inherit">SAVE
            </button>
        </div>
    </div>
</div>