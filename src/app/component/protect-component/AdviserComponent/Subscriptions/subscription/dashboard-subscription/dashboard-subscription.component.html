<div class="full-lights pb-36 " *ngIf="showSubStep==false" id="ui-dashboard"
     [ngClass]="showLetsBegin==true ? 'pt-130': 'pt-0'  ">
  <div class="wrapper-20">
    <div class="row bg-red mt-20 mb-36" *ngIf="showLetsBegin">
      <div class="col-md-5">
        <img src="assets/images/svg/Dashboard.svg" class="dashboard-img">
      </div>
      <div class="col-md-7">
        <h1>Welcome Ronak Hindocha</h1>
        <p class="mb-0 pt-12">We’re excited to see you here! The dashboard currently looks barren. </p>
        <p> Fret not. We’ll help you in this journey. We’re in this together. </p>
        <button (click)="showSubscriptionSteps()" mat-flat-button class="btn-red addon mb-28 mt-16">Let's begin <i
          class="material-icons right text-right"> arrow_forward </i></button>
      </div>
    </div>
    <div class=" subscription-summary" [ngClass]="showLetsBegin==true ? 'pt-40': 'pt-100'  ">
      <div class="row">
        <div class="col-md-4 pl-0">
          <div class="bg-white pt-20 pb-16 text-center" *ngIf="dataSourceClientWithSub !=undefined">

            <div class="container">
              <div class="row">
                <div class="col-md-12">
                  <circle-progress class="progress"
                                   [percent]="dataSourceClientWithSub.activeClientPer"
                                   [radius]="100"
                                   [outerStrokeWidth]="10"
                                   [innerStrokeWidth]="10"
                                   [space]="-10"
                                   [outerStrokeColor]="'#008FFF'"
                                   [innerStrokeColor]="'#e7e8ea'"
                                   [titleFontSize]="35"
                                   [unitsFontSize]="35"
                                   [showSubtitle]="false"
                                   [animation]="true"
                                   [animationDuration]="1000"
                                   [startFromZero]="false"
                                   [responsive]="true"
                  ></circle-progress>
                  <!--<div class="progress blue">
                                            <span class="progress-left">
                                                <span class="progress-bar"></span>
                                            </span>
                    <span class="progress-right">
                                                <span class="progress-bar"></span>
                                            </span>
                    <div class="progress-value">{{dataSourceClientWithSub.activeClientPer}}%</div>
                  </div>-->
                </div>
              </div>
            </div>
            <p class="text-center f-300 pt-12 pb-24 f-18 mb-0">Clients with subscription</p>
            <div class="btl-1">
              <p class="text-center pt-16 f-300 f-18 mb-0">Subscription summary</p>
              <div class="row pt-16 pb-8">
                <div class="col-md-4 c-p">
                  <p class="f-300 f-18">Total</p>
                  <h4 class="text-left pl-20">{{dataSourceClientWithSub.activeClient}}</h4>
                </div>
                <div class="col-md-5 c-p">
                  <p class="f-300 f-18">This month</p>
                  <h4 class="text-left pl-12">{{dataSourceClientWithSub.monthSubscription}}</h4>
                </div>
                <div class="col-md-3 c-p">
                  <p class="f-300 f-18"> Today</p>
                  <h4 class="text-left pl-4">{{dataSourceClientWithSub.todayActive}}</h4>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-8 pr-0">
          <div class="row">
            <div class="col-md-6 pl-0">
              <div class="row bg-white">
                <div class="col-md-12 pt-8 text-right">
                  <!-- <i class="material-icons f-700 text-custom">
                    more_horiz
                  </i> -->
                </div>
                <div class="col-md-6">
                  <div class="pl-20 pr-20 c-p">
                    <p class="f-300 f-18 mb-0">Total sales</p>
                    <h2
                      class="text-primary mb-0 pb-28 pt-8">{{totalSaleReceived ? totalSaleReceived.totalSales : '-'}}</h2>
                  </div>
                </div>
                <div class="col-md-6 p-0">
                  <div class="pr-20 pl-20 c-p">
                    <p class="f-300 f-18 mb-0">Fee received</p>
                    <h2
                      class="text-primary mb-0 pb-28 pt-8">{{totalSaleReceived ? totalSaleReceived.feeRecieved : '-'}}</h2>

                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6 pr-0">
              <div class="row bg-white" *ngIf="dataSourceSingCount !=undefined">
                <div class="col-md-12 pt-8 text-right">
                  <!-- <i class="material-icons text-custom f-700">
                    more_horiz
                  </i> -->
                </div>
                <div class="col-md-6">
                  <div class="pl-20 pr-20 c-p">
                    <p class="f-300 f-18 mb-0">Docs sent </p>
                    <h2 class="f-26 text-primary mb-0 pb-28 pt-8">{{dataSourceSingCount.sentCount}}</h2>
                  </div>
                </div>
                <div class="col-md-6 pr-0">
                  <div class="pl-20 pr-20 c-p">
                    <p class="f-300 f-18 mb-0">Docs signed </p>
                    <h2 class="f-26 text-primary mb-0 pb-28 pt-8">{{dataSourceSingCount.signedCount}}</h2>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-white mt-32">
            <div class="row">
              <div class="col-md-12">
                <!-- <i class="material-icons right text-right text-custom pt-8 f-700">
                  more_horiz
                </i> -->
              </div>
            </div>
            <div class="ima pl-32">
              <p class="f-300 f-18 mb-0 ">Receivables summary</p>
              <h2 class="text-primary pt-8 mb-0 c-p">1,23,670</h2>
              <div [chart]="chart" class="chart"></div>

            </div>
          </div>
        </div>
        <div class="col-md-4 pl-0 mt-28">
          <div class="row bg-white pb-44">
            <div class="col-md-12 ">
              <!-- <i class="material-icons pt-8 right text-right text-custom f-700">
                more_horiz
              </i> -->
            </div>
            <div class="col-md-12 p-0 b-b">
              <h4 class="f-300 roboto pl-16 pt-16 mb-16">Invoices to be reviewed</h4>
            </div>

            <div class="col-md-12 " *ngFor="let invoice of dataSourceInvoice">

              <div class="row pt-16 b-b">
                <div class="col-md-8 pl-8">
                  <p class="f-15 mb-28">{{invoice.clientName}}</p>
                  <p class="f-13 mb-12">{{invoice.invoiceNumber}}</p>
                </div>
                <div class="col-md-4 pr-0">
                  <p class="f-15 mb-28">₹{{invoice.finalAmount}}</p>
                  <p class="f-13 mb-12">{{invoice.invoiceDate | date:'dd/MM/yyyy'}}</p>
                </div>
              </div>
            </div>

            <div class="col-md-12 text-right pt-8">
              <div (click)="changeParentsTab(4)" class="c-p">View all</div>
              <!--              <a  class="text-black f-14" ></a>-->
            </div>
          </div>
        </div>
        <div class="col-md-8 pr-0">
          <div class="wrapper-16 pt-8 bg-white mt-28 pb-20">
            <div class="row">
              <div class="col-md-12 pr-0">
                <!-- <i class="material-icons right text-right text-custom f-700">
                  more_horiz
                </i> -->
              </div>
            </div>
            <div class="pl-20 pr-2">
              <div class="row">
                <div class="col-md-6 pl-0">
                  <h4 class="f-300 mb-0 pt-8">Subscription summary</h4>
                </div>
                <div class="col-md-6 right text-right pr-0">
                  <!--                  <mat-button-toggle-group #colorToggle="matButtonToggleGroup"-->
                  <!--                                           value="primary"-->
                  <!--                                           aria-label="Change color">-->
                  <!--                    <mat-button-toggle value="primary">NOT STARTED</mat-button-toggle>-->
                  <!--                    <mat-button-toggle value="accent">UPCOMING</mat-button-toggle>-->
                  <!--                  </mat-button-toggle-group>-->
                  <mat-button-toggle-group [(ngModel)]="subscriptionSummaryStatusFilter"
                                           (change)="getSummaryDataDashboard($event.value)" multiple=false
                                           class="subscription-summary" id="custom-toggle">
                    <mat-button-toggle value=1 class="f-14">NOT STARTED</mat-button-toggle>
                    <mat-button-toggle value=3 class="f-14">UPCOMING</mat-button-toggle>
                  </mat-button-toggle-group>
                  <!-- <button mat-stroked-button class="text-primary br-0">NOT STARTED</button>
                   <button mat-button class="text-custom">UPCOMING</button>-->
                </div>
              </div>
              <div class="sub-summary">
                <table mat-table [dataSource]="dataSource" id="table-low" class="mt-8">
                  <tbody>
                  <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef> Client name</th>
                    <td mat-cell *matCellDef="let element" (click)="openPlanSlider('SUBSCRIPTIONS','open',element)"
                        class="c-p"> {{element.clientName}} </td>
                  </ng-container>
                  <ng-container matColumnDef="service">
                    <th mat-header-cell *matHeaderCellDef> Service name</th>
                    <td mat-cell *matCellDef="let element" class="c-p"> {{element.serviceName}} </td>
                  </ng-container>
                  <ng-container matColumnDef="amt">
                    <th mat-header-cell *matHeaderCellDef> Fee amount</th>
                    <td mat-cell *matCellDef="let element" (click)="Open('open',element)"
                        class="c-p text-primary text-underline"> View details
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="billing">
                    <th mat-header-cell *matHeaderCellDef> Next billing...</th>
                    <td mat-cell *matCellDef="let element"> {{element.nextBillingDate | date:'dd/MM/yyyy'}} </td>
                  </ng-container>
                  <ng-container matColumnDef="icons">
                    <th mat-header-cell *matHeaderCellDef class="f-18" style="width: 2%;"></th>
                    <td mat-cell *matCellDef="let element" style="width: 2%;"><i class="material-icons c-p iconscolors"
                                                                                 [matMenuTriggerFor]="menu">
                      more_vert
                    </i>
                      <mat-menu #menu="matMenu">
                        <a mat-menu-item (click)="Open('open',element)">View & Modify fee structure</a>
                        <a mat-menu-item class="bt-1" (click)="openPlanSlider('billerSettings','open',element)">Change
                          Biller</a>
                        <a mat-menu-item (click)="openPlanSlider('changePayee','open',element)">Change Payee</a>
                        <a mat-menu-item class="bt-1" (click)="delete('cancelSubscription')">Cancel subscription</a>
                        <a mat-menu-item (click)="deleteModal('SUBSCRIPTION')">Delete subscription</a>
                      </mat-menu>
                    </td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="col-md-12 text-right pt-8">
              <div (click)="changeParentsTab(2)" class="c-p">View all</div>

              <!--              <a href="#" class="text-black f-14">View all</a>-->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-subscription-completeness *ngIf="showSubStep"></app-subscription-completeness>
