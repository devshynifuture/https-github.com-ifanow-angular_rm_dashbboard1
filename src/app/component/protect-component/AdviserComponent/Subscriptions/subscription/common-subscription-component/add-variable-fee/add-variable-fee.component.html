<div class="popup-header-fix-60">
  <div class="row bb-1">
    <div class="col-md-8 p-0">
      <h4 class="mb-2 wrapper-20">ADD VARIABLE FEE STRUCTURE</h4>
    </div>
    <div class="col-md-4 text-right">
      <div class="wrapper-12">
        <i class="material-icons c-p pt-8" (click)="Close('close')"> clear</i>
      </div>
    </div>
  </div>
</div>
<div [formGroup]="variableFeeData" class="wrapper-20 pt-44 mb-44 pb-44">
  <div class="row pt-40">
    <div class="col-md-5">
      <h5 class="text-right pt-4 mb-0">Service Name</h5>
      <p class="m-0 text-custom f-12 right roboto">This name will appear in invoices</p>
    </div>
    <div class="col-md-5 pr-0">
      <div class="form-group mb-0">
        <input type="text" maxlength="{{getFormControl().serviceName.maxLength}}" formControlName="serviceName"
          class="form-control br-0">
      </div>
      <div class="row">
        <div class="col-md-8">
          <mat-error class="f-12 pt-4"
            [ngClass]="{'v-h':!(isServiceValid && getFormControl().serviceName.invalid || (getFormControl().serviceName.touched && getFormControl().serviceName.invalid))}">
            Service Name is required
          </mat-error>
        </div>
        <div class="col-md-4">
          <p class="mb-0 f-12 text-custom text-right pt-4">
            {{getFormControl().serviceName.value?.length ? getFormControl().serviceName.value.length : 0}}
            /{{getFormControl().serviceName.maxLength}}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-8 mb-0">Code</h5>
    </div>
    <div class="col-md-7">
      <div class="row">
        <div class="col-md-5 p-0">
          <div class="form-group mb-0">
            <input #codeRef type="text" appCodeText [maxLength]="10" formControlName="code" class="form-control br-0">

          </div>
          <div class="row">
            <div class="col-md-9 pr-0">
              <mat-error class="f-12 pt-4"
                [ngClass]="{'v-h':!(isCodeValid && getFormControl().code.invalid || getFormControl().code.touched && getFormControl().code.invalid)}">
                Code is required
              </mat-error>
            </div>
            <div class="col-md-3 pl-0">
              <p class="mb-0 f-12 text-custom text-right pt-4">
                {{ codeRef.value.length }}/{{ getFormControl().code.maxLength }}
                <!-- {{getFormControl().code.value?.length ? getFormControl().code.value.length : 0}}
                /{{getFormControl().code.maxLength}} -->
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-12 mb-0">Description</h5>
    </div>
    <div class="col-md-5 pr-0">

      <div class="form-group mb-0">
        <textarea class="form-control br-0" maxlength="{{getFormControl().description.maxLength}}"
          formControlName="description" rows="3"></textarea>
      </div>
      <div class="row">
        <div class="col-md-6">
          <p class="mb-0 f-12 text-custom">optional</p>
        </div>
        <div class="col-md-6">
          <p class="mb-0 f-12 text-custom text-right">
            {{getFormControl().description.value?.length ? getFormControl().description.value.length : 0}}/{{getFormControl().description.maxLength}}
          </p>
        </div>

      </div>

    </div>
  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-12 mb-0">Bill every</h5>
    </div>
    <div class="col-md-7">
      <div class="row">
        <div class="col-md-5 p-0">
          <div class="form-group mb-0">
            <input [inputValidator]="validatorType.NUMBER_ONLY" [maxLength]="2" appInputValueValidation
              formControlName="billEvery" type="text" class="form-control br-0 br-none">
          </div>
        </div>
        <div class="col-md-5 p-0">
          <div class="form-group">
            <select class="form-control br-0" formControlName="Duration" id="sel1">
              <option value="1">Months</option>
              <option value="2">Years</option>
            </select>
          </div>
        </div>
        <mat-error class="f-12 pt-4"
          [ngClass]="{'v-h':!(isBillValid && getFormControl().billEvery.invalid || getFormControl().billEvery.touched && getFormControl().billEvery.invalid)}">
          Billevery is required
        </mat-error>
      </div>
    </div>
  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-12 mb-0">Mutual fund fees</h5>
      <p class="mb-0 f-12 text-custom text-right">Enter yearly rates here even if your <br>charging mode is monthly or
        quarterly.<br> We will calculate accordingly.</p>
    </div>
    <div class="col-md-7">
      <div class="row bg-grey lter">
        <div formGroupName="directFees" class="col-md-6 p-0 bt-grey bl-1 ">
          <h5 class="m-0 wrapper-12 text-center text-black bb-grey br-grey">Direct (per annum) %</h5>
          <div class="row">
            <div class="col-md-4 p-0 br-grey bl-0">
              <h5 class="m-0 wrapper-8 bb-grey">Equity</h5>
            </div>
            <div class="col-md-4 p-0 br-grey">
              <h5 class="m-0 wrapper-8 bb-grey">Debt</h5>
            </div>
            <div class="col-md-4 p-0">
              <h5 class="m-0 wrapper-8 bb-grey br-grey">Liquid</h5>
            </div>
          </div>
          <div class="row ui-mff">
            <div class="col-md-4 p-0 bl-0 br-grey bb-grey">
              <input [inputValidator]="validatorType.NUMBER_ONLY" [maxLength]="4" appInputValueValidation
                formControlName="equity" placeholder="%" type="text" class="form-control br-0 h-39">
            </div>
            <div class="col-md-4 p-0 br-grey bb-grey">
              <input [inputValidator]="validatorType.NUMBER_ONLY" [maxLength]="4" appInputValueValidation
                formControlName="debt" placeholder="%" type="text" class="form-control br-0 h-39">
            </div>
            <div class="col-md-4 p-0 bb-grey br-grey">
              <input [inputValidator]="validatorType.NUMBER_ONLY" [maxLength]="4" appInputValueValidation
                formControlName="liquid" placeholder="%" type="text" class="form-control br-0 h-39">
            </div>
          </div>
        </div>

        <div formGroupName="regularFees" class="col-md-6 p-0 bt-grey ">
          <h5 class="m-0 wrapper-12 text-center text-black bb-grey br-grey">Regular (per annum) %</h5>

          <div class="row">
            <div class="col-md-4 p-0 br-grey bl-0">
              <h5 class="m-0 wrapper-8 bb-grey">Equity</h5>
            </div>
            <div class="col-md-4 p-0 br-grey">
              <h5 class="m-0 wrapper-8 bb-grey">Debt</h5>
            </div>
            <div class="col-md-4 p-0">
              <h5 class="m-0 wrapper-8 bb-grey br-grey">Liquid</h5>
            </div>
          </div>
          <div class="row ui-mff">
            <div class="col-md-4 p-0 bl-0 bb-grey br-grey">
              <input [inputValidator]="validatorType.NUMBER_ONLY" [maxLength]="4" appInputValueValidation
                formControlName="equity" placeholder="%" type="text" class="form-control br-0 h-39 br-grey">
            </div>
            <div class="col-md-4 p-0 br-grey bb-grey">
              <input [inputValidator]="validatorType.NUMBER_ONLY" [maxLength]="4" appInputValueValidation
                formControlName="debt" placeholder="%" type="text" class="form-control br-0 h-39">
            </div>
            <div class="col-md-4 p-0 br-grey bb-grey">
              <input [inputValidator]="validatorType.NUMBER_ONLY" [maxLength]="4" appInputValueValidation
                formControlName="liquid" placeholder="%" type="text" class="form-control br-0 h-39">
            </div>
          </div>
        </div>
      </div>
      <mat-error [ngClass]="{'v-h':!mutualFundFees}" class="f-12 pt-4">Please fill fees details</mat-error>
    </div>
  </div>

  <div class="row pt-44">
    <div class="col-md-5">
      <h5 class="text-right pt-12 mb-0">Other asset class fees</h5>
      <p class="mb-0 f-12 text-custom text-right">This includes assets like stocks,<br> insurance, FD, real
        estate, gold etc. You <br>can add or remove asset classes.</p>
    </div>
    <div class="col-md-7">
      <div class="row">
        <div class="col-md-10 p-0">
          <div class="b-grey wrapper-12">
            <mat-chip-list aria-label="Fish selection">
              <mat-chip (click)="select(assets)" *ngFor="let assets of otherAssetData"
                [ngClass]="{'btn-primary':assets.isActive==1}" class="f-13 f-400 wrapper-16"><i
                  class="material-icons mr-8 text-grey f-16">
                  check
                </i>
                <div *ngIf="assets">{{assets.subAssetClassName}}</div>
              </mat-chip>
            </mat-chip-list>
          </div>
        </div>
        <div class="col-md-2 p-0">
          <!--          [minValue]="0.001" [maxValue]="99"-->
          <input [inputValidator]="validatorType.NUMBER_ONLY" [maxLength]="4" appInputValueValidation
            formControlName="pricing" placeholder="%" type="text" class="form-control bl-0 br-0 h-39 br-grey">
          <mat-error *ngIf="(variableFeeData.get('pricing').errors)" class="f-12 pt-4">
            Should be between than 0.01 to 99
          </mat-error>
        </div>
      </div>
      <mat-error *ngIf="pricing && getFormControl().pricing.invalid" class="f-12 pt-4 pr-10">Please fill details
      </mat-error>
    </div>
  </div>
</div>
<div class="bottom-fixed wrapper-12">
  <div class="row">
    <div class="col-md-4">
      <h5 class="mb-0 pt-8 text-white c-p" (click)="Close('Close')">Cancel</h5>
    </div>
    <div class="col-md-8 right text-right">
      <button mat-button class="btn-bottom br-0 text-inherit" (click)="saveVariableFeeData('2')">Save</button>
    </div>
  </div>
</div>