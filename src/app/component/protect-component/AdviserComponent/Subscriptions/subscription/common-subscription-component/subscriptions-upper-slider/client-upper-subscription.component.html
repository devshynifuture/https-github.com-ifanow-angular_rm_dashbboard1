<div class="wrapper-20 bg-grey lter heading-fix">
    <h3 class="m-0 text-center f-24">{{clientSubscriptionData.name}}</h3>
</div>
<div class="bg-white" *ngIf="dataSource==undefined">
    <div class="align-center">
        <div class="row">
            <div class="col-md-12 pt-150">
                <h5 class="pt-44">Hey, it seems{{clientSubscriptionData.name}} hasn’t been subscribed to any Services
                    yet. You need
                    to add a Plan to get going. </h5>
                <h5>Once a Plan is added, all the associated Services (along with the fee structure) will be added. If
                    you want, you can customize the fee structure for this client. Each Service will have it’s own
                    Subscription attached to it.
                </h5>
                <h5>Next, you will be able to send Quotations, sign Documents etc.</h5>
                <h5>Let’s get started!</h5>
                <button mat-stroked-button class="btn-primary br-0 mt-44"
                    (click)="openPlanSlider('planRightSlider','open',null)">Add
                    Plan
                </button>
            </div>
        </div>
    </div>
</div>

<!-- <div  class="bg-grey lter heading-fix">
    <div class="row b-a">
        <div class="col-md-12 p-0">
            <h2>Dhyaan Ronak Hindocha</h2>
          </div>
    </div>
</div> -->
<div class="bg-white" *ngIf="dataSource && dataSource.length>0">
    <div class="wrapper-20 pb-0 pt-150 mt-44">
        <div class="row">
            <div class="col-md-12 p-0 pt-16">
                <button mat-stroked-button class="btn-primary br-0 right text-right addon"
                    (click)="openPlanSlider('planRightSlider','open',null)"><i class="material-icons">
                        add
                    </i> ADD PLAN
                </button>
                <button mat-button class="br-0 text-black right text-right mr-12">HELP</button>
            </div>
        </div>
    </div>

    <div class="wrapper-40 pt-0 mt-12 col-md-12 overflow-hidden">
        <h4 class="pb-8 text-black" *ngIf="dataSource != undefined">{{dataSource[0].planName}}</h4>


        <table matSort mat-table [dataSource]="dataSource" id="table-low" class="mt-8 skeletonAnimation"
            appSkeletonLoading [appSkeletonLoading]="isLoading">
            <ng-container matColumnDef="service">
                <th mat-sort-header="serviceName" mat-header-cell *matHeaderCellDef class="f-18"> Service name</th>
                <td mat-cell *matCellDef="let element">
                    <div class="bar">
                        {{element.serviceName}}
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="amt">
                <th mat-header-cell *matHeaderCellDef class="f-18"> Fee amount</th>
                <td mat-cell *matCellDef="let element" (click)="Open('open',element)"
                    class="c-p text-primary text-underline">
                    View details
                </td>
            </ng-container>

            <ng-container matColumnDef="type">
                <th mat-sort-header="feeTypeId" mat-header-cell *matHeaderCellDef class="f-18"> Fee type</th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element.subscriptionPricing">
                        <span class="t-10" *ngIf="element.subscriptionPricing.feeTypeId==1">FIXED</span>
                        <span class="t-10" *ngIf="element.subscriptionPricing.feeTypeId==2">VARIABLE</span>
                    </span>
                </td>
            </ng-container>

            <ng-container matColumnDef="subs">
                <th mat-sort-header="subscriptionNumber" mat-header-cell *matHeaderCellDef class="f-18"> Subscription #
                </th>
                <td mat-cell *matCellDef="let element">
                    <div class="bar">
                        {{element.serviceName}}
                    </div>{{element.subscriptionNumber}}
                </td>
            </ng-container>

            <ng-container matColumnDef="status">
                <th mat-sort-header="status" mat-header-cell *matHeaderCellDef class="f-18"> Status</th>
                <td mat-cell *matCellDef="let element">
                    <div class="bar">
                        <span class="text-success t-10 " *ngIf="element.status==1">NOT STARTED</span>
                        <span class="text-primary t-10 " *ngIf="element.status==2">LIVE</span>
                        <span class="text-custom t-10 " *ngIf="element.status==3">FUTURE</span>
                        <span class="text-danger t-10 " *ngIf="element.status==4">CANCELLED</span>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="date">
                <th mat-sort-header="startsOn" mat-header-cell *matHeaderCellDef class="f-18"> Activation date</th>
                <th mat-header-cell *matHeaderCellDef> Activation date</th>
                <td mat-cell *matCellDef="let element">
                    <div class="bar">
                        <div *ngIf="element.status!=1"> {{element.startsOn | date:'dd/MM/yyyy'}}</div>
                        <div *ngIf="element.status==1" (click)="openPlanSlider('createSub','open',element)">
                            <button mat-stroked-button class="btn-header btn-xs ml-8 br-0 btn-sm">START</button>
                        </div>
                    </div>
                    <!-- <div (click)="openPlanSlider('createSub','open',element)">
              <button class="btn-header btn-xs ml-8 br-0 btn-sm" mat-stroked-button>START
              </button>
            </div> -->
                </td>
            </ng-container>
            <ng-container matColumnDef="bdate">
                <th mat-sort-header="prevBillingDate" mat-header-cell *matHeaderCellDef class="f-18"> Last billing date
                </th>
                <td mat-cell *matCellDef="let element">
                    <div class="bar">
                        {{element.prevBillingDate | date:'dd/MM/yyyy'}}
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="ndate">
                <th mat-sort-header="nextBillingDate" mat-header-cell *matHeaderCellDef class="f-18"> Next billing date
                </th>
                <td mat-cell *matCellDef="let element">
                    <div class="bar">
                        {{element.nextBillingDate | date:'dd/MM/yyyy'}}
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="mode">
                <th mat-header-cell *matHeaderCellDef class="f-18"> Fee collection mode</th>
                <td mat-cell *matCellDef="let element">
                    <div class="bar"> </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="icons">
                <th mat-header-cell *matHeaderCellDef class="f-18" style="width: 2%;"></th>
                <td mat-cell *matCellDef="let element" style="width: 2%;">

                    <i class="material-icons c-p iconscolors" [matMenuTriggerFor]="menu"
                        [matMenuTriggerFor]="belowMenu">
                        more_vert
                    </i>
                    <mat-menu #menu="matMenu">
                        <a mat-menu-item (click)="Open('open',element)">View & Edit fee structure</a>
                        <a mat-menu-item class="bt-1" (click)="openPlanSlider('billerSettings','open',element)">Change
                            Biller</a>
                        <a mat-menu-item class="bt-1" (click)="openPlanSlider('changePayee','open',element)">Change
                            Payee</a>
                        <a *ngIf="element.status!=1" mat-menu-item class="bt-1"
                            (click)="delete('cancelSubscription',element)">Cancel subscription</a>
                        <a mat-menu-item class="bt-1" (click)="deleteModal('SUBSCRIPTION',element)">Delete
                            subscription</a>
                    </mat-menu>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky : true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <h4 *ngIf="dataSource==undefined" class="text-center pt-72">{{noData}}</h4>


    </div>
</div>