<div class="popup-header-fix-60">
  <div class="row bb-1">
    <div class="col-md-8 p-0">
      <h4 class="mb-2 wrapper-20">ADD FIXED FEE STRUCTURE</h4>
    </div>
    <div class="col-md-4 text-right">
      <div class="wrapper-12">
        <i class="material-icons c-p pt-8 v-middle" (click)="Close('close');fixedFeeData.reset()"> clear</i>
      </div>
    </div>
  </div>
</div>
<div [formGroup]="fixedFeeData" class="wrapper-16 pt-44 pb-44 mb-44">
  <div class="row pt-60">
    <div class="col-md-5">t
      <h5 class="text-right pt-4 mb-0">Service Name</h5>
      <p class="m-0 text-custom f-12 right roboto">This name will appear in invoices</p>
    </div>
    <div class="col-md-5 pr-0">
      <div class="form-group mb-0">
        <input type="text" appInputValueValidation [inputValidator]="validatorType.TEXT_ONLY"
          maxlength="{{getFormControl().serviceName.maxLength}}" formControlName="serviceName"
          class="form-control br-0">
      </div>
      <div class="row">
        <div class="col-md-8">
          <mat-error class="f-12 pt-4"
            [ngClass]="{'v-h':!(isServiceValid && getFormControl().serviceName.invalid || (getFormControl().serviceName.touched && getFormControl().serviceName.invalid))}">
            Service name is required
          </mat-error>
        </div>
        <div class="col-md-4">
          <p class="mb-0 f-12 text-custom text-right pt-4">
            {{getFormControl().serviceName.value?.length ? getFormControl().serviceName.value.length : 0}}
            /{{getFormControl().serviceName.maxLength}}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-8 mb-0">Code</h5>
    </div>
    <div class="col-md-7">
      <div class="row">
        <div class="col-md-5 p-0">
          <div class="form-group mb-0">
            <input #codeRef type="text" appCodeText [maxLength]="10" formControlName="code" class="form-control br-0">
          </div>

          <div class="row">
            <div class="col-md-8 pr-0">
              <mat-error class="f-12 pt-4"
                [ngClass]="{'v-h':!(isCodeValid && getFormControl().code.invalid || getFormControl().code.touched && getFormControl().code.invalid)}">
                Code is required
              </mat-error>
            </div>
            <div class="col-md-4 pl-0">
              <p class="mb-0 f-12 text-custom text-right pt-4">
                {{codeRef.value.length}}
                /{{getFormControl().code.maxLength}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-12 mb-0">Description</h5>
    </div>
    <div class="col-md-5 pr-0">

      <div class="form-group mb-0">
        <textarea class="form-control br-0" maxlength="{{getFormControl().description.maxLength}}"
          formControlName="description" rows="3"></textarea>
      </div>
      <div class="row">
        <div class="col-md-8">
          <p class="mb-0 f-12 text-custom">Optional</p>
        </div>
        <div class="col-md-4">
          <p class="mb-0 f-12 text-custom text-right">
            {{getFormControl().description.value?.length ? getFormControl().description.value.length : 0}}
            /{{getFormControl().description.maxLength}}</p>
        </div>

      </div>

    </div>
  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-8 mb-0">Fees</h5>
    </div>
    <div class="col-md-5 pr-0">
      <div class="form-group mb-0">
        <!-- <input type="number" (keypress)="utils.keyPress($event)" maxlength="10" formControlName="fees"
          class="form-control br-0"> -->
        <input #feesRef type="text" class="form-control br-0" appInputValueValidation
          [inputValidator]="validatorType.NUMBER_ONLY" [maxLength]="10" formControlName="fees">
      </div>
      <div class="row">
        <div class="col-md-8">
          <mat-error class="f-12 pt-4"
            [ngClass]="{'v-h':!(isFeesValid && getFormControl().fees.invalid || getFormControl().fees.touched && getFormControl().fees.invalid)}">
            Fees is Required
          </mat-error>
        </div>
        <div class="col-md-4">
          <p class="mb-0 f-12 text-custom text-right pt-4">
            {{feesRef.value.length}}
            /{{getFormControl().fees.maxLength}} </p>
        </div>
      </div>
    </div>
  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-12 mb-0">Billing nature</h5>
    </div>
    <div class="col-md-6">
      <mat-radio-group formControlName="billingNature">
        <mat-radio-button value="1"
          [ngClass]="{'b-a-custom': fixedFeeData.get('billingNature').value==1,'text-primary':fixedFeeData.get('billingNature').value==1,'b-a':fixedFeeData.get('billingNature').value==2}"
          class="b-a-custom text-primary pt-8 pb-8 pr-52 pl-20 custom-radio">Recurring
        </mat-radio-button>
        <mat-radio-button value="2"
          [ngClass]="{'b-a-custom': fixedFeeData.get('billingNature').value==2,'text-primary':fixedFeeData.get('billingNature').value==2,'b-a':fixedFeeData.get('billingNature').value==1}"
          class="b-a pt-8 pr-40 pl-20 pr-76 pb-8">Once
        </mat-radio-button>
      </mat-radio-group>
    </div>
  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-12 mb-0">Bill every</h5>
    </div>
    <div class="col-md-7">
      <div class="row">
        <div class="col-md-5 p-0">
          <div class="form-group mb-0">
            <input type="text" appNumberOnly [maxLength]="2" formControlName="billEvery"
              class="form-control br-0 br-none">
          </div>
        </div>

        <div class="col-md-5 p-0">
          <div class="form-group mb-0">
            <select class="form-control br-0" formControlName="Duration" id="sel1">
              <option value="1">Monthly</option>
              <option value="2">Yearly</option>
            </select>
          </div>
        </div>
        <mat-error class="f-12 pt-4"
          [ngClass]="{'v-h':!(isbillEvery && getFormControl().billEvery.invalid || getFormControl().billEvery.touched && getFormControl().billEvery.invalid)}">
          Field is Required
        </mat-error>
      </div>
    </div>

  </div>
  <div class="row pt-28">
    <div class="col-md-5">
      <h5 class="text-right pt-12 mb-0">Billing Mode</h5>
    </div>
    <div class="col-md-7">
      <mat-radio-group formControlName="billingMode">
        <mat-radio-button value="1"
          [ngClass]="{'b-a-custom text-primary':fixedFeeData.get('billingMode').value==1,'b-a':fixedFeeData.get('billingMode').value==2}"
          class="text-custom wrapper-8">Start of period
        </mat-radio-button>
        <mat-radio-button value="2"
          [ngClass]="{'b-a-custom text-primary':fixedFeeData.get('billingMode').value==2,'b-a':fixedFeeData.get('billingMode').value==1}"
          class="text-custom wrapper-8">End of period
        </mat-radio-button>
      </mat-radio-group>
    </div>
  </div>
</div>
<div class="bottom-fixed wrapper-12 pt-16">
  <div class="row">
    <div class="col-md-4 pt-8">
      <h5 class="mb-0  text-white c-p" (click)="Close('close')">Cancel</h5>
    </div>
    <div class="col-md-8 right text-right">
      <button mat-button class="btn-bottom br-0 text-inherit" (click)="saveFeeTypeData('1','close')">Save</button>
    </div>
  </div>
</div>