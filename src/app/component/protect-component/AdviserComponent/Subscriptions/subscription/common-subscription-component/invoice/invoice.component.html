<!--Main invoice section-->
<div id="ui-invoice-pdf-documents" *ngIf="invoiceInSub=='invoiceSubscription' && showEdit==false">
  <div class="bg-white pt-72 ">
    <div class="row b-b">
      <div class="col-md-4 p-0">
        <div class="row">
          <div class="col-md-5 pl-8 pt-4 pr-8">
            <h4 class="mb-0 wrapper-8 pt-12">Invoices</h4>
          </div>
          <!-- <div class="col-md-7 text-right pt-4 right">
            <button class="btn-primary br-0 my-btn mt-4" mat-stroked-button><i class="material-icons">
                add
              </i></button>
          </div> -->
        </div>
      </div>
      <div class="col-md-8 bl-1 p-0">
        <div class="row ">
          <div class="col-md-10">
            <h3 class="f-400 wrapper-16 pl-8 mb-0">{{storeData.invoiceNumber}}</h3>
          </div>
          <div (click)="Close('close', false)" class="col-md-2">
            <i class="material-icons text-right pt-16 c-p right">
              clear
            </i>
          </div>
        </div>
      </div>
    </div>
    <div class="row ">
      <div class="col-md-4 p-0 max-height-100">
        <div (click)="passInvoice(strData,i,$event)" *ngFor="let strData of dataInvoices let i=index"
          [ngClass]="(strData.id==storeData.id)?'bg-grey lter':'b-b'" class="invoiceSpacing b-b c-p">
          <div class="row">
            <div class="col-md-8">
              <p class="m-0 f-15">{{strData.clientName}}</p>
            </div>
            <div class="col-md-4 text-right pr-8">
              <p class="m-0 f-15">{{formatter(strData.finalAmount)}}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-md-5">
              <p class="m-0 f-13 pt-12">{{strData.invoiceNumber}}</p>
            </div>
            <div class="col-md-2 p-0">
              <p class="m-0 f-13 pt-12">{{strData.invoiceDate | date:'dd/MM/yyyy'}}</p>
            </div>
            <div class="col-md-5 text-right pr-8">
              <p [ngClass]="{'text-danger':strData.status==2,'text-primary':strData.status==0,'text-success':strData.status==1}"
                class="m-0 f-13 pt-12">
                {{(strData.status == 0) ? 'UNPAID' : (strData.status == 1) ? 'PAID' : (strData.status == 2) ? 'OVERDUE' : ''}}
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-8 p-0 bl-1 ">
        <div *ngIf="showRecord==false && feeCalc==false" class="row bb-1 pt-16">
          <div class="col-md-8 text-custom">
            <img (click)="editInvoice()" class="c-p" src="assets/images/svg/pencil.svg">
            <img (click)="openSendEmail(null)" class="b-a" src="assets/images/svg/mail-light.svg">
            <img (click)="generatePdf()" class="b-a " src="assets/images/svg/pdf-icons.svg">
            <img (click)="printPage(invoiceTemplate)" class="b-a " src="assets/images/svg/printer.svg">
            <img (click)="deleteModal('INVOICE',storeData.id)" class="b-a wrapper-9 ml-8"
              src="assets/images/svg/delete.svg">
          </div>
          <div class="col-md-4 right text-right">
            <button (click)="recordPayment()" class="btn-primary br-0 mb-12" *ngIf="rpyment==true"
              mat-stroked-button>RECORD
              PAYMENT
            </button>
          </div>
        </div>
        <div #invoiceTemplate *ngIf="showRecord==false && feeCalc==false" class="b-a m-20 pb-28 max-height-100">
          <div class="p-16">
            <div class="row">
              <div class="col-md-9">
                <h1 class="f-42 text-custom pt-48 f-700">INVOICE</h1>
              </div>
              <div class="col-md-3 text-right">
                <img class="pt-20"
                  src="https://res.cloudinary.com/futurewise/image/upload/v1568097552/icons_fnvpa7.png">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <h4 class="text-black pt-48">{{storeData.billerName}}</h4>
                <p class="f-14 text-custom l-20 wb">{{storeData.billerAddress}}</p>
              </div>
              <div class="col-md-6">
                <h4 class="text-black pt-48">{{storeData.clientName}}</h4>
                <p class="f-14 text-custom l-20 wb">{{storeData.billingAddress}}</p>
              </div>
            </div>
            <div class="row pt-44">
              <div class="col-md-8">
                <p class="text-black f-400"><span class="text-custom f-16">Invoice no</span>:
                  {{storeData.invoiceNumber}}
                </p>
                <p class="text-black f-400"><span class="text-custom f-16">Invoice date</span>:
                  {{storeData.invoiceDate| date:'dd/MM/yyyy'}}
                </p>
              </div>
              <div class="col-md-4">
                <h2
                  [ngClass]="{'text-danger':storeData.status==0,'text-primary':storeData.status==1,'text-success':storeData.status==2}">
                  {{(storeData.status == 0) ? 'OVERDUE' : (storeData.status == 1) ? 'OVERDUE' : (storeData.status == 2) ? 'PAID' : ''}}
                </h2>
              </div>
            </div>
            <div class="p-9">
              <div class="b-a">
                <div class="row bg-grey lter b-b p-16 pr-0 pl-0">
                  <div class="col-md-9">
                    <h4 class="m-0 f-14 f-500"> Description </h4>
                  </div>
                  <div class="col-md-3 ">
                    <h4 class="m-0 f-14 f-500 text-right"> Amount </h4>
                  </div>
                </div>
                <div class="row p-16 pr-0 pl-0">
                  <div class="col-md-9">
                    <h4 class="m-0 f-14">{{storeData.services[0].serviceName}}</h4>
                    <span class="m-0 f-14 text-custom"> {{storeData.services[0].description}}</span>
                  </div>
                  <div class="col-md-3 d-flex align-items-center justify-content-end">
                    <h4 class="m-0 f-14  text-right"> ₹{{formatter(storeData.subTotal)}}</h4>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-7 mt-70">
                <h4 class="m-0 f-14 f-500 text-left"> Footnote description </h4>
                <p class="f-12 text-black f-400 roboto"> {{storeData.footnote}}</p>
                <h4 class="m-0 f-14 f-500 text-left">Terms & conditions </h4>
                <p class="f-12 text-black f-400 roboto"> {{storeData.terms}}</p>
              </div>
              <div class="col-md-5">
                <div class="row pt-44">
                  <div class="col-md-8">
                    <p class="text-black f-400">Sub total</p>
                  </div>
                  <div class="col-md-4 pr-8 text-right">
                    <p class="text-black f-400">₹{{formatter(storeData.subTotal)}}</p>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-8">
                    <p class="text-black f-400">Discount</p>
                  </div>
                  <div class="col-md-4 pr-8 text-right">
                    <p class="text-black f-400">₹{{formatter(storeData.discount)}}</p>
                  </div>
                </div>
                <div *ngIf="storeData.igst!=undefined" class="row">
                  <div class="col-md-8">
                    <p>IGST ({{storeData.igst}}%)</p>
                  </div>
                  <div class="col-md-4 pr-8">
                    <p class="text-right">₹{{formatter(storeData.igstTaxAmount)}}</p>
                  </div>
                </div>
                <div *ngIf="storeData.cgst!=undefined" class="row">
                  <div class="col-md-8">
                    <p>CGST ({{storeData.cgst}}%)</p>
                  </div>
                  <div class="col-md-4 pr-8">
                    <p class="text-right">₹{{formatter(storeData.cgstTaxAmount)}}</p>
                  </div>
                </div>
                <div *ngIf="storeData.sgst!=undefined" class="row">
                  <div class="col-md-8">
                    <p>SGST ({{storeData.sgst}}%)</p>
                  </div>
                  <div class="col-md-4 pr-8">
                    <p class="text-right">₹{{formatter(storeData.sgstTaxAmount)}}</p>
                  </div>
                </div>
                <div class="row bt-1">
                  <div class="col-md-8">
                    <p class="f-500 roboto pt-8">Total</p>
                  </div>
                  <div *ngIf="storeData.cgst!=undefined && storeData.sgst!=undefined" class="col-md-4 pr-8 text-right">
                    <p class="f-500 roboto pt-8">₹{{formatter(storeData.finalAmount)}}</p>
                  </div>
                  <div *ngIf="storeData.igst!=undefined" class="col-md-4 pr-8 text-right">
                    <p class="f-500 roboto pt-8">₹{{formatter(storeData.finalAmount)}}</p>
                  </div>
                </div>
                <div class="row bt-1 bb-1">
                  <div class="col-md-8">
                    <p class="f-500 roboto pt-8">Balance due</p>
                  </div>
                  <div class="col-md-4 pr-8">
                    <p class="f-500 roboto pt-8 text-right">₹{{formatter(storeData.balanceDue)}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="wrapper-9">
              <div *ngIf="storeData.services[0].id != undefined" class="row b-a bg-grey lter ">
                <div class="col-md-10 d-flex  align-items-center">
                  <p class="m-0 text-black f-500  ">Fee calculation - Attachment</p>
                </div>
                <div class="col-md-2 wrapper-9 text-right">
                  <button (click)="OpenFeeCalc()" class="btn-primary br-0" mat-stroked-button>View
                  </button>
                </div>
              </div>
              <div *ngIf="showPaymentRecive == true" class="row p-24 pl-0 pr-0 ">
                <div class="col-md-12 p-0">
                  <h5 class="m-0 text-black">Payments recieved</h5>
                </div>
              </div>
              <table *ngIf="showPaymentRecive == true" [dataSource]="dataSource" class="" id="table-low" mat-table>
                <ng-container matColumnDef="date">
                  <th *matHeaderCellDef mat-header-cell>Date</th>
                  <td *matCellDef="let element" mat-cell> {{element.paymentDate | date:'dd/MM/yyyy'}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="reference">
                  <th *matHeaderCellDef mat-header-cell> Reference</th>
                  <td *matCellDef="let element" mat-cell> {{storeData.invoiceNumber}} </td>
                </ng-container>
                <ng-container matColumnDef="paymentMode">
                  <th *matHeaderCellDef mat-header-cell> Payment mode</th>
                  <td *matCellDef="let element" mat-cell> {{element.paymentMode}} </td>
                </ng-container>
                <ng-container matColumnDef="amount">
                  <th *matHeaderCellDef mat-header-cell> Amount(₹)</th>
                  <td *matCellDef="let element" mat-cell> {{element.amountReceived}} </td>
                </ng-container>
                <ng-container matColumnDef="icons">
                  <th *matHeaderCellDef class="f-18 t-2" mat-header-cell></th>
                  <td *matCellDef="let element" class="t-2" mat-cell>
                    <i [matMenuTriggerFor]="menu" class="material-icons c-p iconscolors">
                      more_vert
                    </i>
                    <mat-menu #menu="matMenu">
                      <a (click)="editForm(element)" mat-menu-item>Edit</a>
                    </mat-menu>
                  </td>
                </ng-container>
                <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
                <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>
              </table>
            </div>
          </div>
        </div>
        <!--record payment div start-->
        <div *ngIf="showRecord==true">
          <app-record-payment [InvRecordData]="sendRecordPaymentData" [padding]="false" (outputData)='display($event)'>
          </app-record-payment>
        </div>
        <!--Fee calculation Div start-->
        <div *ngIf="feeCalc==true">
          <app-fee-calculations [padding]="false"></app-fee-calculations>
        </div>
      </div>
    </div>
  </div>
</div>
<!--Invoices in client Section-->
<div *ngIf="invoiceInSub!='invoiceSubscription'&& showEdit==false">
  <div class="row bb-1 popup-header-fix-60">
    <div class="col-md-10 pl-0">
      <h4 class="f-400 wrapper-20 mb-0">{{storeData.invoiceNumber}}</h4>
    </div>
    <div class="col-md-2">
      <i (click)="Close('close', false)" class="material-icons text-right pt-16 pr-16 c-p right">
        clear
      </i>
    </div>
  </div>
  <div *ngIf="showRecord==false && feeCalc==false" class="row bb-1 pt-72">
    <div class="col-md-8 text-custom">
      <img (click)="editInvoice()" class="c-p" src="assets/images/svg/pencil.svg">
      <img (click)="openSendEmail('upper')" class="b-a" src="assets/images/svg/mail-light.svg">
      <img class="b-a " src="assets/images/svg/pdf-icons.svg">
      <img (click)="printPage(invoiceTemplate)" class="b-a " src="assets/images/svg/printer.svg">
      <img (click)="deleteModal('INVOICE',element)" class="b-a wrapper-9 ml-8" src="assets/images/svg/delete.svg">
    </div>
    <div class="col-md-4 right text-right">
      <button (click)="recordPayment()" class="btn-primary br-0 mb-8" *ngIf="rpyment==true" mat-stroked-button>RECORD
        PAYMENT</button>
    </div>
  </div>
  <div *ngIf="showRecord==false && feeCalc==false" class="b-a m-20 mb-100 pb-28">
    <div class="row">
      <div class="col-md-9">
        <h1 class="f-42 text-custom pt-48 f-700">INVOICE</h1>
      </div>
      <div class="col-md-3 text-right">
        <img class="pt-20" src="https://res.cloudinary.com/futurewise/image/upload/v1568097552/icons_fnvpa7.png">
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-6">
            <h4 class="text-black pt-48">{{storeData.billerName}}</h4>
            <p class="f-14 text-custom l-20">{{storeData.billerAddress}}</p>
          </div>
          <div class="col-md-6">
            <h4 class="text-black pt-48">{{storeData.clientName}}</h4>
            <p class="f-14 text-custom l-20">{{storeData.billingAddress}}</p>
          </div>
        </div>
        <div class="row pt-44">
          <div class="col-md-8">
            <p class="text-black f-400"><span class="text-custom f-16">Invoice no</span>:
              {{storeData.invoiceNumber}}
            </p>
            <p class="text-black f-400"><span class="text-custom f-16">Invoice date</span>:
              {{storeData.invoiceDate | date:'dd/MM/yyyy'}}
            </p>
          </div>
          <div class="col-md-4">
            <h2
              [ngClass]="{'text-danger':storeData.status==0,'text-primary':storeData.status==1,'text-success':storeData.status==2}">
              {{(storeData.status == 0) ? 'OVERDUE' : (storeData.status == 1) ? 'OVERDUE' : (storeData.status == 2) ? 'PAID' : ''}}
            </h2>
          </div>
        </div>
        <div>
          <div class="p-9">
            <div class="b-a">
              <div class="row bg-grey lter b-b p-16 pr-0 pl-0">
                <div class="col-md-9">
                  <h4 class="m-0 f-14 f-500"> Description </h4>
                </div>
                <div class="col-md-3 ">
                  <h4 class="m-0 f-14 f-500 text-right"> Amount </h4>
                </div>
              </div>
              <div class="row p-16 pr-0 pl-0">
                <div class="col-md-9">
                  <h4 class="m-0 f-14">{{storeData.services[0].serviceName}}</h4>
                  <span class="m-0 f-14 text-custom"> {{storeData.services[0].description}}</span>
                </div>
                <div class="col-md-3 d-flex align-items-center justify-content-end">
                  <h4 class="m-0 f-14  text-right"> ₹{{formatter(storeData.subTotal)}}</h4>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-7 mt-70">
              <h4 class="m-0 f-14 f-500 text-left"> Footnote description </h4>
              <p class="f-12 text-black f-400 roboto"> {{storeData.footnote}}</p>
              <h4 class="m-0 f-14 f-500 text-left">Terms & conditions </h4>
              <p class="f-12 text-black f-400 roboto"> {{storeData.terms}}</p>
            </div>
            <div class="col-md-5">
              <div class="row pt-44">
                <div class="col-md-8">
                  <p class="text-black f-400">Sub total</p>
                </div>
                <div class="col-md-4 text-right">
                  <p class="text-black f-400">₹{{formatter(storeData.subTotal)}}</p>
                </div>
              </div>
              <div class="row">
                <div class="col-md-8">
                  <p class="text-black f-400">Discount</p>
                </div>
                <div class="col-md-4 pr-8 text-right">
                  <p class="text-black f-400">₹{{formatter(storeData.discount)}}</p>
                </div>
              </div>
              <div *ngIf="storeData.igst!=undefined" class="row">
                <div class="col-md-8">
                  <p>IGST ({{storeData.igst}}%)</p>
                </div>
                <div class="col-md-4">
                  <p class="text-right">₹{{formatter(storeData.igstTaxAmount)}}</p>
                </div>
              </div>
              <div *ngIf="storeData.cgst!=undefined" class="row">
                <div class="col-md-8">
                  <p>CGST ({{storeData.cgst}}%)</p>
                </div>
                <div class="col-md-4">
                  <p class="text-right">₹{{formatter(storeData.cgstTaxAmount)}}</p>
                </div>
              </div>
              <div *ngIf="storeData.sgst!=undefined" class="row">
                <div class="col-md-8">
                  <p>SGST ({{storeData.sgst}}%)</p>
                </div>
                <div class="col-md-4">
                  <p class="text-right">₹{{formatter(storeData.sgstTaxAmount)}}</p>
                </div>
              </div>
              <div class="row bt-1">
                <div class="col-md-8">
                  <p class="f-500 roboto pt-8">Total</p>
                </div>
                <div *ngIf="storeData.cgst!=undefined && storeData.sgst!=undefined" class="col-md-4 text-right">
                  <p class="f-500 roboto pt-8">{{formatter(storeData.finalAmount)}}</p>
                </div>
                <div *ngIf="storeData.igst!=undefined" class="col-md-4 text-right">
                  <p class="f-500 roboto pt-8">{{formatter(storeData.finalAmount)}}</p>
                </div>
              </div>
              <div class="row bt-1 bb-1">
                <div class="col-md-8">
                  <p class="f-500 roboto pt-8">Balance due</p>
                </div>
                <div class="col-md-4 text-right">
                  <!-- <p class="f-500 roboto pt-8 ">{{formatter(storeData.balanceDue)}}</p> -->
                  <p class="f-500 roboto pt-8 ">{{formatter(storeData.balanceDue)}}</p>

                </div>
              </div>
            </div>
            <!-- <div class="col-md-7 mt-70">
                <p class="f-14 text-black f-500 roboto"> Terms & Conditions</p>
             </div> -->
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--show record in client invoice-->
  <div *ngIf="showRecord==true" class="pt-72">
    <app-record-payment [InvRecordData]="sendRecordPaymentData" [padding]="true" (outputData)='display($event)'>
    </app-record-payment>
  </div>
  <!--fee calc in client invoice-->
  <div *ngIf="feeCalc==true">
    <app-fee-calculations [padding]="true"></app-fee-calculations>
  </div>
  <div class="bottom-fixed wrapper-12">
    <div class="row">
      <div class="col-md-12">
        <h5 (click)="Close('close', false)" class="mb-0 pt-8 pb-8 text-white c-p">Cancel</h5>
      </div>
    </div>
  </div>
</div>
<!--Add and edit invoice section-->
<div *ngIf="showEdit" [formGroup]="editPayment"
  [ngClass]="{'pt-72': invoiceInSub=='invoiceSubscription','mt-0':invoiceInSub!='invoiceSubscription'}"
  class="bg-white pb-44 ">
  <div class="row  popup-header">
    <div class="col-md-10 pl-0">
      <h2 *ngIf="showEditIn == true" class="f-400 wrapper-20 mb-0">Edit Invoice of
        {{storeData.invoiceNumber}}
      </h2>
      <h4 *ngIf="invoiceInSub!='invoiceSubscription'" class="f-400 wrapper-20 mb-0">Add Invoice</h4>
    </div>
  </div>
  <div class="row pt-40">
    <div class="col-md-3 pr-0">
      <h5 class="m-0 text-right pt-8">Client name</h5>
    </div>
    <div class="col-md-6">
      <div class="form-group">
        <div class="row">
          <div class="col-md-12 p-0">
            <div class="form-group">
              <mat-form-field>
                <input [matAutocomplete]="auto1" [readonly]="invoiceInSub =='invoiceSubscription'" aria-label="client"
                  class="form-control br-0 pl-8" formControlName="clientName" matInput>
                <mat-autocomplete #auto1="matAutocomplete">
                  <mat-option (onSelectionChange)="selectClient($event, c)" *ngFor="let c of clientList"
                    [value]="c.clientName">
                    <span>{{c.clientName}}</span>
                  </mat-option>
                </mat-autocomplete>
                <mat-error
                  *ngIf="isClientName && getFormControledit().clientName.invalid || (getFormControledit().clientName.touched && getFormControledit().clientName.invalid)"
                  class="f-12 pt-4">
                  Client name is required
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
      <div class="row pt-10">
        <div class="col-md-6 pl-0">
          <p class="m-0 text-custom f-12">BILLER ADDRESS</p>
          <p *ngIf="editAdd1 == false" class="m-0 text-black text-break w-90 l-21">{{storeData.billerAddress}}
          </p>
          <textarea *ngIf="editAdd1 == true" class="form-control br-0" formControlName="billerAddress"
            maxlength="{{getFormControledit().billerAddress.maxLength}}" rows="5"></textarea>
          <p (click)="onclickChangeAdd1(editAdd1)" class="m-0 text-primary c-p f-12">CHANGE</p>
          <p class="mb-0 f-12 text-custom text-right pt-4 pr-36">
            {{getFormControledit().billerAddress.value?.length ? getFormControledit().billerAddress.value.length : 0}}
            /{{getFormControledit().billerAddress.maxLength}}
          </p>
        </div>
        <div class="col-md-6 pl-0">
          <p class="m-0 text-custom f-12">PAYEE ADDRESS</p>
          <p *ngIf="editAdd2 == false" class="m-0 text-black text-break l-21 w-90">
            {{storeData.billingAddress}}
          </p>
          <textarea *ngIf="editAdd2 == true" class="form-control br-0" formControlName="billingAddress"
            maxlength="{{getFormControledit().billingAddress.maxLength}}" rows="5"></textarea>
          <p (click)="onclickChangeAdd2(editAdd2)" class="m-0 text-primary c-p f-12">CHANGE</p>
          <p class="mb-0 f-12 text-custom text-right pt-4 pr-12">
            {{getFormControledit().billingAddress.value?.length ? getFormControledit().billingAddress.value.length : 0}}
            /{{getFormControledit().billingAddress.maxLength}}
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="wrapper-20 pb-0">
    <div class="bt-grey">
      <div class="row pt-28">
        <div class="col-md-4 p-0">
          <div class="row">
            <div class="col-md-5 pl-0 pt-8">
              <h5 class="m-0 text-right">Invoice No.</h5>
            </div>
            <div class="col-md-7 p-0">
              <div class="form-group mb-0">
                <input class="form-control br-0" formControlName="invoiceNumber"
                  maxlength="{{getFormControledit().invoiceNumber.maxLength}}" type="email">
              </div>
              <div class="col-md-12 pl-0">
                <mat-error
                  *ngIf="isInvoiceNumber && getFormControledit().invoiceNumber.invalid || (getFormControledit().invoiceNumber.touched && getFormControledit().invoiceNumber.invalid)"
                  class="f-12 pt-4">
                  Invoice no. is required
                </mat-error>
              </div>
              <div class="col-md-12">
                <p class="mb-0 f-12 text-custom text-right pt-4">
                  {{getFormControledit().invoiceNumber.value?.length ? getFormControledit().invoiceNumber.value.length : 0}}
                  /{{getFormControledit().invoiceNumber.maxLength}}
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 p-0">
          <div class="row">
            <div class="col-md-6">
              <h5 class="m-0 pt-8 text-right">Invoice Date</h5>
            </div>
            <div class="col-md-6 p-0">
              <div class="form-group mb-0">
                <mat-form-field class="ba-date">
                  <input [matDatepicker]="picker" (dateChange)="checkDateDiff($event)" class="form-control b-0"
                    formControlName="invoiceDate" matInput readonly>
                  <mat-datepicker-toggle [for]="picker" matSuffix></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                  <mat-error class="f-12 pt-4">Invoice date is required
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="col-md-6"></div>
          </div>
        </div>
        <div class="col-md-4 p-0">
          <div class="row">
            <div class="col-md-6">
              <h5 class="m-0 pt-8 text-right">Due Date</h5>
            </div>
            <div class="col-md-6 p-0">
              <div class="form-group mb-0">
                <mat-form-field class="ba-date">
                  <input [matDatepicker]="dueDatePicker" (dateChange)="checkDateDiff($event)" [min]="maxDate"
                    class="form-control b-0" formControlName="dueDate" matInput readonly>
                  <mat-datepicker-toggle [for]="dueDatePicker" matSuffix></mat-datepicker-toggle>
                  <mat-datepicker #dueDatePicker></mat-datepicker>
                  <mat-error class="f-12 pt-4">Invoice date is required
                  </mat-error>
                </mat-form-field>
                <mat-error class="f-12 pt-4" *ngIf="showDateError">{{showDateError}}</mat-error>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="mt-28 b-a">
        <div class="row bg-grey lter b-a">
          <div class="col-md-6 p-0">
            <p class="m-0 text-black wrapper-16 f-500">Service Details</p>
          </div>
          <div class="col-md-2 p-0">
            <p class="m-0 text-black f-500 wrapper-16">Price ₹ </p>
          </div>
          <div class="col-md-2 p-0">
            <p class="m-0 text-black f-500 wrapper-16">Tax</p>
          </div>
          <div class="col-md-2 p-0">
            <p class="m-0 text-black f-500 wrapper-16 text-right">Amount</p>
          </div>
        </div>
        <div class="row bg-white pb-8 pt-8">
          <div class="col-md-6 pl-0">
            <div class="row">
              <div class="form-group mb-0 ml-8 w-100">
                <input [matAutocomplete]="auto" [readonly]="invoiceInSub =='invoiceSubscription'" aria-label="State"
                  class="form-control w-100 br-0 pl-8" formControlName="serviceName" list="serviceName" matInput
                  placeholder="You can search service">
                <mat-autocomplete #auto="matAutocomplete">
                  <mat-option *ngFor="let s of serviceList" [value]="s.serviceName">
                    <span>{{s.serviceName}}</span>
                  </mat-option>
                </mat-autocomplete>
              </div>
              <div class="col-md-8">
                <mat-error
                  *ngIf="isServiceName && getFormControledit().serviceName.invalid || (getFormControledit().serviceName.touched && getFormControledit().serviceName.invalid)"
                  class="f-12 pt-4">
                  Service name is required
                </mat-error>
              </div>
            </div>
          </div>
          <div class="col-md-2 pl-0">
            <input #finalAmountInput (keypress)="utils.keyPress($event)" [(ngModel)]="finalAmount"
              class="form-control br-0" formControlName="finalAmount" type="number">
            <div class="col-md-8">
              <mat-error
                *ngIf="isPrice && getFormControledit().finalAmount.invalid || (getFormControledit().finalAmount.touched && getFormControledit().finalAmount.invalid)"
                class="f-12 pt-4">
                Price is required
              </mat-error>
            </div>
          </div>
          <div class="col-md-2 pl-0">
            <select (change)="changeTaxStatus($event.target.value)" class="form-control" formControlName="taxStatus"
              id="serviceName">
              <option value="">Select tax type</option>
              <option value="IGST(18%)">IGST(18%)</option>
              <option value="SGST(9%)|CGST(9%)">SGST(9%) | CGST(9%)</option>
            </select>
            <div class="col-md-8">
              <mat-error
                *ngIf="isTaxstatus && getFormControledit().taxStatus.invalid || (getFormControledit().taxStatus.touched && getFormControledit().taxStatus.invalid)"
                class="f-12 pt-4">
                Tax status is required
              </mat-error>
            </div>
          </div>
          {{storeData.taxStatus}}
          <div class="col-md-2 d-flex align-items-center justify-content-end">
            <h5 class="m-0 text-right ">
              {{finalAmount}}
            </h5>
            <h5 *ngIf="storeData.sgst != undefined" [hidden]="finalAmount !=undefined" class="m-0 text-right ">
              {{storeData.cgstTaxAmount}}</h5>
            <h5 *ngIf="storeData.igst != undefined" [hidden]="finalAmount !=undefined" class="m-0 text-right ">
              {{storeData.igstTaxAmount}}</h5>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row pt-12">
    <div class="col-md-8"></div>
    <div class="col-md-2">
      <h5 class="m-0">Sub total ₹</h5>
    </div>
    <div class="col-md-2 pr-24">
      <h5 class="m-0 text-right pr-8">{{finalAmount}} </h5>
    </div>
  </div>
  <div class="row pt-20">
    <div class="col-md-8"></div>
    <div class="col-md-2 pt-12">
      <h5 class="m-0">Discount ₹</h5>
    </div>
    <div class="col-md-2 pr-24">
      <input (changedValue)="discount = $event" [(ngModel)]="discount" [inputValidator]="validatorType.NUMBER_ONLY"
        [maxValue]="finalAmountInput.value" appInputValueValidation class="form-control br-0 text-right"
        formControlName="discount" type="number">
    </div>
  </div>
  <div class="row pt-20 pb-12">
    <div class="col-md-8"></div>
    <div *ngIf="taxStatus == 'IGST(18%)'" class="col-md-2 pr-24">
      <h5 class="m-0">IGST(18%)</h5>
    </div>
    <div *ngIf="taxStatus == 'SGST(9%)|CGST(9%)'" class="col-md-2 pr-24">
      <h5 class="m-0">SGST(9%)</h5>
    </div>
    <div *ngIf="taxStatus == 'IGST(18%)'" class="col-md-2 pr-24">
      <h5 class="m-0 text-right pr-8">₹{{(18 / 100 * (finalAmount - discount) | number:'1.2-2')}}</h5>
    </div>
    <div *ngIf="taxStatus == 'SGST(9%)|CGST(9%)'" class="col-md-2 pr-24">
      <h5 class="m-0 text-right pr-8">₹{{(9 / 100 * (finalAmount - discount)) | number:'1.2-2'}}</h5>
    </div>
  </div>
  <div class="row pt-20 pb-12">
    <div class="col-md-8"></div>
    <div *ngIf="taxStatus == 'SGST(9%)|CGST(9%)'" class="col-md-2 pr-24">
      <h5 class="m-0">CGST(9%)</h5>
    </div>
    <div *ngIf="taxStatus == 'SGST(9%)|CGST(9%)'" class="col-md-2 pr-24">
      <h5 class="m-0 text-right pr-8">₹{{9 / 100 * (finalAmount - discount) | number:'1.2-2'}}</h5>
    </div>
  </div>
  <div class="row pb-12 ">
    <div class="col-md-8"></div>
    <div class="col-md-2 pt-4 bt-grey">
      <h5 class="m-0 text-black pt-8 f-500">Total</h5>
    </div>
    <div class="col-md-2 pt-4 bt-grey pr-24">
      <h5 class="m-0 text-right pr-8 pt-8 text-black f-500">
        {{(finalAmount - discount) + +(18 / 100 * (finalAmount - discount))  | number:'1.2-2'}}
      </h5>
    </div>
  </div>
  <div class="bg-grey lter wrapper-28">
    <div class="row">
      <div class="col-md-6">
        <div class="row">
          <div class="col-md-3 pl-0">
            <h5 class="m-0 pt-24 text-black text-right">Footnote Description</h5>
          </div>
          <div class="col-md-9 p-0">
            <div class="form-group mb-0">
              <textarea class="form-control" formControlName="footnote"
                maxlength="{{getFormControledit().footnote.maxLength}}" rows="5"></textarea>
            </div>
            <div class="row">
              <div class="col-md-6">
                <p class="f-12 m-0 text-custom roboto">Optional</p>
              </div>
              <div class="col-md-6">
                <p class="mb-0 f-12 text-custom text-right pt-4">
                  {{getFormControledit().footnote.value?.length ? getFormControledit().footnote.value.length : 0}}
                  /{{getFormControledit().footnote.maxLength}}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6 pr-0">
        <div class="row">
          <div class="col-md-3 pl-0">
            <h5 class="m-0 text-black pt-24 text-right">Terms & Conditions</h5>
          </div>
          <div class="col-md-9 p-0">
            <div class="form-group mb-0">
              <textarea class="form-control" formControlName="terms"
                maxlength="{{getFormControledit().terms.maxLength}}" rows="5"></textarea>
            </div>
            <div class="row">
              <div class="col-md-6">
                <p class="f-12 m-0 text-custom roboto">Optional</p>
              </div>
              <div class="col-md-6">
                <p class="mb-0 f-12 text-custom text-right pt-4">
                  {{getFormControledit().terms.value?.length ? getFormControledit().terms.value.length : 0}}
                  /{{getFormControledit().terms.maxLength}}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row pt-44 mt-44">
    <div class="col-md-12 right text-right">
      <h5 (click)="closeEditInv()" class="mat-stroked-button br-0 text-light mr-20">CANCEL</h5>
      <button (click)="updateInvoice()" class="btn-bottom br-0 text-inherit" mat-button>SAVE</button>
    </div>
  </div>
</div>